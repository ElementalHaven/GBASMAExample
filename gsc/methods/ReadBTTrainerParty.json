{"names":["ReadBTTrainerParty"],"callingMethods":["RunBattleTowerTrainer"],"methodsCalled":["CheckBTMonMovesForErrors","CopyBTTrainer_FromBT_OT_TowBT_OTTemp","CopyBytes","FarCall","GetPokemonName"],"methodAddressesUsed":["CheckStringForErrors"],"varsSet":["wBGMapBuffer","wBT_OTTempMon1NameEnd","wBT_OTTempMon2NameEnd","wBT_OTTempMon3NameEnd","wNamedObjectIndexBuffer","wOtherTrainerClass"],"varsUsed":["wBGMapBuffer","wBT_OTTempMon1","wBT_OTTempMon2","wBT_OTTempMon3"],"varAddressesUsed":["BT_ChrisName","wBT_OTTempMon1Name","wBT_OTTempMon2Name","wBT_OTTempMon3Name","wBT_OTTempName","wBT_OTTempTrainerClass","wOTPartyCount","wOTPartyMon1Species","wOTPartyMonNicknames","wOTPlayerName"],"constantsUsed":["BATTLETOWER_PARTY_LENGTH","MON_NAME_LENGTH","NAME_LENGTH","PARTYMON_STRUCT_LENGTH"],"lines":["ReadBTTrainerParty:","; Initialise the BattleTower-Trainer and his mon","\tcall CopyBTTrainer_FromBT_OT_TowBT_OTTemp","","; Check the nicknames for illegal characters, and replace bad nicknames","; with their species names.","\tld de, wBT_OTTempMon1Name","\tld c, MON_NAME_LENGTH","\tfarcall CheckStringForErrors","\tjr nc, .skip_mon_1","","\tld a, [wBT_OTTempMon1]","\tld [wNamedObjectIndexBuffer], a","\tcall GetPokemonName","\tld l, e","\tld h, d","\tld de, wBT_OTTempMon1Name","\tld bc, MON_NAME_LENGTH","\tcall CopyBytes","",".skip_mon_1","\tld de, wBT_OTTempMon2Name","\tld c, MON_NAME_LENGTH","\tfarcall CheckStringForErrors","\tjr nc, .skip_mon_2","\tld a, [wBT_OTTempMon2]","\tld [wNamedObjectIndexBuffer], a","\tcall GetPokemonName","\tld l, e","\tld h, d","\tld de, wBT_OTTempMon2Name","\tld bc, MON_NAME_LENGTH","\tcall CopyBytes","",".skip_mon_2","\tld de, wBT_OTTempMon3Name","\tld c, MON_NAME_LENGTH","\tfarcall CheckStringForErrors","\tjr nc, .skip_mon_3","\tld a, [wBT_OTTempMon3]","\tld [wNamedObjectIndexBuffer], a","\tcall GetPokemonName","\tld l, e","\tld h, d","\tld de, wBT_OTTempMon3Name","\tld bc, MON_NAME_LENGTH","\tcall CopyBytes","",".skip_mon_3","; Add the terminator character to each of these names","\tld a, \"@\"","\tld [wBT_OTTempMon1NameEnd - 1], a","\tld [wBT_OTTempMon2NameEnd - 1], a","\tld [wBT_OTTempMon3NameEnd - 1], a","; Fix errors in the movesets","\tcall CheckBTMonMovesForErrors","; Repair the trainer name if needed, then copy it to wOTPlayerName","\tld de, wBT_OTTempName","\tld c, NAME_LENGTH - 1","\tfarcall CheckStringForErrors","\tjr nc, .trainer_name_okay","\tld hl, BT_ChrisName","\tjr .done_trainer_name","",".trainer_name_okay","\tld hl, wBT_OTTempName","",".done_trainer_name","\tld de, wOTPlayerName","\tld bc, NAME_LENGTH - 1","\tcall CopyBytes","\tld a, \"@\"","\tld [de], a","","\tld hl, wBT_OTTempTrainerClass","\tld a, [hli]","\tld [wOtherTrainerClass], a","\tld a, LOW(wOTPartyMonNicknames)","\tld [wBGMapBuffer], a","\tld a, HIGH(wOTPartyMonNicknames)","\tld [wBGMapBuffer + 1], a","","\t; Copy mon into Memory from the address in hl","\tld de, wOTPartyMon1Species","\tld bc, wOTPartyCount","\tld a, BATTLETOWER_PARTY_LENGTH","\tld [bc], a","\tinc bc",".otpartymon_loop","\tpush af","\tld a, [hl]","\tld [bc], a","\tinc bc","\tpush bc","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall CopyBytes","\tpush de","\tld a, [wBGMapBuffer]","\tld e, a","\tld a, [wBGMapBuffer + 1]","\tld d, a","\tld bc, MON_NAME_LENGTH","\tcall CopyBytes","\tld a, e","\tld [wBGMapBuffer], a","\tld a, d","\tld [wBGMapBuffer + 1], a","\tpop de","\tpop bc","\tpop af","\tdec a","\tand a","\tjr nz, .otpartymon_loop","\tld a, -1","\tld [bc], a","\tret"],"name":"ReadBTTrainerParty","file":"engine/events/battle_tower/battle_tower.asm","lineNo":269,"address":294015,"addressUsedBy":[]}