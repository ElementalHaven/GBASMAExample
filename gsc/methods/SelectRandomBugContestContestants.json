{"names":["SelectRandomBugContestContestants"],"callingMethods":[],"methodsCalled":["EventFlagAction","Random","SimpleDivide"],"methodAddressesUsed":[],"varsSet":[],"varsUsed":[],"varAddressesUsed":["BugCatchingContestantEventFlagTable"],"constantsUsed":["CHECK_FLAG","NUM_BUG_CONTESTANTS","RESET_FLAG","SET_FLAG"],"lines":["SelectRandomBugContestContestants:","; Select five random people to participate in the current contest.","","; First we have to make sure that any old data is cleared away.","\tld c, NUM_BUG_CONTESTANTS","\tld hl, BugCatchingContestantEventFlagTable",".loop1","\tpush bc","\tpush hl","\tld e, [hl]","\tinc hl","\tld d, [hl]","\tld b, RESET_FLAG","\tcall EventFlagAction","\tpop hl","\tinc hl","\tinc hl","\tpop bc","\tdec c","\tjr nz, .loop1","","; Now that that\u0027s out of the way, we can get on to the good stuff.","\tld c, 5",".loop2","\tpush bc",".next","; Choose a flag at uniform random to be set.","\tcall Random","\tcp $ff / NUM_BUG_CONTESTANTS * NUM_BUG_CONTESTANTS","\tjr nc, .next","\tld c, $ff / NUM_BUG_CONTESTANTS","\tcall SimpleDivide","\tld e, b","\tld d, 0","\tld hl, BugCatchingContestantEventFlagTable","\tadd hl, de","\tadd hl, de","\tld e, [hl]","\tinc hl","\tld d, [hl]","\tpush de","; If we\u0027ve already set it, it doesn\u0027t count.","\tld b, CHECK_FLAG","\tcall EventFlagAction","\tpop de","\tld a, c","\tand a","\tjr nz, .next","; Set the flag.  This will cause that sprite to not be visible in the contest.","\tld b, SET_FLAG","\tcall EventFlagAction","\tpop bc","; Check if we\u0027re done.  If so, return.  Otherwise, choose the next victim.","\tdec c","\tjr nz, .loop2","\tret"],"name":"SelectRandomBugContestContestants","file":"engine/events/bug_contest/contest_2.asm","lineNo":1,"address":88807,"addressUsedBy":[]}