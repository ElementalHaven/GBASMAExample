{"names":["DSTChecks"],"callingMethods":["BankOfMom"],"methodsCalled":["ClearBox","PlaceHLTextAtBC","YesNoBox"],"methodAddressesUsed":[],"varsSet":["wDST","wStartDay","wStartHour"],"varsUsed":["hHours","wDST","wStartDay","wStartHour"],"varAddressesUsed":[],"constantsUsed":[],"lines":["DSTChecks:","; check the time; avoid changing DST if doing so would change the current day","\tld a, [wDST]","\tbit 7, a","\tldh a, [hHours]","\tjr z, .NotDST","\tand a ; within one hour of 00:00?","\tjr z, .LostBooklet","\tjr .loop","",".NotDST:","\tcp 23 ; within one hour of 23:00?","\tjr nz, .loop","\t; fallthrough","",".LostBooklet:","\tcall .ClearBox","\tbccoord 1, 14","\tld hl, .TimesetAskAdjustDSTText","\tcall PlaceHLTextAtBC","\tcall YesNoBox","\tret c","\tcall .ClearBox","\tbccoord 1, 14","\tld hl, .MomLostGearBookletText","\tcall PlaceHLTextAtBC","\tret","",".loop","\tcall .ClearBox","\tbccoord 1, 14","\tld a, [wDST]","\tbit 7, a","\tjr z, .SetDST","\tld hl, .TimesetAskNotDSTText","\tcall PlaceHLTextAtBC","\tcall YesNoBox","\tret c","\tld a, [wDST]","\tres 7, a","\tld [wDST], a","\tcall .SetClockBack","\tcall .ClearBox","\tbccoord 1, 14","\tld hl, .TimesetNotDSTText","\tcall PlaceHLTextAtBC","\tret","",".SetDST:","\tld hl, .TimesetAskDSTText","\tcall PlaceHLTextAtBC","\tcall YesNoBox","\tret c","\tld a, [wDST]","\tset 7, a","\tld [wDST], a","\tcall .SetClockForward","\tcall .ClearBox","\tbccoord 1, 14","\tld hl, .TimesetDSTText","\tcall PlaceHLTextAtBC","\tret","",".SetClockForward:","\tld a, [wStartHour]","\tadd 1","\tsub 24","\tjr nc, .DontLoopHourForward","\tadd 24",".DontLoopHourForward:","\tld [wStartHour], a","\tccf","\tld a, [wStartDay]","\tadc 0","\tld [wStartDay], a","\tret","",".SetClockBack:","\tld a, [wStartHour]","\tsub 1","\tjr nc, .DontLoopHourBack","\tadd 24",".DontLoopHourBack:","\tld [wStartHour], a","\tld a, [wStartDay]","\tsbc 0","\tjr nc, .DontLoopDayBack","\tadd 7",".DontLoopDayBack:","\tld [wStartDay], a","\tret","",".ClearBox:","\thlcoord 1, 14","\tlb bc, 3, 18","\tcall ClearBox","\tret","",".TimesetAskAdjustDSTText:","\ttext_far _TimesetAskAdjustDSTText","\ttext_end","",".MomLostGearBookletText:","\ttext_far _MomLostGearBookletText","\ttext_end","",".TimesetAskDSTText:","\ttext_far _TimesetAskDSTText","\ttext_end","",".TimesetDSTText:","\ttext_far _TimesetDSTText","\ttext_end","",".TimesetAskNotDSTText:","\ttext_far _TimesetAskNotDSTText","\ttext_end","",".TimesetNotDSTText:","\ttext_far _TimesetNotDSTText","\ttext_end"],"name":"DSTChecks","file":"engine/events/mom.asm","lineNo":294,"address":94751,"addressUsedBy":[]}