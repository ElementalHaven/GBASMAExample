{"names":["SaveBoxAddress"],"callingMethods":["SaveBox"],"methodsCalled":["CloseSRAM","CopyBytes","OpenSRAM"],"methodAddressesUsed":[],"varsSet":[],"varsUsed":[],"varAddressesUsed":["sBoxEnd","wBoxPartialData"],"constantsUsed":[],"lines":["SaveBoxAddress:","; Save box via wBoxPartialData.","; We do this in three steps because the size of wBoxPartialData is less than","; the size of sBox.","\tpush hl","; Load the first part of the active box.","\tpush af","\tpush de","\tld a, BANK(sBox)","\tcall OpenSRAM","\tld hl, sBox","\tld de, wBoxPartialData","\tld bc, (wBoxPartialDataEnd - wBoxPartialData)","\tcall CopyBytes","\tcall CloseSRAM","\tpop de","\tpop af","; Save it to the target box.","\tpush af","\tpush de","\tcall OpenSRAM","\tld hl, wBoxPartialData","\tld bc, (wBoxPartialDataEnd - wBoxPartialData)","\tcall CopyBytes","\tcall CloseSRAM","","; Load the second part of the active box.","\tld a, BANK(sBox)","\tcall OpenSRAM","\tld hl, sBox + (wBoxPartialDataEnd - wBoxPartialData)","\tld de, wBoxPartialData","\tld bc, (wBoxPartialDataEnd - wBoxPartialData)","\tcall CopyBytes","\tcall CloseSRAM","\tpop de","\tpop af","","\tld hl, (wBoxPartialDataEnd - wBoxPartialData)","\tadd hl, de","\tld e, l","\tld d, h","; Save it to the next part of the target box.","\tpush af","\tpush de","\tcall OpenSRAM","\tld hl, wBoxPartialData","\tld bc, (wBoxPartialDataEnd - wBoxPartialData)","\tcall CopyBytes","\tcall CloseSRAM","","; Load the third and final part of the active box.","\tld a, BANK(sBox)","\tcall OpenSRAM","\tld hl, sBox + (wBoxPartialDataEnd - wBoxPartialData) * 2","\tld de, wBoxPartialData","\tld bc, sBoxEnd - (sBox + (wBoxPartialDataEnd - wBoxPartialData) * 2) ; $8e","\tcall CopyBytes","\tcall CloseSRAM","\tpop de","\tpop af","","\tld hl, (wBoxPartialDataEnd - wBoxPartialData)","\tadd hl, de","\tld e, l","\tld d, h","; Save it to the final part of the target box.","\tcall OpenSRAM","\tld hl, wBoxPartialData","\tld bc, sBoxEnd - (sBox + (wBoxPartialDataEnd - wBoxPartialData) * 2) ; $8e","\tcall CopyBytes","\tcall CloseSRAM","","\tpop hl","\tret"],"name":"SaveBoxAddress","file":"engine/menus/save.asm","lineNo":886,"address":91595,"addressUsedBy":[]}