{"names":["DoBattleTransition"],"callingMethods":[],"methodsCalled":["BattleStart_CopyTilemapAtOnce","BattleTransitionJumptable","ByteFill","ConvertTrainerBattlePokeballTilesTo2bpp","DelayFrame","DmgToCgbBGPals","FarCall","LoadTrainerBattlePokeballTiles","UpdateSprites","WipeLYOverrides"],"methodAddressesUsed":["ReanchorBGMap_NoOAMUpdate"],"varsSet":["hBGMapMode","hLCDCPointer","hLYOverrideEnd","hLYOverrideStart","hSCY","hVBlank","hWY","rSVBK","wBGP","wOBP0","wOBP1"],"varsUsed":["rBGP","rOBP0","rOBP1","rSVBK","wJumptableIndex","wLinkMode"],"varAddressesUsed":["hVBlank","wBGPals1"],"constantsUsed":["SCREEN_HEIGHT_PX","palettes"],"lines":["DoBattleTransition:","\tcall .InitGFX","\tldh a, [rBGP]","\tld [wBGP], a","\tldh a, [rOBP0]","\tld [wOBP0], a","\tldh a, [rOBP1]","\tld [wOBP1], a","\tcall DelayFrame","\tld hl, hVBlank","\tld a, [hl]","\tpush af","\tld [hl], $1","",".loop","\tld a, [wJumptableIndex]","\tbit 7, a ; BATTLETRANSITION_END?","\tjr nz, .done","\tcall BattleTransitionJumptable","\tcall DelayFrame","\tjr .loop","",".done","\tldh a, [rSVBK]","\tpush af","\tld a, BANK(wBGPals1)","\tldh [rSVBK], a","","\tld hl, wBGPals1","\tld bc, 8 palettes","\txor a","\tcall ByteFill","","\tpop af","\tldh [rSVBK], a","","\tld a, %11111111","\tld [wBGP], a","\tcall DmgToCgbBGPals","\tcall DelayFrame","\txor a","\tldh [hLCDCPointer], a","\tldh [hLYOverrideStart], a","\tldh [hLYOverrideEnd], a","\tldh [hSCY], a","","\tld a, $1 ; unnecessary bankswitch?","\tldh [rSVBK], a","\tpop af","\tldh [hVBlank], a","\tcall DelayFrame","\tret","",".InitGFX:","\tld a, [wLinkMode]","\tcp LINK_MOBILE","\tjr z, .mobile","\tfarcall ReanchorBGMap_NoOAMUpdate","\tcall UpdateSprites","\tcall DelayFrame","\tcall .NonMobile_LoadPokeballTiles","\tcall BattleStart_CopyTilemapAtOnce","\tjr .resume","",".mobile","\tcall LoadTrainerBattlePokeballTiles","",".resume","\tld a, SCREEN_HEIGHT_PX","\tldh [hWY], a","\tcall DelayFrame","\txor a","\tldh [hBGMapMode], a","\tld hl, wJumptableIndex","\txor a","\tld [hli], a","\tld [hli], a","\tld [hl], a","\tcall WipeLYOverrides","\tret","",".NonMobile_LoadPokeballTiles:","\tcall LoadTrainerBattlePokeballTiles","\thlbgcoord 0, 0","\tcall ConvertTrainerBattlePokeballTilesTo2bpp","\tret"],"name":"DoBattleTransition","file":"engine/battle/battle_transition.asm","lineNo":12,"address":181541,"addressUsedBy":[]}