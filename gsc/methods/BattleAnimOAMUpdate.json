{"names":["BattleAnimOAMUpdate"],"callingMethods":["BattleAnim_UpdateOAM_All"],"methodsCalled":["DeinitBattleAnimation","GetBattleAnimFrame","GetBattleAnimOAMPointer","InitBattleAnimBuffer"],"methodAddressesUsed":[],"varsSet":["wBattleAnimOAMPointerLo","wBattleAnimTempTileID"],"varsUsed":["wBattleAnimOAMPointerLo","wBattleAnimTempFrameOAMFlags","wBattleAnimTempOAMFlags","wBattleAnimTempPalette","wBattleAnimTempTileID","wBattleAnimTempXCoord","wBattleAnimTempXOffset","wBattleAnimTempYCoord","wBattleAnimTempYOffset"],"varAddressesUsed":["wBattleAnimTempOAMFlags"],"constantsUsed":[],"lines":["BattleAnimOAMUpdate:","\tcall InitBattleAnimBuffer","\tcall GetBattleAnimFrame","\tcp dowait_command","\tjp z, .done","\tcp delanim_command","\tjp z, .delete","","\tpush af","\tld hl, wBattleAnimTempOAMFlags","\tld a, [wBattleAnimTempFrameOAMFlags]","\txor [hl]","\tand PRIORITY | Y_FLIP | X_FLIP","\tld [hl], a","\tpop af","","\tpush bc","\tcall GetBattleAnimOAMPointer","\tld a, [wBattleAnimTempTileID]","\tadd [hl] ; tile offset","\tld [wBattleAnimTempTileID], a","\tinc hl","\tld a, [hli] ; oam data length","\tld c, a","\tld a, [hli] ; oam data pointer","\tld h, [hl]","\tld l, a","\tld a, [wBattleAnimOAMPointerLo]","\tld e, a","\tld d, HIGH(wVirtualOAM)","",".loop","\t; Y Coord","\tld a, [wBattleAnimTempYCoord]","\tld b, a","\tld a, [wBattleAnimTempYOffset]","\tadd b","\tld b, a","\tpush hl","\tld a, [hl]","\tld hl, wBattleAnimTempOAMFlags","\tbit OAM_Y_FLIP, [hl]","\tjr z, .no_yflip","\tadd $8","\txor $ff","\tinc a",".no_yflip","\tpop hl","\tadd b","\tld [de], a","","\t; X Coord","\tinc hl","\tinc de","\tld a, [wBattleAnimTempXCoord]","\tld b, a","\tld a, [wBattleAnimTempXOffset]","\tadd b","\tld b, a","\tpush hl","\tld a, [hl]","\tld hl, wBattleAnimTempOAMFlags","\tbit OAM_X_FLIP, [hl]","\tjr z, .no_xflip","\tadd $8","\txor $ff","\tinc a",".no_xflip","\tpop hl","\tadd b","\tld [de], a","","\t; Tile ID","\tinc hl","\tinc de","\tld a, [wBattleAnimTempTileID]","\tadd BATTLEANIM_BASE_TILE","\tadd [hl]","\tld [de], a","","\t; Attributes","\tinc hl","\tinc de","\tld a, [wBattleAnimTempOAMFlags]","\tld b, a","\tld a, [hl]","\txor b","\tand PRIORITY | Y_FLIP | X_FLIP","\tld b, a","\tld a, [hl]","\tand OBP_NUM","\tor b","\tld b, a","\tld a, [wBattleAnimTempPalette]","\tand PALETTE_MASK | VRAM_BANK_1","\tor b","\tld [de], a","","\tinc hl","\tinc de","\tld a, e","\tld [wBattleAnimOAMPointerLo], a","\tcp LOW(wVirtualOAMEnd)","\tjr nc, .exit_set_carry","\tdec c","\tjr nz, .loop","\tpop bc","\tjr .done","",".delete","\tcall DeinitBattleAnimation","",".done","\tand a","\tret","",".exit_set_carry","\tpop bc","\tscf","\tret"],"name":"BattleAnimOAMUpdate","file":"engine/battle_anims/core.asm","lineNo":80,"address":224806,"addressUsedBy":[]}