{"names":["PrintEZChatBattleMessage"],"callingMethods":["Function11c082"],"methodsCalled":["CopyMobileEZChatToC608","GetLengthOfWordAtC608","PlaceHLTextAtBC"],"methodAddressesUsed":[],"varsSet":["wJumptableIndex","wcf64"],"varsUsed":["wJumptableIndex","wcf64"],"varAddressesUsed":["wc608","wc618"],"constantsUsed":[],"lines":["PrintEZChatBattleMessage:","; Use up to 6 words from bc to print text starting at de.","\t; Preserve [wJumptableIndex], [wcf64]","\tld a, [wJumptableIndex]","\tld l, a","\tld a, [wcf64]","\tld h, a","\tpush hl","\t; reset value at [wc618] (not preserved)","\tld hl, wc618","\tld a, $0","\tld [hli], a","\t; preserve de","\tpush de","\t; [wJumptableIndex] keeps track of which line we\u0027re on (0, 1, or 2)","\t; [wcf64] keeps track of how much room we have left in the current line","\txor a","\tld [wJumptableIndex], a","\tld a, 18","\tld [wcf64], a","\tld a, 6",".loop","\tpush af","\t; load the 2-byte word data pointed to by bc","\tld a, [bc]","\tld e, a","\tinc bc","\tld a, [bc]","\tld d, a","\tinc bc","\t; if $0000, we\u0027re done","\tor e","\tjr z, .done","\t; preserving hl and bc, get the length of the word","\tpush hl","\tpush bc","\tcall CopyMobileEZChatToC608","\tcall GetLengthOfWordAtC608","\tld e, c","\tpop bc","\tpop hl","\t; if the functions return 0, we\u0027re done","\tld a, e","\tor a","\tjr z, .done",".loop2","\t; e contains the length of the word","\t; add 1 for the space, unless we\u0027re at the start of the line","\tld a, [wcf64]","\tcp 18","\tjr z, .skip_inc","\tinc e","",".skip_inc","\t; if the word fits, put it on the same line","\tcp e","\tjr nc, .same_line","\t; otherwise, go to the next line","\tld a, [wJumptableIndex]","\tinc a","\tld [wJumptableIndex], a","\t; if we\u0027re on line 2, insert \"\u003cNEXT\u003e\"","\tld [hl], \"\u003cNEXT\u003e\"","\trra","\tjr c, .got_line_terminator","\t; else, insert \"\u003cCONT\u003e\"","\tld [hl], \"\u003cCONT\u003e\"","",".got_line_terminator","\tinc hl","\t; init the next line, holding on to the same word","\tld a, 18","\tld [wcf64], a","\tdec e","\tjr .loop2","",".same_line","\t; add the space, unless we\u0027re at the start of the line","\tcp 18","\tjr z, .skip_space","\tld [hl], \" \"","\tinc hl","",".skip_space","\t; deduct the length of the word","\tsub e","\tld [wcf64], a","\tld de, wc608",".place_string_loop","\t; load the string from de to hl","\tld a, [de]","\tcp \"@\"","\tjr z, .done","\tinc de","\tld [hli], a","\tjr .place_string_loop","",".done","\t; next word?","\tpop af","\tdec a","\tjr nz, .loop","\t; we\u0027re finished, place \"\u003cDONE\u003e\"","\tld [hl], \"\u003cDONE\u003e\"","\t; now, let\u0027s place the string from wc618 to bc","\tpop bc","\tld hl, wc618","\tcall PlaceHLTextAtBC","\t; restore the original values of [wJumptableIndex] and [wcf64]","\tpop hl","\tld a, l","\tld [wJumptableIndex], a","\tld a, h","\tld [wcf64], a","\tret"],"name":"PrintEZChatBattleMessage","file":"mobile/fixed_words.asm","lineNo":94,"address":283956,"addressUsedBy":["Mobile_PrintOpponentBattleMessage"]}