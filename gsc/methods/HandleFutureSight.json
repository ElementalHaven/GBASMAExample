{"names":["HandleFutureSight"],"callingMethods":["HandleBetweenTurnEffects"],"methodsCalled":["FarCall","GetBattleVarAddr","SetEnemyTurn","SetPlayerTurn","StdBattleTextbox","UpdateBattleMonInParty","UpdateEnemyMonInParty"],"methodAddressesUsed":["DoMove","UpdateMoveData"],"varsSet":["wAlreadyDisobeyed","wAttackMissed","wCurDamage","wTypeModifier"],"varsUsed":["hBattleTurn","hSerialConnectionStatus"],"varAddressesUsed":["wEnemyFutureSightCount","wPlayerFutureSightCount"],"constantsUsed":["BATTLE_VARS_MOVE","EFFECTIVE","FUTURE_SIGHT"],"lines":["HandleFutureSight:","\tldh a, [hSerialConnectionStatus]","\tcp USING_EXTERNAL_CLOCK","\tjr z, .enemy_first","\tcall SetPlayerTurn","\tcall .do_it","\tcall SetEnemyTurn","\tjp .do_it","",".enemy_first","\tcall SetEnemyTurn","\tcall .do_it","\tcall SetPlayerTurn","",".do_it","\tld hl, wPlayerFutureSightCount","\tldh a, [hBattleTurn]","\tand a","\tjr z, .okay","\tld hl, wEnemyFutureSightCount","",".okay","\tld a, [hl]","\tand a","\tret z","\tdec a","\tld [hl], a","\tcp $1","\tret nz","","\tld hl, BattleText_TargetWasHitByFutureSight","\tcall StdBattleTextbox","","\tld a, BATTLE_VARS_MOVE","\tcall GetBattleVarAddr","\tpush af","\tld a, FUTURE_SIGHT","\tld [hl], a","","\tcallfar UpdateMoveData","\txor a","\tld [wAttackMissed], a","\tld [wAlreadyDisobeyed], a","\tld a, EFFECTIVE","\tld [wTypeModifier], a","\tcallfar DoMove","\txor a","\tld [wCurDamage], a","\tld [wCurDamage + 1], a","","\tld a, BATTLE_VARS_MOVE","\tcall GetBattleVarAddr","\tpop af","\tld [hl], a","","\tcall UpdateBattleMonInParty","\tjp UpdateEnemyMonInParty"],"name":"HandleFutureSight","file":"engine/battle/core.asm","lineNo":1461,"address":135274,"addressUsedBy":[]}