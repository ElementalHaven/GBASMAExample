{"names":["BattleCommand_BeatUp"],"callingMethods":[],"methodsCalled":["AddNTimes","CopyBytes","DelayFrames","EnemyAttackDamage","GetBaseData","GetBeatupMonLocation","GetNick","GetPokemonName","ResetDamage","SkipToBattleCommand","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":["wBeatUpHitAtLeastOnce","wCurSpecies","wEnemyRolloutCount","wNamedObjectIndexBuffer","wPlayerRolloutCount","wd002"],"varsUsed":["hBattleTurn","wBaseAttack","wBaseDefense","wBattleMode","wBattleMonSpecies","wCurBattleMon","wCurOTMon","wEnemyMonSpecies","wEnemyMoveStructPower","wEnemyRolloutCount","wEnemySubStatus3","wInBattleTowerBattle","wLinkMode","wOTPartyCount","wPartyCount","wPlayerMoveStructPower","wPlayerRolloutCount","wPlayerSubStatus3","wd002"],"varAddressesUsed":["BeatUpAttackText","wBattleMonStatus","wEnemyMonStatus","wOTPartyMonNicknames","wOTPartySpecies","wPartyMonNicknames","wStringBuffer1"],"constantsUsed":["MON_HP","MON_LEVEL","MON_SPECIES","MON_STATUS","NAME_LENGTH","buildopponentrage_command"],"lines":["BattleCommand_BeatUp:","; beatup","","\tcall ResetDamage","\tldh a, [hBattleTurn]","\tand a","\tjp nz, .enemy_beats_up","","\tld a, [wPlayerSubStatus3]","\tbit SUBSTATUS_IN_LOOP, a","\tjr nz, .next_mon","","\tld c, 20","\tcall DelayFrames","\txor a","\tld [wPlayerRolloutCount], a","\tld [wd002], a","\tld [wBeatUpHitAtLeastOnce], a","\tjr .got_mon","",".next_mon","\tld a, [wPlayerRolloutCount]","\tld b, a","\tld a, [wPartyCount]","\tsub b","\tld [wd002], a","",".got_mon","\tld a, [wd002]","\tld hl, wPartyMonNicknames","\tcall GetNick","\tld a, MON_HP","\tcall GetBeatupMonLocation","\tld a, [hli]","\tor [hl]","\tjp z, .beatup_fail ; fainted","\tld a, [wd002]","\tld c, a","\tld a, [wCurBattleMon]","\t; BUG: this can desynchronize link battles","\t; Change \"cp [hl]\" to \"cp c\" to fix","\tcp [hl]","\tld hl, wBattleMonStatus","\tjr z, .active_mon","\tld a, MON_STATUS","\tcall GetBeatupMonLocation",".active_mon","\tld a, [hl]","\tand a","\tjp nz, .beatup_fail","","\tld a, $1","\tld [wBeatUpHitAtLeastOnce], a","\tld hl, BeatUpAttackText","\tcall StdBattleTextbox","","\tld a, [wEnemyMonSpecies]","\tld [wCurSpecies], a","\tcall GetBaseData","\tld a, [wBaseDefense]","\tld c, a","","\tpush bc","\tld a, MON_SPECIES","\tcall GetBeatupMonLocation","\tld a, [hl]","\tld [wCurSpecies], a","\tcall GetBaseData","\tld a, [wBaseAttack]","\tpop bc","\tld b, a","","\tpush bc","\tld a, MON_LEVEL","\tcall GetBeatupMonLocation","\tld a, [hl]","\tld e, a","\tpop bc","","\tld a, [wPlayerMoveStructPower]","\tld d, a","\tret","",".enemy_beats_up","\tld a, [wEnemySubStatus3]","\tbit SUBSTATUS_IN_LOOP, a","\tjr nz, .enemy_next_mon","","\txor a","\tld [wEnemyRolloutCount], a","\tld [wd002], a","\tld [wBeatUpHitAtLeastOnce], a","\tjr .enemy_got_mon","",".enemy_next_mon","\tld a, [wEnemyRolloutCount]","\tld b, a","\tld a, [wOTPartyCount]","\tsub b","\tld [wd002], a","",".enemy_got_mon","\tld a, [wBattleMode]","\tdec a","\tjr z, .wild","","\tld a, [wLinkMode]","\tand a","\tjr nz, .link_or_tower","","\tld a, [wInBattleTowerBattle]","\tand a","\tjr nz, .link_or_tower","","\tld a, [wd002]","\tld c, a","\tld b, 0","\tld hl, wOTPartySpecies","\tadd hl, bc","\tld a, [hl]","\tld [wNamedObjectIndexBuffer], a","\tcall GetPokemonName","\tjr .got_enemy_nick","",".link_or_tower","\tld a, [wd002]","\tld hl, wOTPartyMonNicknames","\tld bc, NAME_LENGTH","\tcall AddNTimes","\tld de, wStringBuffer1","\tcall CopyBytes","",".got_enemy_nick","\tld a, MON_HP","\tcall GetBeatupMonLocation","\tld a, [hli]","\tor [hl]","\tjp z, .beatup_fail","","\tld a, [wd002]","\tld b, a","\tld a, [wCurOTMon]","\tcp b","\tld hl, wEnemyMonStatus","\tjr z, .active_enemy","\tld a, MON_STATUS","\tcall GetBeatupMonLocation",".active_enemy","\tld a, [hl]","\tand a","\tjr nz, .beatup_fail","","\tld a, $1","\tld [wBeatUpHitAtLeastOnce], a","\tjr .finish_beatup","",".wild","\tld a, [wEnemyMonSpecies]","\tld [wNamedObjectIndexBuffer], a","\tcall GetPokemonName","\tld hl, BeatUpAttackText","\tcall StdBattleTextbox","\tjp EnemyAttackDamage","",".finish_beatup","\tld hl, BeatUpAttackText","\tcall StdBattleTextbox","","\tld a, [wBattleMonSpecies]","\tld [wCurSpecies], a","\tcall GetBaseData","\tld a, [wBaseDefense]","\tld c, a","","\tpush bc","\tld a, MON_SPECIES","\tcall GetBeatupMonLocation","\tld a, [hl]","\tld [wCurSpecies], a","\tcall GetBaseData","\tld a, [wBaseAttack]","\tpop bc","\tld b, a","","\tpush bc","\tld a, MON_LEVEL","\tcall GetBeatupMonLocation","\tld a, [hl]","\tld e, a","\tpop bc","","\tld a, [wEnemyMoveStructPower]","\tld d, a","\tret","",".beatup_fail","\tld b, buildopponentrage_command","\tjp SkipToBattleCommand"],"name":"BattleCommand_BeatUp","file":"engine/battle/move_effects/beat_up.asm","lineNo":1,"address":119009,"addressUsedBy":[]}