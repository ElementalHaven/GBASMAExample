{"names":["Function28926"],"callingMethods":["LinkTradePartymonMenuLoop"],"methodsCalled":["DelayFrames","FarCall","Function28b68","GetPokemonName","InitTradeMenuDisplay","LinkEngine_FillBox","LinkTextboxAtHL","LinkTrade","LinkTrade_PlayerPartyMenu","LoadTilemapToTempTilemap","PlaceHLTextAtBC","PlaceHollowCursor","PlaceString","SafeLoadTempTilemapToTilemap","ScrollingMenuJoypad"],"methodAddressesUsed":["Function16d6ce","Functionfb5dd","InitList","LinkMonStatsScreen","Link_WaitBGMap","ValidateOTTrademon"],"varsSet":["SCREEN_WIDTH","w2DMenuCursorInitX","w2DMenuCursorInitY","w2DMenuCursorOffsets","w2DMenuFlags1","w2DMenuFlags2","w2DMenuNumCols","w2DMenuNumRows","wInitListType","wMenuCursorX","wMenuCursorY","wMenuJoypadFilter","wNamedObjectIndexBuffer","wOtherPlayerLinkAction","wPlayerLinkAction","wcf57","wd002","wd003"],"varsUsed":["wMenuCursorY","wOtherPlayerLinkMode","wd003"],"varAddressesUsed":["String_TooBadTheTradeWasCanceled","wOTPartySpecies"],"constantsUsed":["A_BUTTON","B_BUTTON","D_LEFT","D_RIGHT","INIT_PLAYEROT_LIST","wTilemap"],"lines":["Function28926:","\tcall LoadTilemapToTempTilemap","\tld a, [wMenuCursorY]","\tpush af","\thlcoord 0, 15","\tld b, 1","\tld c, 18","\tcall LinkTextboxAtHL","\thlcoord 2, 16","\tld de, .String_Stats_Trade","\tcall PlaceString","\tfarcall Link_WaitBGMap","",".joy_loop","\tld a, \" \"","\tldcoord_a 11, 16","\tld a, A_BUTTON | B_BUTTON | D_RIGHT","\tld [wMenuJoypadFilter], a","\tld a, 1","\tld [w2DMenuNumRows], a","\tld a, 1","\tld [w2DMenuNumCols], a","\tld a, 16","\tld [w2DMenuCursorInitY], a","\tld a, 1","\tld [w2DMenuCursorInitX], a","\tld a, 1","\tld [wMenuCursorY], a","\tld [wMenuCursorX], a","\tln a, 2, 0","\tld [w2DMenuCursorOffsets], a","\txor a","\tld [w2DMenuFlags1], a","\tld [w2DMenuFlags2], a","\tcall ScrollingMenuJoypad","\tbit D_RIGHT_F, a","\tjr nz, .d_right","\tbit B_BUTTON_F, a","\tjr z, .show_stats",".b_button","\tpop af","\tld [wMenuCursorY], a","\tcall SafeLoadTempTilemapToTilemap","\tjp LinkTrade_PlayerPartyMenu","",".d_right","\tld a, \" \"","\tldcoord_a 1, 16","\tld a, A_BUTTON | B_BUTTON | D_LEFT","\tld [wMenuJoypadFilter], a","\tld a, 1","\tld [w2DMenuNumRows], a","\tld a, 1","\tld [w2DMenuNumCols], a","\tld a, 16","\tld [w2DMenuCursorInitY], a","\tld a, 11","\tld [w2DMenuCursorInitX], a","\tld a, 1","\tld [wMenuCursorY], a","\tld [wMenuCursorX], a","\tln a, 2, 0","\tld [w2DMenuCursorOffsets], a","\txor a","\tld [w2DMenuFlags1], a","\tld [w2DMenuFlags2], a","\tcall ScrollingMenuJoypad","\tbit D_LEFT_F, a","\tjp nz, .joy_loop","\tbit B_BUTTON_F, a","\tjr nz, .b_button","\tjr .try_trade","",".show_stats","\tpop af","\tld [wMenuCursorY], a","\tld a, INIT_PLAYEROT_LIST","\tld [wInitListType], a","\tcallfar InitList","\tfarcall LinkMonStatsScreen","\tcall SafeLoadTempTilemapToTilemap","\thlcoord 6, 1","\tlb bc, 6, 1","\tld a, \" \"","\tcall LinkEngine_FillBox","\thlcoord 17, 1","\tlb bc, 6, 1","\tld a, \" \"","\tcall LinkEngine_FillBox","\tjp LinkTrade_PlayerPartyMenu","",".try_trade","\tcall PlaceHollowCursor","\tpop af","\tld [wMenuCursorY], a","\tdec a","\tld [wd002], a","\tld [wPlayerLinkAction], a","\tfarcall Function16d6ce","\tld a, [wOtherPlayerLinkMode]","\tcp $f","\tjp z, InitTradeMenuDisplay","\tld [wd003], a","\tcall Function28b68","\tld c, 100","\tcall DelayFrames","\tfarcall ValidateOTTrademon","\tjr c, .abnormal","\tfarcall Functionfb5dd","\tjp nc, LinkTrade","\txor a","\tld [wcf57], a","\tld [wOtherPlayerLinkAction], a","\thlcoord 0, 12","\tld b, 4","\tld c, 18","\tcall LinkTextboxAtHL","\tfarcall Link_WaitBGMap","\tld hl, .LinkTradeCantBattleText","\tbccoord 1, 14","\tcall PlaceHLTextAtBC","\tjr .cancel_trade","",".abnormal","\txor a","\tld [wcf57], a","\tld [wOtherPlayerLinkAction], a","\tld a, [wd003]","\tld hl, wOTPartySpecies","\tld c, a","\tld b, 0","\tadd hl, bc","\tld a, [hl]","\tld [wNamedObjectIndexBuffer], a","\tcall GetPokemonName","\thlcoord 0, 12","\tld b, 4","\tld c, 18","\tcall LinkTextboxAtHL","\tfarcall Link_WaitBGMap","\tld hl, .LinkAbnormalMonText","\tbccoord 1, 14","\tcall PlaceHLTextAtBC","",".cancel_trade","\thlcoord 0, 12","\tld b, 4","\tld c, 18","\tcall LinkTextboxAtHL","\thlcoord 1, 14","\tld de, String_TooBadTheTradeWasCanceled","\tcall PlaceString","\tld a, $1","\tld [wPlayerLinkAction], a","\tfarcall Function16d6ce","\tld c, 100","\tcall DelayFrames","\tjp InitTradeMenuDisplay","",".LinkTradeCantBattleText:","\ttext_far _LinkTradeCantBattleText","\ttext_end","",".String_Stats_Trade:","\tdb \"STATS     TRADE@\"","",".LinkAbnormalMonText:","\ttext_far _LinkAbnormalMonText","\ttext_end"],"name":"Function28926","file":"engine/link/link.asm","lineNo":1330,"address":103537,"addressUsedBy":[]}