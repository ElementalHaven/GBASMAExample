{"names":["MonMailAction"],"callingMethods":[],"methodsCalled":["ExitMenu","FarCall","GetCurNick","GetPartyItemLocation","LoadMenuHeader","MenuTextboxBackup","ReceiveItemFromPokemon","StartMenuYesNo","VerticalMenu"],"methodAddressesUsed":["ReadPartyMonMail","SendMailToPC"],"varsSet":["wCurItem"],"varsUsed":["wCurPartyMon","wLinkMode","wMenuCursorY"],"varAddressesUsed":[],"constantsUsed":[],"lines":["MonMailAction:","; If in the time capsule or trade center,","; selecting the mail only allows you to","; read the mail.","\tld a, [wLinkMode]","\tcp LINK_TIMECAPSULE","\tjr z, .read","\tcp LINK_TRADECENTER","\tjr z, .read","","; Show the READ/TAKE/QUIT menu.","\tld hl, .MenuHeader","\tcall LoadMenuHeader","\tcall VerticalMenu","\tcall ExitMenu","","; Interpret the menu.","\tjp c, .done","\tld a, [wMenuCursorY]","\tcp $1","\tjr z, .read","\tcp $2","\tjr z, .take","\tjp .done","",".read","\tfarcall ReadPartyMonMail","\tld a, $0","\tret","",".take","\tld hl, .MailAskSendToPCText","\tcall StartMenuYesNo","\tjr c, .RemoveMailToBag","\tld a, [wCurPartyMon]","\tld b, a","\tfarcall SendMailToPC","\tjr c, .MailboxFull","\tld hl, .MailSentToPCText","\tcall MenuTextboxBackup","\tjr .done","",".MailboxFull:","\tld hl, .MailboxFullText","\tcall MenuTextboxBackup","\tjr .done","",".RemoveMailToBag:","\tld hl, .MailLoseMessageText","\tcall StartMenuYesNo","\tjr c, .done","\tcall GetPartyItemLocation","\tld a, [hl]","\tld [wCurItem], a","\tcall ReceiveItemFromPokemon","\tjr nc, .BagIsFull","\tcall GetPartyItemLocation","\tld [hl], $0","\tcall GetCurNick","\tld hl, .MailDetachedText","\tcall MenuTextboxBackup","\tjr .done","",".BagIsFull:","\tld hl, .MailNoSpaceText","\tcall MenuTextboxBackup","\tjr .done","",".done","\tld a, $3","\tret","",".MenuHeader:","\tdb MENU_BACKUP_TILES ; flags","\tmenu_coords 12, 10, SCREEN_WIDTH - 1, SCREEN_HEIGHT - 1","\tdw .MenuData","\tdb 1 ; default option","",".MenuData:","\tdb STATICMENU_CURSOR ; flags","\tdb 3 ; items","\tdb \"READ@\"","\tdb \"TAKE@\"","\tdb \"QUIT@\"","",".MailLoseMessageText:","\ttext_far _MailLoseMessageText","\ttext_end","",".MailDetachedText:","\ttext_far _MailDetachedText","\ttext_end","",".MailNoSpaceText:","\ttext_far _MailNoSpaceText","\ttext_end","",".MailAskSendToPCText:","\ttext_far _MailAskSendToPCText","\ttext_end","",".MailboxFullText:","\ttext_far _MailboxFullText","\ttext_end","",".MailSentToPCText:","\ttext_far _MailSentToPCText","\ttext_end"],"name":"MonMailAction","file":"engine/pokemon/mon_menu.asm","lineNo":474,"address":87029,"addressUsedBy":[]}