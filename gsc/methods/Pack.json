{"names":["Pack"],"callingMethods":[],"methodsCalled":["ClearPocketList","CopyMenuHeader","DelayFrame","DrawPocketName","ExitMenu","FarCall","InitPackBuffers","JoyTextDelay","LoadMenuHeader","Pack_GetJumptablePointer","Pack_InitColors","Pack_InitGFX","Pack_InterpretJoypad","Pack_JumptableNext","ScrollingMenu","VerticalMenu","WaitBGMap_DrawPackGFX"],"methodAddressesUsed":["AskTeachTMHM","CheckItemMenu","CheckSelectableItem","ChooseMonToLearnTMHM","TMHMPocket","TeachTMHM","_CheckTossableItem"],"varsSet":["hBGMapMode","wBallsPocketCursor","wBallsPocketScrollPosition","wCurPocket","wItemsPocketCursor","wItemsPocketScrollPosition","wJumptableIndex","wKeyItemsPocketCursor","wKeyItemsPocketScrollPosition","wLastPocket","wMenuCursorBuffer","wMenuScrollPosition","wOptions"],"varsUsed":["wBallsPocketCursor","wBallsPocketScrollPosition","wCurPocket","wItemAttributeParamBuffer","wItemsPocketCursor","wItemsPocketScrollPosition","wJumptableIndex","wKeyItemsPocketCursor","wKeyItemsPocketScrollPosition","wMenuCursorY","wMenuScrollPosition","wPackJumptableIndex"],"varAddressesUsed":["BallsPocketMenuHeader","ItemsPocketMenuHeader","Jumptable_GiveTossQuit","Jumptable_GiveTossRegisterQuit","Jumptable_UseGiveTossQuit","Jumptable_UseGiveTossRegisterQuit","Jumptable_UseQuit","Jumptable_UseRegisterQuit","KeyItemsPocketMenuHeader","MenuHeader_HoldableItem","MenuHeader_HoldableKeyItem","MenuHeader_UnusableItem","MenuHeader_UnusableKeyItem","MenuHeader_UsableItem","MenuHeader_UsableKeyItem","wOptions"],"constantsUsed":["BALL_POCKET","KEY_ITEM_POCKET","PACKSTATE_INITBALLSPOCKET","PACKSTATE_INITITEMSPOCKET","PACKSTATE_INITKEYITEMSPOCKET","PACKSTATE_INITTMHMPOCKET","TM_HM_POCKET"],"lines":["Pack:","\tld hl, wOptions","\tset NO_TEXT_SCROLL, [hl]","\tcall InitPackBuffers",".loop","\tcall JoyTextDelay","\tld a, [wJumptableIndex]","\tbit 7, a","\tjr nz, .done","\tcall .RunJumptable","\tcall DelayFrame","\tjr .loop","",".done","\tld a, [wCurPocket]","\tld [wLastPocket], a","\tld hl, wOptions","\tres NO_TEXT_SCROLL, [hl]","\tret","",".RunJumptable:","\tld a, [wJumptableIndex]","\tld hl, .Jumptable","\tcall Pack_GetJumptablePointer","\tjp hl","",".Jumptable:","; entries correspond to PACKSTATE_* constants","\tdw .InitGFX            ;  0","\tdw .InitItemsPocket    ;  1","\tdw .ItemsPocketMenu    ;  2","\tdw .InitBallsPocket    ;  3","\tdw .BallsPocketMenu    ;  4","\tdw .InitKeyItemsPocket ;  5","\tdw .KeyItemsPocketMenu ;  6","\tdw .InitTMHMPocket     ;  7","\tdw .TMHMPocketMenu     ;  8","\tdw Pack_QuitNoScript   ;  9","\tdw Pack_QuitRunScript  ; 10","",".InitGFX:","\txor a","\tldh [hBGMapMode], a","\tcall Pack_InitGFX","\tld a, [wPackJumptableIndex]","\tld [wJumptableIndex], a","\tcall Pack_InitColors","\tret","",".InitItemsPocket:","\txor a ; ITEM_POCKET","\tld [wCurPocket], a","\tcall ClearPocketList","\tcall DrawPocketName","\tcall WaitBGMap_DrawPackGFX","\tcall Pack_JumptableNext","\tret","",".ItemsPocketMenu:","\tld hl, ItemsPocketMenuHeader","\tcall CopyMenuHeader","\tld a, [wItemsPocketCursor]","\tld [wMenuCursorBuffer], a","\tld a, [wItemsPocketScrollPosition]","\tld [wMenuScrollPosition], a","\tcall ScrollingMenu","\tld a, [wMenuScrollPosition]","\tld [wItemsPocketScrollPosition], a","\tld a, [wMenuCursorY]","\tld [wItemsPocketCursor], a","\tld b, PACKSTATE_INITTMHMPOCKET ; left","\tld c, PACKSTATE_INITBALLSPOCKET ; right","\tcall Pack_InterpretJoypad","\tret c","\tcall .ItemBallsKey_LoadSubmenu","\tret","",".InitKeyItemsPocket:","\tld a, KEY_ITEM_POCKET","\tld [wCurPocket], a","\tcall ClearPocketList","\tcall DrawPocketName","\tcall WaitBGMap_DrawPackGFX","\tcall Pack_JumptableNext","\tret","",".KeyItemsPocketMenu:","\tld hl, KeyItemsPocketMenuHeader","\tcall CopyMenuHeader","\tld a, [wKeyItemsPocketCursor]","\tld [wMenuCursorBuffer], a","\tld a, [wKeyItemsPocketScrollPosition]","\tld [wMenuScrollPosition], a","\tcall ScrollingMenu","\tld a, [wMenuScrollPosition]","\tld [wKeyItemsPocketScrollPosition], a","\tld a, [wMenuCursorY]","\tld [wKeyItemsPocketCursor], a","\tld b, PACKSTATE_INITBALLSPOCKET ; left","\tld c, PACKSTATE_INITTMHMPOCKET ; right","\tcall Pack_InterpretJoypad","\tret c","\tcall .ItemBallsKey_LoadSubmenu","\tret","",".InitTMHMPocket:","\tld a, TM_HM_POCKET","\tld [wCurPocket], a","\tcall ClearPocketList","\tcall DrawPocketName","\txor a","\tldh [hBGMapMode], a","\tcall WaitBGMap_DrawPackGFX","\tcall Pack_JumptableNext","\tret","",".TMHMPocketMenu:","\tfarcall TMHMPocket","\tld b, PACKSTATE_INITKEYITEMSPOCKET ; left","\tld c, PACKSTATE_INITITEMSPOCKET ; right","\tcall Pack_InterpretJoypad","\tret c","\tfarcall _CheckTossableItem","\tld a, [wItemAttributeParamBuffer]","\tand a","\tjr nz, .use_quit","\tld hl, .MenuHeader2","\tld de, .Jumptable2","\tjr .load_jump","",".use_quit","\tld hl, .MenuHeader1","\tld de, .Jumptable1",".load_jump","\tpush de","\tcall LoadMenuHeader","\tcall VerticalMenu","\tcall ExitMenu","\tpop hl","\tret c","\tld a, [wMenuCursorY]","\tdec a","\tcall Pack_GetJumptablePointer","\tjp hl","",".MenuHeader1:","\tdb MENU_BACKUP_TILES ; flags","\tmenu_coords 13, 7, SCREEN_WIDTH - 1, TEXTBOX_Y - 1","\tdw .MenuData_1","\tdb 1 ; default option","",".MenuData_1:","\tdb STATICMENU_CURSOR | STATICMENU_NO_TOP_SPACING ; flags","\tdb 2 ; items","\tdb \"USE@\"","\tdb \"QUIT@\"","",".Jumptable1:","\tdw .UseItem","\tdw QuitItemSubmenu","",".MenuHeader2:","\tdb MENU_BACKUP_TILES ; flags","\tmenu_coords 13, 5, SCREEN_WIDTH - 1, TEXTBOX_Y - 1","\tdw .MenuData_2","\tdb 1 ; default option","",".MenuData_2:","\tdb STATICMENU_CURSOR | STATICMENU_NO_TOP_SPACING ; flags","\tdb 3 ; items","\tdb \"USE@\"","\tdb \"GIVE@\"","\tdb \"QUIT@\"","",".Jumptable2:","\tdw .UseItem","\tdw GiveItem","\tdw QuitItemSubmenu","",".UseItem:","\tfarcall AskTeachTMHM","\tret c","\tfarcall ChooseMonToLearnTMHM","\tjr c, .declined","\tld hl, wOptions","\tld a, [hl]","\tpush af","\tres NO_TEXT_SCROLL, [hl]","\tfarcall TeachTMHM","\tpop af","\tld [wOptions], a",".declined","\txor a","\tldh [hBGMapMode], a","\tcall Pack_InitGFX","\tcall WaitBGMap_DrawPackGFX","\tcall Pack_InitColors","\tret","",".InitBallsPocket:","\tld a, BALL_POCKET","\tld [wCurPocket], a","\tcall ClearPocketList","\tcall DrawPocketName","\tcall WaitBGMap_DrawPackGFX","\tcall Pack_JumptableNext","\tret","",".BallsPocketMenu:","\tld hl, BallsPocketMenuHeader","\tcall CopyMenuHeader","\tld a, [wBallsPocketCursor]","\tld [wMenuCursorBuffer], a","\tld a, [wBallsPocketScrollPosition]","\tld [wMenuScrollPosition], a","\tcall ScrollingMenu","\tld a, [wMenuScrollPosition]","\tld [wBallsPocketScrollPosition], a","\tld a, [wMenuCursorY]","\tld [wBallsPocketCursor], a","\tld b, PACKSTATE_INITITEMSPOCKET ; left","\tld c, PACKSTATE_INITKEYITEMSPOCKET ; right","\tcall Pack_InterpretJoypad","\tret c","\tcall .ItemBallsKey_LoadSubmenu","\tret","",".ItemBallsKey_LoadSubmenu:","\tfarcall _CheckTossableItem","\tld a, [wItemAttributeParamBuffer]","\tand a","\tjr nz, .tossable","\tfarcall CheckSelectableItem","\tld a, [wItemAttributeParamBuffer]","\tand a","\tjr nz, .selectable","\tfarcall CheckItemMenu","\tld a, [wItemAttributeParamBuffer]","\tand a","\tjr nz, .usable","\tjr .unusable","",".selectable","\tfarcall CheckItemMenu","\tld a, [wItemAttributeParamBuffer]","\tand a","\tjr nz, .selectable_usable","\tjr .selectable_unusable","",".tossable","\tfarcall CheckSelectableItem","\tld a, [wItemAttributeParamBuffer]","\tand a","\tjr nz, .tossable_selectable","\tjr .tossable_unselectable","",".usable","\tld hl, MenuHeader_UsableKeyItem","\tld de, Jumptable_UseGiveTossRegisterQuit","\tjr .build_menu","",".selectable_usable","\tld hl, MenuHeader_UsableItem","\tld de, Jumptable_UseGiveTossQuit","\tjr .build_menu","",".tossable_selectable","\tld hl, MenuHeader_UnusableItem","\tld de, Jumptable_UseQuit","\tjr .build_menu","",".tossable_unselectable","\tld hl, MenuHeader_UnusableKeyItem","\tld de, Jumptable_UseRegisterQuit","\tjr .build_menu","",".unusable","\tld hl, MenuHeader_HoldableKeyItem","\tld de, Jumptable_GiveTossRegisterQuit","\tjr .build_menu","",".selectable_unusable","\tld hl, MenuHeader_HoldableItem","\tld de, Jumptable_GiveTossQuit",".build_menu","\tpush de","\tcall LoadMenuHeader","\tcall VerticalMenu","\tcall ExitMenu","\tpop hl","\tret c","\tld a, [wMenuCursorY]","\tdec a","\tcall Pack_GetJumptablePointer","\tjp hl"],"name":"Pack","file":"engine/items/pack.asm","lineNo":15,"address":81650,"addressUsedBy":["StartMenu_Pack"]}