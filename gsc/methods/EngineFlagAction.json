{"names":["EngineFlagAction"],"callingMethods":[],"methodsCalled":[],"methodAddressesUsed":[],"varsSet":[],"varsUsed":[],"varAddressesUsed":["EngineFlags"],"constantsUsed":[],"lines":["EngineFlagAction::","; Do action b on engine flag de",";",";   b \u003d 0: reset flag",";     \u003d 1: set flag",";     \u003e 1: check flag, result in c",";","; Setting/resetting does not return a result.","","; 16-bit flag ids are considered invalid, but it\u0027s nice","; to know that the infrastructure is there.","","\tld a, d","\tcp HIGH(NUM_ENGINE_FLAGS)","\tjr z, .ceiling","\tjr c, .read ; cp 0 can\u0027t set carry!","\tjr .invalid","","; There are only NUM_ENGINE_FLAGS engine flags, so","; anything beyond that is invalid too.","",".ceiling","\tld a, e","\tcp LOW(NUM_ENGINE_FLAGS)","\tjr c, .read","","; Invalid flags are treated as flag 00.","",".invalid","\txor a","\tld e, a","\tld d, a","","; Get this flag\u0027s location.","",".read","\tld hl, EngineFlags","; location","\tadd hl, de","\tadd hl, de","; bit","\tadd hl, de","","; location","\tld e, [hl]","\tinc hl","\tld d, [hl]","\tinc hl","; bit","\tld c, [hl]","","; What are we doing with this flag?","","\tld a, b","\tcp 1","\tjr c, .reset ; b \u003d 0","\tjr z, .set   ; b \u003d 1","","; Return the given flag in c.",".check","\tld a, [de]","\tand c","\tld c, a","\tret","","; Set the given flag.",".set","\tld a, [de]","\tor c","\tld [de], a","\tret","","; Reset the given flag.",".reset","\tld a, c","\tcpl ; AND all bits except the one in question","\tld c, a","\tld a, [de]","\tand c","\tld [de], a","\tret"],"name":"EngineFlagAction","file":"engine/events/engine_flags.asm","lineNo":1,"address":170918,"addressUsedBy":["CheckEngineFlag"]}