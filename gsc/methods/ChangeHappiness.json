{"names":["ChangeHappiness"],"callingMethods":["HaircutOrGrooming"],"methodsCalled":["AddNTimes"],"methodAddressesUsed":[],"varsSet":["wBattleMonHappiness"],"varsUsed":["wBattleMode","wCurPartyMon","wPartyMenuCursor"],"varAddressesUsed":["HappinessChanges","wPartyMon1Happiness","wPartySpecies"],"constantsUsed":["PARTYMON_STRUCT_LENGTH"],"lines":["ChangeHappiness:","; Perform happiness action c on wCurPartyMon","","\tld a, [wCurPartyMon]","\tinc a","\tld e, a","\tld d, 0","\tld hl, wPartySpecies - 1","\tadd hl, de","\tld a, [hl]","\tcp EGG","\tret z","","\tpush bc","\tld hl, wPartyMon1Happiness","\tld bc, PARTYMON_STRUCT_LENGTH","\tld a, [wCurPartyMon]","\tcall AddNTimes","\tpop bc","","\tld d, h","\tld e, l","","\tpush de","\tld a, [de]","\tcp HAPPINESS_THRESHOLD_1","\tld e, 0","\tjr c, .ok","\tinc e","\tcp HAPPINESS_THRESHOLD_2","\tjr c, .ok","\tinc e","",".ok","\tdec c","\tld b, 0","\tld hl, HappinessChanges","\tadd hl, bc","\tadd hl, bc","\tadd hl, bc","\tld d, 0","\tadd hl, de","\tld a, [hl]","\tcp $64 ; why not $80?","\tpop de","","\tld a, [de]","\tjr nc, .negative","\tadd [hl]","\tjr nc, .done","\tld a, -1","\tjr .done","",".negative","\tadd [hl]","\tjr c, .done","\txor a","",".done","\tld [de], a","\tld a, [wBattleMode]","\tand a","\tret z","\tld a, [wCurPartyMon]","\tld b, a","\tld a, [wPartyMenuCursor]","\tcp b","\tret nz","\tld a, [de]","\tld [wBattleMonHappiness], a","\tret"],"name":"ChangeHappiness","file":"engine/events/happiness_egg.asm","lineNo":33,"address":66112,"addressUsedBy":["EnergypowderEnergyRootCommon","TeachTMHM","VitaminEffect","DoPoisonStep","RevivalHerbEffect","CheckCanLearnMoveTutorMove","InitEnemyTrainer","XItemEffect","UpdateFaintedPlayerMon","HealPowderEffect","LevelUpHappinessMod"]}