{"names":["HandlePerishSong"],"callingMethods":["HandleBetweenTurnEffects"],"methodsCalled":["GetBattleVar","GetBattleVarAddr","GetPartyLocation","SetEnemyTurn","SetPlayerTurn","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":["wDeciramBuffer"],"varsUsed":["hBattleTurn","hSerialConnectionStatus","wBattleMode","wCurBattleMon","wCurOTMon"],"varAddressesUsed":["PerishCountText","wBattleMonHP","wEnemyMonHP","wEnemyPerishCount","wOTPartyMon1HP","wPartyMon1HP","wPlayerPerishCount"],"constantsUsed":["BATTLE_VARS_SUBSTATUS1"],"lines":["HandlePerishSong:","\tldh a, [hSerialConnectionStatus]","\tcp USING_EXTERNAL_CLOCK","\tjr z, .EnemyFirst","\tcall SetPlayerTurn","\tcall .do_it","\tcall SetEnemyTurn","\tjp .do_it","",".EnemyFirst:","\tcall SetEnemyTurn","\tcall .do_it","\tcall SetPlayerTurn","",".do_it","\tld hl, wPlayerPerishCount","\tldh a, [hBattleTurn]","\tand a","\tjr z, .got_count","\tld hl, wEnemyPerishCount","",".got_count","\tld a, BATTLE_VARS_SUBSTATUS1","\tcall GetBattleVar","\tbit SUBSTATUS_PERISH, a","\tret z","\tdec [hl]","\tld a, [hl]","\tld [wDeciramBuffer], a","\tpush af","\tld hl, PerishCountText","\tcall StdBattleTextbox","\tpop af","\tret nz","\tld a, BATTLE_VARS_SUBSTATUS1","\tcall GetBattleVarAddr","\tres SUBSTATUS_PERISH, [hl]","\tldh a, [hBattleTurn]","\tand a","\tjr nz, .kill_enemy","\tld hl, wBattleMonHP","\txor a","\tld [hli], a","\tld [hl], a","\tld hl, wPartyMon1HP","\tld a, [wCurBattleMon]","\tcall GetPartyLocation","\txor a","\tld [hli], a","\tld [hl], a","\tret","",".kill_enemy","\tld hl, wEnemyMonHP","\txor a","\tld [hli], a","\tld [hl], a","\tld a, [wBattleMode]","\tdec a","\tret z","\tld hl, wOTPartyMon1HP","\tld a, [wCurOTMon]","\tcall GetPartyLocation","\txor a","\tld [hli], a","\tld [hl], a","\tret"],"name":"HandlePerishSong","file":"engine/battle/core.asm","lineNo":1136,"address":135007,"addressUsedBy":[]}