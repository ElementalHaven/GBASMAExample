{"names":["_InitSpriteAnimStruct"],"callingMethods":["InitPartyMenuIcon","MoveList_InitAnimatedMonIcon","NamingScreen_InitAnimatedMonIcon"],"methodsCalled":["GetSpriteAnimVTile"],"methodAddressesUsed":[],"varsSet":["wSpriteAnimAddrBackup"],"varsUsed":["wSpriteAnimCount"],"varAddressesUsed":["SpriteAnimSeqData","wSpriteAnimCount"],"constantsUsed":["NUM_SPRITE_ANIM_STRUCTS","SPRITEANIMSTRUCT_INDEX","SPRITEANIMSTRUCT_LENGTH","SPRITEANIMSTRUCT_XCOORD"],"lines":["_InitSpriteAnimStruct::","; Initialize animation a at pixel x\u003de, y\u003dd","; Find if there\u0027s any room in the wSpriteAnimationStructs array, which is 10x16","\tpush de","\tpush af","\tld hl, wSpriteAnimationStructs","\tld e, NUM_SPRITE_ANIM_STRUCTS",".loop","\tld a, [hl]","\tand a","\tjr z, .found","\tld bc, SPRITEANIMSTRUCT_LENGTH","\tadd hl, bc","\tdec e","\tjr nz, .loop","; We\u0027ve reached the end.  There is no more room here.","; Return carry.","\tpop af","\tpop de","\tscf","\tret","",".found","; Back up the structure address to bc.","\tld c, l","\tld b, h","; Value [wSpriteAnimCount] is initially set to -1. Set it to","; the number of objects loaded into this array.","\tld hl, wSpriteAnimCount","\tinc [hl]","\tld a, [hl]","\tand a","\tjr nz, .initialized","\tinc [hl]","",".initialized","; Get row a of SpriteAnimSeqData, copy the pointer into de","\tpop af","\tld e, a","\tld d, 0","\tld hl, SpriteAnimSeqData","\tadd hl, de","\tadd hl, de","\tadd hl, de","\tld e, l","\tld d, h","; Set hl to the first field (field 0) in the current structure.","\tld hl, SPRITEANIMSTRUCT_INDEX","\tadd hl, bc","; Load the index.","\tld a, [wSpriteAnimCount]","\tld [hli], a","; Copy the table entry to the next two fields.","\tld a, [de]","\tld [hli], a","\tinc de","\tld a, [de]","\tld [hli], a","\tinc de","; Look up the third field from the table in the wSpriteAnimDict array (10x2).","; Take the value and load it in","\tld a, [de]","\tcall GetSpriteAnimVTile","\tld [hli], a","\tpop de","; Set hl to field 4 (X coordinate).  Kinda pointless, because we\u0027re presumably already here.","\tld hl, SPRITEANIMSTRUCT_XCOORD","\tadd hl, bc","; Load the original value of de into here.","\tld a, e","\tld [hli], a","\tld a, d","\tld [hli], a","; load 0 into the next four fields","\txor a","\tld [hli], a","\tld [hli], a","\txor a","\tld [hli], a","\tld [hli], a","; load -1 into the next field","\tdec a","\tld [hli], a","; load 0 into the last five fields","\txor a","rept 4","\tld [hli], a","endr","\tld [hl], a","; back up the address of the first field to wSpriteAnimAddrBackup","\tld a, c","\tld [wSpriteAnimAddrBackup], a","\tld a, b","\tld [wSpriteAnimAddrBackup + 1], a","\tret"],"name":"_InitSpriteAnimStruct","file":"engine/gfx/sprites.asm","lineNo":112,"address":183174,"addressUsedBy":[]}