{"names":["NamingScreenJoypadLoop"],"callingMethods":["NamingScreen"],"methodsCalled":["ClearBox","ClearSprites","DelayFrame","FarCall","InitSpriteAnimStruct","JoyTextDelay","NamingScreen_ApplyTextInputMode","NamingScreen_DeleteCharacter","NamingScreen_GetLastCharacter","NamingScreen_IsTargetBox","NamingScreen_StoreEntry","NamingScreen_TryAddCharacter","PlaceString"],"methodAddressesUsed":["ClearSpriteAnims","PlaySpriteAnimationsAndDelayFrame"],"fallsInto":"NamingScreen_GetCursorPosition","varsSet":["hBGMapMode","hSCX","hSCY","wNamingScreenCursorObjectPointer"],"varsUsed":["wJumptableIndex"],"varAddressesUsed":["NameInputLower","NameInputUpper","hJoyPressed","wNamingScreenCursorObjectPointer","wNamingScreenDestinationPointer","wNamingScreenStringEntryCoord"],"constantsUsed":["SPRITEANIMSTRUCT_0C","SPRITEANIMSTRUCT_0D","SPRITEANIMSTRUCT_0E","SPRITEANIMSTRUCT_FRAMESET_ID","SPRITE_ANIM_INDEX_NAMING_SCREEN_CURSOR"],"lines":["NamingScreenJoypadLoop:","\tcall JoyTextDelay","\tld a, [wJumptableIndex]","\tbit 7, a","\tjr nz, .quit","\tcall .RunJumptable","\tfarcall PlaySpriteAnimationsAndDelayFrame","\tcall .UpdateStringEntry","\tcall DelayFrame","\tand a","\tret","",".quit","\tcallfar ClearSpriteAnims","\tcall ClearSprites","\txor a","\tldh [hSCX], a","\tldh [hSCY], a","\tscf","\tret","",".UpdateStringEntry:","\txor a","\tldh [hBGMapMode], a","\thlcoord 1, 5","\tcall NamingScreen_IsTargetBox","\tjr nz, .got_coords","\thlcoord 1, 3","",".got_coords","\tlb bc, 1, 18","\tcall ClearBox","\tld hl, wNamingScreenDestinationPointer","\tld e, [hl]","\tinc hl","\tld d, [hl]","\tld hl, wNamingScreenStringEntryCoord","\tld a, [hli]","\tld h, [hl]","\tld l, a","\tcall PlaceString","\tld a, $1","\tldh [hBGMapMode], a","\tret","",".RunJumptable:","\tld a, [wJumptableIndex]","\tld e, a","\tld d, $0","\tld hl, .Jumptable","\tadd hl, de","\tadd hl, de","\tld a, [hli]","\tld h, [hl]","\tld l, a","\tjp hl","",".Jumptable:","\tdw .InitCursor","\tdw .ReadButtons","",".InitCursor:","\tdepixel 10, 3","\tcall NamingScreen_IsTargetBox","\tjr nz, .got_cursor_position","\tld d, 8 * 8",".got_cursor_position","\tld a, SPRITE_ANIM_INDEX_NAMING_SCREEN_CURSOR","\tcall InitSpriteAnimStruct","\tld a, c","\tld [wNamingScreenCursorObjectPointer], a","\tld a, b","\tld [wNamingScreenCursorObjectPointer + 1], a","\tld hl, SPRITEANIMSTRUCT_FRAMESET_ID","\tadd hl, bc","\tld a, [hl]","\tld hl, SPRITEANIMSTRUCT_0E","\tadd hl, bc","\tld [hl], a","\tld hl, wJumptableIndex","\tinc [hl]","\tret","",".ReadButtons:","\tld hl, hJoyPressed","\tld a, [hl]","\tand A_BUTTON","\tjr nz, .a","\tld a, [hl]","\tand B_BUTTON","\tjr nz, .b","\tld a, [hl]","\tand START","\tjr nz, .start","\tld a, [hl]","\tand SELECT","\tjr nz, .select","\tret","",".a","\tcall .GetCursorPosition","\tcp $1","\tjr z, .select","\tcp $2","\tjr z, .b","\tcp $3","\tjr z, .end","\tcall NamingScreen_GetLastCharacter","\tcall NamingScreen_TryAddCharacter","\tret nc","",".start","\tld hl, wNamingScreenCursorObjectPointer","\tld c, [hl]","\tinc hl","\tld b, [hl]","\tld hl, SPRITEANIMSTRUCT_0C","\tadd hl, bc","\tld [hl], $8","\tld hl, SPRITEANIMSTRUCT_0D","\tadd hl, bc","\tld [hl], $4","\tcall NamingScreen_IsTargetBox","\tret nz","\tinc [hl]","\tret","",".b","\tcall NamingScreen_DeleteCharacter","\tret","",".end","\tcall NamingScreen_StoreEntry","\tld hl, wJumptableIndex","\tset 7, [hl]","\tret","",".select","\tld hl, wNamingScreenLetterCase","\tld a, [hl]","\txor 1","\tld [hl], a","\tjr z, .upper","\tld de, NameInputLower","\tcall NamingScreen_ApplyTextInputMode","\tret","",".upper","\tld de, NameInputUpper","\tcall NamingScreen_ApplyTextInputMode","\tret","",".GetCursorPosition:","\tld hl, wNamingScreenCursorObjectPointer","\tld c, [hl]","\tinc hl","\tld b, [hl]","","NamingScreen_GetCursorPosition:"],"name":"NamingScreenJoypadLoop","file":"engine/menus/naming_screen.asm","lineNo":320,"address":83978,"addressUsedBy":[]}