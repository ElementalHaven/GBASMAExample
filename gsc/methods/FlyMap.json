{"names":["FlyMap"],"callingMethods":["_FlyMap"],"methodsCalled":["FillJohtoMap","FillKantoMap","GetWorldMapLocation","HasVisitedSpawn","TownMapBGUpdate","TownMapBubble","TownMapMon","TownMapPals","TownMapPlayerIcon"],"methodAddressesUsed":[],"varsSet":["wEndFlypoint","wStartFlypoint","wTownMapCursorCoordinates","wTownMapPlayerIconLandmark"],"varsUsed":["wBackupMapGroup","wBackupMapNumber","wMapGroup","wMapNumber"],"varAddressesUsed":[],"constantsUsed":["FLY_INDIGO","FLY_MT_SILVER","FLY_NEW_BARK","FLY_PALLET","SPAWN_INDIGO"],"lines":["FlyMap:","\tld a, [wMapGroup]","\tld b, a","\tld a, [wMapNumber]","\tld c, a","\tcall GetWorldMapLocation","; If we\u0027re not in a valid location, i.e. Pokecenter floor 2F,","; the backup map information is used.","\tcp LANDMARK_SPECIAL","\tjr nz, .CheckRegion","\tld a, [wBackupMapGroup]","\tld b, a","\tld a, [wBackupMapNumber]","\tld c, a","\tcall GetWorldMapLocation",".CheckRegion:","; The first 46 locations are part of Johto. The rest are in Kanto.","\tcp KANTO_LANDMARK","\tjr nc, .KantoFlyMap",".JohtoFlyMap:","; Note that .NoKanto should be modified in tandem with this branch","\tpush af","; Start from New Bark Town","\tld a, FLY_NEW_BARK","\tld [wTownMapPlayerIconLandmark], a","; Flypoints begin at New Bark Town...","\tld [wStartFlypoint], a","; ..and end at Silver Cave.","\tld a, FLY_MT_SILVER","\tld [wEndFlypoint], a","; Fill out the map","\tcall FillJohtoMap","\tcall .MapHud","\tpop af","\tcall TownMapPlayerIcon","\tret","",".KantoFlyMap:","; The event that there are no flypoints enabled in a map is not","; accounted for. As a result, if you attempt to select a flypoint","; when there are none enabled, the game will crash. Additionally,","; the flypoint selection has a default starting point that","; can be flown to even if none are enabled.","; To prevent both of these things from happening when the player","; enters Kanto, fly access is restricted until Indigo Plateau is","; visited and its flypoint enabled.","\tpush af","\tld c, SPAWN_INDIGO","\tcall HasVisitedSpawn","\tand a","\tjr z, .NoKanto","; Kanto\u0027s map is only loaded if we\u0027ve visited Indigo Plateau","","; Flypoints begin at Pallet Town...","\tld a, FLY_PALLET","\tld [wStartFlypoint], a","; ...and end at Indigo Plateau","\tld a, FLY_INDIGO","\tld [wEndFlypoint], a","; Because Indigo Plateau is the first flypoint the player","; visits, it\u0027s made the default flypoint.","\tld [wTownMapPlayerIconLandmark], a","; Fill out the map","\tcall FillKantoMap","\tcall .MapHud","\tpop af","\tcall TownMapPlayerIcon","\tret","",".NoKanto:","; If Indigo Plateau hasn\u0027t been visited, we use Johto\u0027s map instead","","; Start from New Bark Town","\tld a, FLY_NEW_BARK","\tld [wTownMapPlayerIconLandmark], a","; Flypoints begin at New Bark Town...","\tld [wStartFlypoint], a","; ..and end at Silver Cave","\tld a, FLY_MT_SILVER","\tld [wEndFlypoint], a","\tcall FillJohtoMap","\tpop af",".MapHud:","\tcall TownMapBubble","\tcall TownMapPals","\thlbgcoord 0, 0 ; BG Map 0","\tcall TownMapBGUpdate","\tcall TownMapMon","\tld a, c","\tld [wTownMapCursorCoordinates], a","\tld a, b","\tld [wTownMapCursorCoordinates + 1], a","\tret"],"name":"FlyMap","file":"engine/pokegear/pokegear.asm","lineNo":2261,"address":190750,"addressUsedBy":[]}