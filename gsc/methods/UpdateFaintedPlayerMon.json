{"names":["UpdateFaintedPlayerMon"],"callingMethods":["HandlePlayerMonFaint","UpdateBattleStateAndExperienceAfterEnemyFaint"],"methodsCalled":["FarCall","Predef","UpdateBattleMonInParty"],"methodAddressesUsed":["ChangeHappiness"],"varsSet":["wBattleMonStatus","wBattleResult","wCurPartyMon","wLowHealthAlarm"],"varsUsed":["wBattleMonLevel","wBattleResult","wCurBattleMon","wEnemyMonLevel","wWhichMonFaintedFirst"],"varAddressesUsed":["SmallFarFlagActionPredef","wBattleParticipantsNotFainted","wEnemySubStatus3","wPlayerDamageTaken"],"constantsUsed":["HAPPINESS_BEATENBYSTRONGFOE","HAPPINESS_FAINTED","RESET_FLAG"],"lines":["UpdateFaintedPlayerMon:","\tld a, [wCurBattleMon]","\tld c, a","\tld hl, wBattleParticipantsNotFainted","\tld b, RESET_FLAG","\tpredef SmallFarFlagAction","\tld hl, wEnemySubStatus3","\tres SUBSTATUS_IN_LOOP, [hl]","\txor a","\tld [wLowHealthAlarm], a","\tld hl, wPlayerDamageTaken","\tld [hli], a","\tld [hl], a","\tld [wBattleMonStatus], a","\tcall UpdateBattleMonInParty","\tld c, HAPPINESS_FAINTED","\t; If TheirLevel \u003e (YourLevel + 30), use a different parameter","\tld a, [wBattleMonLevel]","\tadd 30","\tld b, a","\tld a, [wEnemyMonLevel]","\tcp b","\tjr c, .got_param","\tld c, HAPPINESS_BEATENBYSTRONGFOE","",".got_param","\tld a, [wCurBattleMon]","\tld [wCurPartyMon], a","\tcallfar ChangeHappiness","\tld a, [wBattleResult]","\tand BATTLERESULT_BITMASK","\tadd LOSE","\tld [wBattleResult], a","\tld a, [wWhichMonFaintedFirst]","\tand a","\tret z","\tret ; ??????????"],"name":"UpdateFaintedPlayerMon","file":"engine/battle/core.asm","lineNo":2645,"address":136241,"addressUsedBy":[]}