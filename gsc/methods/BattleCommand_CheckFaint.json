{"names":["BattleCommand_CheckFaint"],"callingMethods":[],"methodsCalled":["BattleCommand_RaiseSub","BattleCommand_SwitchTurn","EndMoveEffect","GetBattleVar","LoadAnim","Predef","RefreshBattleHuds","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":["wBuffer1","wBuffer2","wBuffer3","wBuffer4","wBuffer5","wBuffer6","wFXAnimID","wKickCounter","wNumHits","wWhichHPBar"],"varsUsed":["hBattleTurn"],"varAddressesUsed":["AnimateHPBarPredef","wBattleMonHP","wBattleMonMaxHP","wEnemyMonHP","wEnemyMonMaxHP"],"constantsUsed":["BATTLE_VARS_MOVE_EFFECT","BATTLE_VARS_SUBSTATUS5_OPP","DESTINY_BOND"],"lines":["BattleCommand_CheckFaint:","; checkfaint","","; Faint the opponent if its HP reached zero",";  and faint the user along with it if it used Destiny Bond.","; Ends the move effect if the opponent faints.","","\tld hl, wEnemyMonHP","\tldh a, [hBattleTurn]","\tand a","\tjr z, .got_hp","\tld hl, wBattleMonHP","",".got_hp","\tld a, [hli]","\tor [hl]","\tret nz","","\tld a, BATTLE_VARS_SUBSTATUS5_OPP","\tcall GetBattleVar","\tbit SUBSTATUS_DESTINY_BOND, a","\tjr z, .no_dbond","","\tld hl, TookDownWithItText","\tcall StdBattleTextbox","","\tldh a, [hBattleTurn]","\tand a","\tld hl, wEnemyMonMaxHP + 1","\tbccoord 2, 2 ; hp bar","\tld a, 0","\tjr nz, .got_max_hp","\tld hl, wBattleMonMaxHP + 1","\tbccoord 10, 9 ; hp bar","\tld a, 1","",".got_max_hp","\tld [wWhichHPBar], a","\tld a, [hld]","\tld [wBuffer1], a","\tld a, [hld]","\tld [wBuffer2], a","\tld a, [hl]","\tld [wBuffer3], a","\txor a","\tld [hld], a","\tld a, [hl]","\tld [wBuffer4], a","\txor a","\tld [hl], a","\tld [wBuffer5], a","\tld [wBuffer6], a","\tld h, b","\tld l, c","\tpredef AnimateHPBar","\tcall RefreshBattleHuds","","\tcall BattleCommand_SwitchTurn","\txor a","\tld [wNumHits], a","\tld [wFXAnimID + 1], a","\tinc a","\tld [wKickCounter], a","\tld a, DESTINY_BOND","\tcall LoadAnim","\tcall BattleCommand_SwitchTurn","","\tjr .finish","",".no_dbond","\tld a, BATTLE_VARS_MOVE_EFFECT","\tcall GetBattleVar","\tcp EFFECT_MULTI_HIT","\tjr z, .multiple_hit_raise_sub","\tcp EFFECT_DOUBLE_HIT","\tjr z, .multiple_hit_raise_sub","\tcp EFFECT_POISON_MULTI_HIT","\tjr z, .multiple_hit_raise_sub","\tcp EFFECT_TRIPLE_KICK","\tjr z, .multiple_hit_raise_sub","\tcp EFFECT_BEAT_UP","\tjr nz, .finish","",".multiple_hit_raise_sub","\tcall BattleCommand_RaiseSub","",".finish","\tjp EndMoveEffect"],"name":"BattleCommand_CheckFaint","file":"engine/battle/effect_commands.asm","lineNo":2370,"address":118651,"addressUsedBy":[]}