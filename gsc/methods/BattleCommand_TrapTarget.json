{"names":["BattleCommand_TrapTarget"],"callingMethods":[],"methodsCalled":["BattleRandom","GetBattleVar","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":[],"varsUsed":["hBattleTurn","wAttackMissed"],"varAddressesUsed":["wEnemyTrappingMove","wEnemyWrapCount","wPlayerTrappingMove","wPlayerWrapCount"],"constantsUsed":["BATTLE_VARS_MOVE_ANIM","BATTLE_VARS_SUBSTATUS4_OPP"],"lines":["BattleCommand_TrapTarget:","; traptarget","","\tld a, [wAttackMissed]","\tand a","\tret nz","\tld hl, wEnemyWrapCount","\tld de, wEnemyTrappingMove","\tldh a, [hBattleTurn]","\tand a","\tjr z, .got_trap","\tld hl, wPlayerWrapCount","\tld de, wPlayerTrappingMove","",".got_trap","\tld a, [hl]","\tand a","\tret nz","\tld a, BATTLE_VARS_SUBSTATUS4_OPP","\tcall GetBattleVar","\tbit SUBSTATUS_SUBSTITUTE, a","\tret nz","\tcall BattleRandom","\t; trapped for 2-5 turns","\tand %11","\tinc a","\tinc a","\tinc a","\tld [hl], a","\tld a, BATTLE_VARS_MOVE_ANIM","\tcall GetBattleVar","\tld [de], a","\tld b, a","\tld hl, .Traps","",".find_trap_text","\tld a, [hli]","\tcp b","\tjr z, .found_trap_text","\tinc hl","\tinc hl","\tjr .find_trap_text","",".found_trap_text","\tld a, [hli]","\tld h, [hl]","\tld l, a","\tjp StdBattleTextbox","",".Traps:","\tdbw BIND,      UsedBindText      ; \u0027used BIND on\u0027","\tdbw WRAP,      WrappedByText     ; \u0027was WRAPPED by\u0027","\tdbw FIRE_SPIN, FireSpinTrapText  ; \u0027was trapped!\u0027","\tdbw CLAMP,     ClampedByText     ; \u0027was CLAMPED by\u0027","\tdbw WHIRLPOOL, WhirlpoolTrapText ; \u0027was trapped!\u0027"],"name":"BattleCommand_TrapTarget","file":"engine/battle/effect_commands.asm","lineNo":5702,"address":122134,"addressUsedBy":[]}