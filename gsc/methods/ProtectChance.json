{"names":["ProtectChance"],"callingMethods":["BattleCommand_Endure","BattleCommand_Protect"],"methodsCalled":["AnimateFailedMove","BattleRandom","CheckOpponentWentFirst","GetBattleVar","PrintButItFailed"],"methodAddressesUsed":[],"varsSet":[],"varsUsed":["hBattleTurn"],"varAddressesUsed":["wEnemyProtectCount","wPlayerProtectCount"],"constantsUsed":["BATTLE_VARS_SUBSTATUS4"],"lines":["ProtectChance:","\tld de, wPlayerProtectCount","\tldh a, [hBattleTurn]","\tand a","\tjr z, .asm_37637","\tld de, wEnemyProtectCount",".asm_37637","","\tcall CheckOpponentWentFirst","\tjr nz, .failed","","; Can\u0027t have a substitute.","","\tld a, BATTLE_VARS_SUBSTATUS4","\tcall GetBattleVar","\tbit SUBSTATUS_SUBSTITUTE, a","\tjr nz, .failed","","; Halve the chance of a successful Protect for each consecutive use.","","\tld b, $ff","\tld a, [de]","\tld c, a",".loop","\tld a, c","\tand a","\tjr z, .done","\tdec c","","\tsrl b","\tld a, b","\tand a","\tjr nz, .loop","\tjr .failed",".done","",".rand","\tcall BattleRandom","\tand a","\tjr z, .rand","","\tdec a","\tcp b","\tjr nc, .failed","","; Another consecutive Protect use.","","\tld a, [de]","\tinc a","\tld [de], a","","\tand a","\tret","",".failed","\txor a","\tld [de], a","\tcall AnimateFailedMove","\tcall PrintButItFailed","\tscf","\tret"],"name":"ProtectChance","file":"engine/battle/move_effects/protect.asm","lineNo":15,"address":123378,"addressUsedBy":[]}