{"names":["UpdateRoamMons"],"callingMethods":[],"methodsCalled":["JumpRoamMon","Random","_BackUpMapIndices"],"methodAddressesUsed":[],"varsSet":["wRoamMon1MapGroup","wRoamMon1MapNumber","wRoamMon2MapGroup","wRoamMon2MapNumber","wRoamMon3MapGroup","wRoamMon3MapNumber"],"varsUsed":["wRoamMon1MapGroup","wRoamMon1MapNumber","wRoamMon2MapGroup","wRoamMon2MapNumber","wRoamMon3MapGroup","wRoamMon3MapNumber","wRoamMons_LastMapGroup","wRoamMons_LastMapNumber"],"varAddressesUsed":["RoamMaps"],"constantsUsed":[],"lines":["UpdateRoamMons:","\tld a, [wRoamMon1MapGroup]","\tcp GROUP_N_A","\tjr z, .SkipRaikou","\tld b, a","\tld a, [wRoamMon1MapNumber]","\tld c, a","\tcall .Update","\tld a, b","\tld [wRoamMon1MapGroup], a","\tld a, c","\tld [wRoamMon1MapNumber], a","",".SkipRaikou:","\tld a, [wRoamMon2MapGroup]","\tcp GROUP_N_A","\tjr z, .SkipEntei","\tld b, a","\tld a, [wRoamMon2MapNumber]","\tld c, a","\tcall .Update","\tld a, b","\tld [wRoamMon2MapGroup], a","\tld a, c","\tld [wRoamMon2MapNumber], a","",".SkipEntei:","\tld a, [wRoamMon3MapGroup]","\tcp GROUP_N_A","\tjr z, .Finished","\tld b, a","\tld a, [wRoamMon3MapNumber]","\tld c, a","\tcall .Update","\tld a, b","\tld [wRoamMon3MapGroup], a","\tld a, c","\tld [wRoamMon3MapNumber], a","",".Finished:","\tjp _BackUpMapIndices","",".Update:","\tld hl, RoamMaps",".loop","; Are we at the end of the table?","\tld a, [hl]","\tcp -1","\tret z","; Is this the correct entry?","\tld a, b","\tcp [hl]","\tjr nz, .next","\tinc hl","\tld a, c","\tcp [hl]","\tjr z, .yes","; We don\u0027t have the correct entry yet, so let\u0027s continue.  A 0 terminates each entry.",".next","\tld a, [hli]","\tand a","\tjr nz, .next","\tjr .loop","","; We have the correct entry now, so let\u0027s choose a random map from it.",".yes","\tinc hl","\tld d, h","\tld e, l",".update_loop","\tld h, d","\tld l, e","; Choose which map to warp to.","\tcall Random","\tand %00011111 ; 1/8n chance it moves to a completely random map, where n is the number of roaming connections from the current map.","\tjr z, JumpRoamMon","\tand %11","\tcp [hl]","\tjr nc, .update_loop ; invalid index, try again","\tinc hl","\tld c, a","\tld b, 0","\tadd hl, bc","\tadd hl, bc","\tld a, [wRoamMons_LastMapGroup]","\tcp [hl]","\tjr nz, .done","\tinc hl","\tld a, [wRoamMons_LastMapNumber]","\tcp [hl]","\tjr z, .update_loop","\tdec hl","",".done","\tld a, [hli]","\tld b, a","\tld c, [hl]","\tret"],"name":"UpdateRoamMons","file":"engine/overworld/wildmons.asm","lineNo":573,"address":106312,"addressUsedBy":["BattleEnd_HandleRoamMons"]}