{"names":["ParseEnemyAction"],"callingMethods":["ParsePlayerAction","PlayerSwitch"],"methodsCalled":["BattleRandom","CheckEnemyLockedIn","EmptyBattleTextbox","FarCall","LinkBattleSendReceiveAction","LoadTilemapToTempTilemap","ResetVarsForSubstatusRage","SafeLoadTempTilemapToTilemap","SetEnemyTurn"],"methodAddressesUsed":["UpdateMoveData"],"varsSet":["wCurEnemyMove","wCurEnemyMoveNum","wEnemyCharging","wEnemyFuryCutterCount","wEnemyProtectCount","wEnemyRageCounter"],"varsUsed":["wBattleAction","wBattleMode","wBattlePlayerAction","wEnemyDisableCount","wEnemyDisabledMove","wEnemyIsSwitching","wEnemyMoveStruct","wEnemySubStatus1","wEnemySubStatus3","wLastEnemyMove","wLinkMode"],"varAddressesUsed":["wEnemyMonMoves","wEnemyMonPP","wEnemySubStatus4","wEnemySubStatus5"],"constantsUsed":["MOVE_EFFECT","NUM_MOVES","STRUGGLE"],"lines":["ParseEnemyAction:","\tld a, [wEnemyIsSwitching]","\tand a","\tret nz","\tld a, [wLinkMode]","\tand a","\tjr z, .not_linked","\tcall EmptyBattleTextbox","\tcall LoadTilemapToTempTilemap","\tld a, [wBattlePlayerAction]","\tand a ; BATTLEPLAYERACTION_USEMOVE?","\tcall z, LinkBattleSendReceiveAction","\tcall SafeLoadTempTilemapToTilemap","\tld a, [wBattleAction]","\tcp BATTLEACTION_STRUGGLE","\tjp z, .struggle","\tcp BATTLEACTION_SKIPTURN","\tjp z, .skip_turn","\tcp BATTLEACTION_SWITCH1","\tjp nc, ResetVarsForSubstatusRage","\tld [wCurEnemyMoveNum], a","\tld c, a","\tld a, [wEnemySubStatus1]","\tbit SUBSTATUS_ROLLOUT, a","\tjp nz, .skip_load","\tld a, [wEnemySubStatus3]","\tand 1 \u003c\u003c SUBSTATUS_CHARGED | 1 \u003c\u003c SUBSTATUS_RAMPAGE | 1 \u003c\u003c SUBSTATUS_BIDE","\tjp nz, .skip_load","","\tld hl, wEnemySubStatus5","\tbit SUBSTATUS_ENCORED, [hl]","\tld a, [wLastEnemyMove]","\tjp nz, .finish","\tld hl, wEnemyMonMoves","\tld b, 0","\tadd hl, bc","\tld a, [hl]","\tjp .finish","",".not_linked","\tld hl, wEnemySubStatus5","\tbit SUBSTATUS_ENCORED, [hl]","\tjr z, .skip_encore","\tld a, [wLastEnemyMove]","\tjp .finish","",".skip_encore","\tcall CheckEnemyLockedIn","\tjp nz, ResetVarsForSubstatusRage","\tjr .continue","",".skip_turn","\tld a, $ff","\tjr .finish","",".continue","\tld hl, wEnemyMonMoves","\tld de, wEnemyMonPP","\tld b, NUM_MOVES",".loop","\tld a, [hl]","\tand a","\tjp z, .struggle","\tld a, [wEnemyDisabledMove]","\tcp [hl]","\tjr z, .disabled","\tld a, [de]","\tand PP_MASK","\tjr nz, .enough_pp","",".disabled","\tinc hl","\tinc de","\tdec b","\tjr nz, .loop","\tjr .struggle","",".enough_pp","\tld a, [wBattleMode]","\tdec a","\tjr nz, .skip_load","; wild",".loop2","\tld hl, wEnemyMonMoves","\tcall BattleRandom","\tmaskbits NUM_MOVES","\tld c, a","\tld b, 0","\tadd hl, bc","\tld a, [wEnemyDisableCount]","\tswap a","\tand $f","\tdec a","\tcp c","\tjr z, .loop2","\tld a, [hl]","\tand a","\tjr z, .loop2","\tld hl, wEnemyMonPP","\tadd hl, bc","\tld b, a","\tld a, [hl]","\tand PP_MASK","\tjr z, .loop2","\tld a, c","\tld [wCurEnemyMoveNum], a","\tld a, b","",".finish","\tld [wCurEnemyMove], a","",".skip_load","\tcall SetEnemyTurn","\tcallfar UpdateMoveData","\tcall CheckEnemyLockedIn","\tjr nz, .raging","\txor a","\tld [wEnemyCharging], a","",".raging","\tld a, [wEnemyMoveStruct + MOVE_EFFECT]","\tcp EFFECT_FURY_CUTTER","\tjr z, .fury_cutter","\txor a","\tld [wEnemyFuryCutterCount], a","",".fury_cutter","\tld a, [wEnemyMoveStruct + MOVE_EFFECT]","\tcp EFFECT_RAGE","\tjr z, .no_rage","\tld hl, wEnemySubStatus4","\tres SUBSTATUS_RAGE, [hl]","\txor a","\tld [wEnemyRageCounter], a","",".no_rage","\tld a, [wEnemyMoveStruct + MOVE_EFFECT]","\tcp EFFECT_PROTECT","\tret z","\tcp EFFECT_ENDURE","\tret z","\txor a","\tld [wEnemyProtectCount], a","\tret","",".struggle","\tld a, STRUGGLE","\tjr .finish"],"name":"ParseEnemyAction","file":"engine/battle/core.asm","lineNo":5766,"address":138845,"addressUsedBy":[]}