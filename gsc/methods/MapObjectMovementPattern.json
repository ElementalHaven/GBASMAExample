{"names":["MapObjectMovementPattern"],"callingMethods":["Function437b"],"methodsCalled":["CanObjectMoveInDirection","CheckPitTile","ClearObjectStructField1c","DecrementObjectMovementByteIndex","EndSpriteMovement","Function462a","GetObjectStruct","GetSpriteMovementFunction","HandleMovementData","IncrementObjectMovementByteIndex","InitStep","JumpTable","MovementAnonymousJumptable","NormalStep","PlaySFX","Random","RandomStepDuration_Fast","RandomStepDuration_Slow","SpawnStrengthBoulderDust","UpdateTallGrassFlags","_GetMovementObject"],"methodAddressesUsed":["Function5000","Function5015","Function5026","GetFollowerNextMovementByte","GetMovementByte"],"fallsInto":"RandomStepDuration_Slow","varsSet":[],"varsUsed":["hMapObjectIndexBuffer","hRandomAdd"],"varAddressesUsed":["wCenteredObject"],"constantsUsed":["OBJECT_1D","OBJECT_1E","OBJECT_ACTION","OBJECT_ACTION_00","OBJECT_ACTION_BIG_DOLL_SYM","OBJECT_ACTION_BOULDER_DUST","OBJECT_ACTION_BOUNCE","OBJECT_ACTION_EMOTE","OBJECT_ACTION_GRASS_SHAKE","OBJECT_ACTION_SHADOW","OBJECT_ACTION_STAND","OBJECT_ACTION_STEP","OBJECT_DIRECTION_WALKING","OBJECT_FACING","OBJECT_FLAGS2","OBJECT_MAP_X","OBJECT_MAP_Y","OBJECT_NEXT_MAP_X","OBJECT_NEXT_MAP_Y","OBJECT_NEXT_TILE","OBJECT_RANGE","OBJECT_SPRITE_X_OFFSET","OBJECT_SPRITE_Y_OFFSET","OBJECT_STEP_DURATION","OBJECT_STEP_TYPE","SFX_STRENGTH","STANDING","STEP_TYPE_03","STEP_TYPE_04","STEP_TYPE_05","STEP_TYPE_07","STEP_TYPE_0F","STEP_TYPE_15","STEP_TYPE_PLAYER_WALK","STEP_TYPE_TRACKING_OBJECT"],"lines":["MapObjectMovementPattern:","\tcall ClearObjectStructField1c","\tcall GetSpriteMovementFunction","\tld a, [hl]","\tld hl, .Pointers","\trst JumpTable","\tret","",".Pointers:","; entries correspond to SPRITEMOVEFN_* constants","\tdw .Null_00 ; 00","\tdw .RandomWalkY ; 01","\tdw .RandomWalkX ; 02","\tdw .RandomWalkXY ; 03","\tdw .RandomSpin1 ; 04","\tdw .RandomSpin2 ; 05","\tdw .Standing ; 06","\tdw .ObeyDPad ; 07","\tdw .Movement08 ; 08","\tdw .Movement09 ; 09","\tdw .Movement0a ; 0a","\tdw .Movement0b ; 0b","\tdw .Movement0c ; 0c","\tdw .Movement0d ; 0d","\tdw .Movement0e ; 0e","\tdw .Follow ; 0f","\tdw .Script ; 10","\tdw .Strength ; 11","\tdw .FollowNotExact ; 12","\tdw .MovementShadow ; 13","\tdw .MovementEmote ; 14","\tdw .MovementBigStanding ; 15","\tdw .MovementBouncing ; 16","\tdw .MovementScreenShake ; 17","\tdw .MovementSpinClockwise ; 18","\tdw .MovementSpinCounterclockwise ; 19","\tdw .MovementBoulderDust ; 1a","\tdw .MovementShakingGrass ; 1b","",".Null_00:","\tret","",".RandomWalkY:","\tcall Random","\tldh a, [hRandomAdd]","\tand %00000001","\tjp .RandomWalkContinue","",".RandomWalkX:","\tcall Random","\tldh a, [hRandomAdd]","\tand %00000001","\tor  %00000010","\tjp .RandomWalkContinue","",".RandomWalkXY:","\tcall Random","\tldh a, [hRandomAdd]","\tand %00000011","\tjp .RandomWalkContinue","",".RandomSpin1:","\tcall Random","\tldh a, [hRandomAdd]","\tand %00001100","\tld hl, OBJECT_FACING","\tadd hl, bc","\tld [hl], a","\tjp RandomStepDuration_Slow","",".RandomSpin2:","\tld hl, OBJECT_FACING","\tadd hl, bc","\tld a, [hl]","\tand %00001100","\tld d, a","\tcall Random","\tldh a, [hRandomAdd]","\tand %00001100","\tcp d","\tjr nz, .keep","\txor %00001100",".keep","\tld [hl], a","\tjp RandomStepDuration_Fast","",".Standing:","\tcall Function462a","\tcall EndSpriteMovement","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_STAND","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_05","\tret","",".ObeyDPad:","\tld hl, Function5000","\tjp HandleMovementData","",".Movement08:","\tld hl, Function5015","\tjp HandleMovementData","",".Movement09:","\tld hl, Function5026","\tjp HandleMovementData","",".Movement0a:","\tjp _GetMovementObject","",".Movement0b:","\tjp _GetMovementObject","",".Movement0c:","\tjp _GetMovementObject","",".Movement0d:","\tld hl, Function5000","\tjp HandleMovementData","",".Movement0e:","\tjp _GetMovementObject","",".Follow:","\tld hl, GetFollowerNextMovementByte","\tjp HandleMovementData","",".Script:","\tld hl, GetMovementByte","\tjp HandleMovementData","",".Strength:","\tcall MovementAnonymousJumptable","\tdw .Strength_Start","\tdw .Strength_Stop","",".Strength_Start:","\tld hl, OBJECT_NEXT_TILE","\tadd hl, bc","\tld a, [hl]","\tcall CheckPitTile","\tjr z, .on_pit","\tld hl, OBJECT_FLAGS2","\tadd hl, bc","\tbit OBJ_FLAGS2_2, [hl]","\tres OBJ_FLAGS2_2, [hl]","\tjr z, .ok","\tld hl, OBJECT_RANGE","\tadd hl, bc","\tld a, [hl]","\tand %00000011","\tor 0","\tcall InitStep","\tcall CanObjectMoveInDirection","\tjr c, .ok2","\tld de, SFX_STRENGTH","\tcall PlaySFX","\tcall SpawnStrengthBoulderDust","\tcall UpdateTallGrassFlags","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_0F","\tret","",".ok2","\tcall Function462a",".ok","\tld hl, OBJECT_DIRECTION_WALKING","\tadd hl, bc","\tld [hl], STANDING","\tret","",".on_pit","\tcall IncrementObjectMovementByteIndex",".Strength_Stop:","\tld hl, OBJECT_DIRECTION_WALKING","\tadd hl, bc","\tld [hl], STANDING","\tret","",".FollowNotExact:","\tld hl, OBJECT_NEXT_MAP_X","\tadd hl, bc","\tld d, [hl]","\tld hl, OBJECT_NEXT_MAP_Y","\tadd hl, bc","\tld e, [hl]","\tld hl, OBJECT_RANGE","\tadd hl, bc","\tld a, [hl]","\tpush bc","\tcall GetObjectStruct","\tld hl, OBJECT_DIRECTION_WALKING","\tadd hl, bc","\tld a, [hl]","\tcp STANDING","\tjr z, .standing","\tld hl, OBJECT_MAP_X","\tadd hl, bc","\tld a, [hl]","\tcp d","\tjr z, .equal","\tjr c, .less","\tld a, 3","\tjr .done","",".less","\tld a, 2","\tjr .done","",".equal","\tld hl, OBJECT_MAP_Y","\tadd hl, bc","\tld a, [hl]","\tcp e","\tjr z, .standing","\tjr c, .less2","\tld a, 0","\tjr .done","",".less2","\tld a, 1",".done","\tld d, a","\tld hl, OBJECT_DIRECTION_WALKING","\tadd hl, bc","\tld a, [hl]","\tand %00001100","\tor d","\tpop bc","\tjp NormalStep","",".standing","\tpop bc","\tld hl, OBJECT_DIRECTION_WALKING","\tadd hl, bc","\tld [hl], STANDING","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_STAND","\tret","",".MovementBigStanding:","\tcall EndSpriteMovement","\tld hl, OBJECT_DIRECTION_WALKING","\tadd hl, bc","\tld [hl], STANDING","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_BIG_DOLL_SYM","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_04","\tret","",".MovementBouncing:","\tcall EndSpriteMovement","\tld hl, OBJECT_DIRECTION_WALKING","\tadd hl, bc","\tld [hl], STANDING","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_BOUNCE","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_04","\tret","",".MovementSpinCounterclockwise:","\tcall MovementAnonymousJumptable","\tdw .MovementSpinInit","\tdw .MovementSpinRepeat","\tdw .MovementSpinTurnLeft","",".MovementSpinClockwise:","\tcall MovementAnonymousJumptable","\tdw .MovementSpinInit","\tdw .MovementSpinRepeat","\tdw .MovementSpinTurnRight","",".MovementSpinInit:","\tcall EndSpriteMovement","\tcall IncrementObjectMovementByteIndex",".MovementSpinRepeat:","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_STAND","\tld hl, OBJECT_RANGE","\tadd hl, bc","\tld a, [hl]","\tld a, $10","\tld hl, OBJECT_STEP_DURATION","\tadd hl, bc","\tld [hl], a","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_03","\tcall IncrementObjectMovementByteIndex","\tret","",".MovementSpinTurnLeft:","\tld de, .DirectionData_Counterclockwise","\tcall .MovementSpinNextFacing","\tjr .MovementSpinCounterclockwise","",".DirectionData_Counterclockwise:","\tdb OW_RIGHT, OW_LEFT, OW_DOWN, OW_UP","",".MovementSpinTurnRight:","\tld de, .DirectionData_Clockwise","\tcall .MovementSpinNextFacing","\tjr .MovementSpinClockwise","",".DirectionData_Clockwise:","\tdb OW_LEFT, OW_RIGHT, OW_UP, OW_DOWN","",".MovementSpinNextFacing:","\tld hl, OBJECT_FACING","\tadd hl, bc","\tld a, [hl]","\tand %00001100","\trrca","\trrca","\tpush hl","\tld l, a","\tld h, 0","\tadd hl, de","\tld a, [hl]","\tpop hl","\tld [hl], a","\tcall DecrementObjectMovementByteIndex","\tret","",".MovementShadow:","\tcall ._MovementShadow_Grass_Emote_BoulderDust","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_SHADOW","\tld hl, OBJECT_STEP_DURATION","\tadd hl, de","\tld a, [hl]","\tinc a","\tadd a","\tadd 0","\tld hl, OBJECT_STEP_DURATION","\tadd hl, bc","\tld [hl], a","\tld hl, OBJECT_DIRECTION_WALKING","\tadd hl, de","\tld a, [hl]","\tmaskbits NUM_DIRECTIONS","\tld d, 1 * 8 + 6","\tcp DOWN","\tjr z, .ok_13","\tcp UP","\tjr z, .ok_13","\tld d, 1 * 8 + 4",".ok_13","\tld hl, OBJECT_SPRITE_Y_OFFSET","\tadd hl, bc","\tld [hl], d","\tld hl, OBJECT_SPRITE_X_OFFSET","\tadd hl, bc","\tld [hl], 0","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_TRACKING_OBJECT","\tret","",".MovementEmote:","\tcall EndSpriteMovement","\tcall ._MovementShadow_Grass_Emote_BoulderDust","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_EMOTE","\tld hl, OBJECT_STEP_DURATION","\tadd hl, bc","\tld [hl], 0","\tld hl, OBJECT_SPRITE_Y_OFFSET","\tadd hl, bc","\tld [hl], -2 * 8","\tld hl, OBJECT_SPRITE_X_OFFSET","\tadd hl, bc","\tld [hl], 0","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_TRACKING_OBJECT","\tret","",".MovementBoulderDust:","\tcall EndSpriteMovement","\tcall ._MovementShadow_Grass_Emote_BoulderDust","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_BOULDER_DUST","\tld hl, OBJECT_STEP_DURATION","\tadd hl, de","\tld a, [hl]","\tinc a","\tadd a","\tld hl, OBJECT_STEP_DURATION","\tadd hl, bc","\tld [hl], a","\tld hl, OBJECT_DIRECTION_WALKING","\tadd hl, de","\tld a, [hl]","\tand %00000011","\tld e, a","\tld d, 0","\tld hl, .data_4a81","\tadd hl, de","\tadd hl, de","\tld d, [hl]","\tinc hl","\tld e, [hl]","\tld hl, OBJECT_SPRITE_X_OFFSET","\tadd hl, bc","\tld [hl], d","\tld hl, OBJECT_SPRITE_Y_OFFSET","\tadd hl, bc","\tld [hl], e","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_TRACKING_OBJECT","\tret","",".data_4a81","\t;   x,  y","\tdb  0, -4","\tdb  0,  8","\tdb  6,  2","\tdb -6,  2","",".MovementShakingGrass:","\tcall EndSpriteMovement","\tcall ._MovementShadow_Grass_Emote_BoulderDust","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_GRASS_SHAKE","\tld hl, OBJECT_STEP_DURATION","\tadd hl, de","\tld a, [hl]","\tadd -1","\tld hl, OBJECT_STEP_DURATION","\tadd hl, bc","\tld [hl], a","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_TRACKING_OBJECT","\tret","","._MovementShadow_Grass_Emote_BoulderDust:","\tld hl, OBJECT_RANGE","\tadd hl, bc","\tld a, [hl]","\tpush bc","\tcall GetObjectStruct","\tld d, b","\tld e, c","\tpop bc","\tld hl, OBJECT_1D","\tadd hl, bc","\tld [hl], e","\tinc hl","\tld [hl], d","\tret","",".MovementScreenShake:","\tcall EndSpriteMovement","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_00","\tld hl, OBJECT_RANGE","\tadd hl, bc","\tld a, [hl]","\tcall ._MovementScreenShake","\tld hl, OBJECT_STEP_DURATION","\tadd hl, bc","\tld [hl], e","\tld hl, OBJECT_1E","\tadd hl, bc","\tld [hl], a","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_15","\tret","","._MovementScreenShake:","\tld d, a","\tand %00111111","\tld e, a","\tld a, d","\trlca","\trlca","\tand %00000011","\tld d, a","\tinc d","\tld a, 1",".loop","\tdec d","\tret z","\tadd a","\tjr .loop","",".RandomWalkContinue:","\tcall InitStep","\tcall CanObjectMoveInDirection ; check whether the object can move in that direction","\tjr c, .NewDuration","\tcall UpdateTallGrassFlags","\tld hl, OBJECT_ACTION","\tadd hl, bc","\tld [hl], OBJECT_ACTION_STEP","\tld hl, wCenteredObject","\tldh a, [hMapObjectIndexBuffer]","\tcp [hl]","\tjr z, .load_6","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_07","\tret","",".load_6","\tld hl, OBJECT_STEP_TYPE","\tadd hl, bc","\tld [hl], STEP_TYPE_PLAYER_WALK","\tret","",".NewDuration:","\tcall EndSpriteMovement","\tcall Function462a","RandomStepDuration_Slow:"],"name":"MapObjectMovementPattern","file":"engine/overworld/map_objects.asm","lineNo":514,"address":60092,"addressUsedBy":[]}