{"names":["MailboxPC"],"callingMethods":["_PlayerMailBoxMenu"],"methodsCalled":["AddNTimes","ClearBGPalettes","CloseSRAM","CloseSubmenu","CopyMenuHeader","DelayFrame","DeleteMailFromPC","ExitMenu","FadeToMenu","FarCall","GetPartyParamLocation","InitMail","InitScrollingMenu","JumpTable","LoadMenuHeader","MenuTextbox","MenuTextboxBackup","MoveMailFromPCToParty","OpenSRAM","PrintText","ReadMailMessage","ReceiveItem","ScrollingMenu","SetPalettes","UpdateSprites","VerticalMenu","WaitBGMap","YesNoBox"],"methodAddressesUsed":["InitPartyMenuGFX","InitPartyMenuWithCancel","LoadPartyMenuGFX","PartyMenuSelect","PrintPartyMenuText","WritePartyMenuTilemap"],"varsSet":["hBGMapMode","wCurItem","wCurMessageIndex","wCurMessageScrollPosition","wItemQuantityChangeBuffer","wMenuCursorBuffer","wMenuScrollPosition","wPartyMenuActionText"],"varsUsed":["wCurMessageIndex","wCurMessageScrollPosition","wCurPartySpecies","wMenuCursorY","wMenuJoypad","wMenuScrollPosition","wMenuSelection"],"varAddressesUsed":["sMailbox1Type","sMailboxCount","wNumItems"],"constantsUsed":["MAIL_STRUCT_LENGTH","MON_ITEM"],"lines":["MailboxPC:","\txor a","\tld [wCurMessageScrollPosition], a","\tld a, 1","\tld [wCurMessageIndex], a",".loop","\tcall InitMail","\tld hl, .TopMenuHeader","\tcall CopyMenuHeader","\txor a","\tldh [hBGMapMode], a","\tcall InitScrollingMenu","\tcall UpdateSprites","","\tld a, [wCurMessageIndex]","\tld [wMenuCursorBuffer], a","\tld a, [wCurMessageScrollPosition]","\tld [wMenuScrollPosition], a","\tcall ScrollingMenu","\tld a, [wMenuScrollPosition]","\tld [wCurMessageScrollPosition], a","\tld a, [wMenuCursorY]","\tld [wCurMessageIndex], a","","\tld a, [wMenuJoypad]","\tcp B_BUTTON","\tjr z, .exit","\tcall .Submenu","\tjr .loop","",".exit","\txor a","\tret","",".Submenu:","\tld hl, .SubMenuHeader","\tcall LoadMenuHeader","\tcall VerticalMenu","\tcall ExitMenu","\tjr c, .subexit","\tld a, [wMenuCursorY]","\tdec a","\tld hl, .JumpTable","\trst JumpTable","",".subexit","\tret","",".JumpTable:","\tdw .ReadMail","\tdw .PutInPack","\tdw .AttachMail","\tdw .Cancel","",".ReadMail:","\tcall FadeToMenu","\tld a, [wMenuSelection]","\tdec a","\tld b, a","\tcall ReadMailMessage","\tjp CloseSubmenu","",".PutInPack:","\tld hl, .MailMessageLostText","\tcall MenuTextbox","\tcall YesNoBox","\tcall ExitMenu","\tret c","\tld a, [wMenuSelection]","\tdec a","\tcall .GetMailType","\tld a, 1","\tld [wItemQuantityChangeBuffer], a","\tld hl, wNumItems","\tcall ReceiveItem","\tjr c, .put_in_bag","\tld hl, .MailPackFullText","\tjp MenuTextboxBackup","",".put_in_bag","\tld a, [wMenuSelection]","\tdec a","\tld b, a","\tcall DeleteMailFromPC","\tld hl, .MailClearedPutAwayText","\tjp MenuTextboxBackup","",".MailClearedPutAwayText:","\ttext_far _MailClearedPutAwayText","\ttext_end","",".MailPackFullText:","\ttext_far _MailPackFullText","\ttext_end","",".MailMessageLostText:","\ttext_far _MailMessageLostText","\ttext_end","",".GetMailType:","\tpush af","\tld a, BANK(sMailboxCount)","\tcall OpenSRAM","\tpop af","\tld hl, sMailbox1Type","\tld bc, MAIL_STRUCT_LENGTH","\tcall AddNTimes","\tld a, [hl]","\tld [wCurItem], a","\tjp CloseSRAM","",".AttachMail:","\tcall FadeToMenu","\txor a","\tld [wPartyMenuActionText], a","\tcall ClearBGPalettes",".try_again","\tfarcall LoadPartyMenuGFX","\tfarcall InitPartyMenuWithCancel","\tfarcall InitPartyMenuGFX","\tfarcall WritePartyMenuTilemap","\tfarcall PrintPartyMenuText","\tcall WaitBGMap","\tcall SetPalettes","\tcall DelayFrame","\tfarcall PartyMenuSelect","\tjr c, .exit2","\tld a, [wCurPartySpecies]","\tcp EGG","\tjr z, .egg","\tld a, MON_ITEM","\tcall GetPartyParamLocation","\tld a, [hl]","\tand a","\tjr z, .attach_mail","\tld hl, .MailAlreadyHoldingItemText","\tcall PrintText","\tjr .try_again","",".egg","\tld hl, .MailEggText","\tcall PrintText","\tjr .try_again","",".attach_mail","\tld a, [wMenuSelection]","\tdec a","\tld b, a","\tcall MoveMailFromPCToParty","\tld hl, .MailMovedFromBoxText","\tcall PrintText","",".exit2","\tjp CloseSubmenu","",".MailAlreadyHoldingItemText:","\ttext_far _MailAlreadyHoldingItemText","\ttext_end","",".MailEggText:","\ttext_far _MailEggText","\ttext_end","",".MailMovedFromBoxText:","\ttext_far _MailMovedFromBoxText","\ttext_end","",".Cancel:","\tret","",".TopMenuHeader:","\tdb MENU_BACKUP_TILES ; flags","\tmenu_coords 8, 1, SCREEN_WIDTH - 2, 10","\tdw .TopMenuData","\tdb 1 ; default option","",".TopMenuData:","\tdb SCROLLINGMENU_DISPLAY_ARROWS ; flags","\tdb 4, 0 ; rows, columns","\tdb SCROLLINGMENU_ITEMS_NORMAL ; item format","\tdbw 0, wMailboxCount ; text pointer","\tdba MailboxPC_PrintMailAuthor","\tdba NULL","\tdba NULL","",".SubMenuHeader:","\tdb MENU_BACKUP_TILES ; flags","\tmenu_coords 0, 0, 13, 9","\tdw .SubMenuData","\tdb 1 ; default option","",".SubMenuData:","\tdb STATICMENU_CURSOR ; flags","\tdb 4 ; items","\tdb \"READ MAIL@\"","\tdb \"PUT IN PACK@\"","\tdb \"ATTACH MAIL@\"","\tdb \"CANCEL@\""],"name":"MailboxPC","file":"engine/pokemon/mail.asm","lineNo":368,"address":148720,"addressUsedBy":[]}