{"names":["BattleTowerText"],"callingMethods":[],"methodsCalled":["PlaceHLTextAtBC"],"methodAddressesUsed":[],"varsSet":["rSVBK","wBT_TrainerTextIndex"],"varsUsed":["hRandomAdd","rSVBK","wBT_TrainerTextIndex"],"varAddressesUsed":["BTFemaleTrainerTexts","BTMaleTrainerTexts","BTTrainerClassGenders","wBT_OTName","wBT_OTTrainerClass"],"constantsUsed":["NAME_LENGTH_JAPANESE"],"lines":["BattleTowerText::","; Print text c for trainer [wBT_OTTrainerClass]","; 1: Intro text","; 2: Player lost","; 3: Player won","\tldh a, [rSVBK]","\tpush af","\tld a, BANK(wBT_OTTrainerClass)","\tldh [rSVBK], a","if DEF(_CRYSTAL11)","\tld hl, wBT_OTTrainerClass","else","; BUG ALERT","; Instead of loading the Trainer Class, this routine","; loads the 6th character in the Trainer\u0027s name, then","; uses it to get the gender of the trainer.","; As a consequence, the enemy trainer\u0027s dialog will","; always be sampled from the female array.","\tld hl, wBT_OTName + NAME_LENGTH_JAPANESE - 1","endc","\tld a, [hl]","\tdec a","\tld e, a","\tld d, 0","\tld hl, BTTrainerClassGenders","\tadd hl, de","\tld a, [hl]","\tand a","\tjr nz, .female","\t; generate a random number between 0 and 24","\tldh a, [hRandomAdd]","\tand $1f","\tcp 25","\tjr c, .okay0","\tsub 25","",".okay0","\tld hl, BTMaleTrainerTexts","\tjr .proceed","",".female","\t; generate a random number between 0 and 14","\tldh a, [hRandomAdd]","\tand $f","\tcp 15","\tjr c, .okay1","\tsub 15","",".okay1","\tld hl, BTFemaleTrainerTexts","",".proceed","\tld b, 0","\tdec c","\tjr nz, .restore","\tld [wBT_TrainerTextIndex], a","\tjr .okay2","",".restore","\tld a, [wBT_TrainerTextIndex]","",".okay2","\tpush af","\tadd hl, bc","\tadd hl, bc","\tld a, [hli]","\tld c, a","\tld a, [hl]","\tld h, a","\tld l, c","\tpop af","\tld c, a","\tld b, 0","\tadd hl, bc","\tadd hl, bc","\tld a, [hli]","\tld c, a","\tld a, [hl]","\tld l, c","\tld h, a","\tbccoord 1, 14","\tpop af","\tldh [rSVBK], a","\tcall PlaceHLTextAtBC","\tret","","; These functions seem to be related to the selection of preset phrases","; for use in mobile communications.  Annoyingly, they separate the","; Battle Tower function above from the data it references."],"name":"BattleTowerText","file":"engine/events/battle_tower/trainer_text.asm","lineNo":1,"address":283827,"addressUsedBy":["WinTrainerBattle","LostBattle"]}