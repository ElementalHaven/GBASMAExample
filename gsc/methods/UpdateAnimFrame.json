{"names":["UpdateAnimFrame"],"callingMethods":["DoNextFrameForAllSprites","DoNextFrameForFirst16Sprites"],"methodsCalled":["AddOrSubtractX","AddOrSubtractY","DeinitializeSprite","GetFrameOAMPointer","GetSpriteAnimFrame","GetSpriteOAMAttr","InitSpriteAnimBuffer"],"methodAddressesUsed":[],"varsSet":["wCurAnimVTile","wCurSpriteOAMAddr"],"varsUsed":["wCurAnimVTile","wCurAnimXCoord","wCurAnimXOffset","wCurAnimYCoord","wCurAnimYOffset","wCurSpriteOAMAddr","wGlobalAnimXOffset","wGlobalAnimYOffset"],"varAddressesUsed":[],"constantsUsed":[],"lines":["UpdateAnimFrame:","\tcall InitSpriteAnimBuffer ; init WRAM","\tcall GetSpriteAnimFrame ; read from a memory array","\tcp -3","\tjr z, .done","\tcp -4","\tjr z, .delete","\tcall GetFrameOAMPointer","\t; add byte to [wCurAnimVTile]","\tld a, [wCurAnimVTile]","\tadd [hl]","\tld [wCurAnimVTile], a","\tinc hl","\t; load pointer into hl","\tld a, [hli]","\tld h, [hl]","\tld l, a","\tpush bc","\tld a, [wCurSpriteOAMAddr]","\tld e, a","\tld d, HIGH(wVirtualOAM)","\tld a, [hli]","\tld c, a ; number of objects",".loop","\t; first byte: y (px)","\t; [de] \u003d [wCurAnimYCoord] + [wCurAnimYOffset] + [wGlobalAnimYOffset] + AddOrSubtractY([hl])","\tld a, [wCurAnimYCoord]","\tld b, a","\tld a, [wCurAnimYOffset]","\tadd b","\tld b, a","\tld a, [wGlobalAnimYOffset]","\tadd b","\tld b, a","\tcall AddOrSubtractY","\tadd b","\tld [de], a","\tinc hl","\tinc de","\t; second byte: x (px)","\t; [de] \u003d [wCurAnimXCoord] + [wCurAnimXOffset] + [wGlobalAnimXOffset] + AddOrSubtractX([hl])","\tld a, [wCurAnimXCoord]","\tld b, a","\tld a, [wCurAnimXOffset]","\tadd b","\tld b, a","\tld a, [wGlobalAnimXOffset]","\tadd b","\tld b, a","\tcall AddOrSubtractX","\tadd b","\tld [de], a","\tinc hl","\tinc de","\t; third byte: vtile","\t; [de] \u003d [wCurAnimVTile] + [hl]","\tld a, [wCurAnimVTile]","\tadd [hl]","\tld [de], a","\tinc hl","\tinc de","\t; fourth byte: attributes","\t; [de] \u003d GetSpriteOAMAttr([hl])","\tcall GetSpriteOAMAttr","\tld [de], a","\tinc hl","\tinc de","\tld a, e","\tld [wCurSpriteOAMAddr], a","\tcp LOW(wVirtualOAMEnd)","\tjr nc, .reached_the_end","\tdec c","\tjr nz, .loop","\tpop bc","\tjr .done","",".delete","\tcall DeinitializeSprite",".done","\tand a","\tret","",".reached_the_end","\tpop bc","\tscf","\tret"],"name":"UpdateAnimFrame","file":"engine/gfx/sprites.asm","lineNo":228,"address":183255,"addressUsedBy":[]}