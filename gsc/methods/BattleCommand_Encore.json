{"names":["BattleCommand_Encore"],"callingMethods":[],"methodsCalled":["AnimateCurrentMove","BattleRandom","CheckOpponentWentFirst","GetBattleVar","GetBattleVarAddr","GetMoveData","PrintDidntAffect2","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":["wCurEnemyMove","wCurEnemyMoveNum","wCurMoveNum","wCurPlayerMove"],"varsUsed":["hBattleTurn","wAttackMissed","wLastEnemyMove","wLastPlayerMove"],"varAddressesUsed":["wBattleMonMoves","wBattleMonPP","wEnemyEncoreCount","wEnemyMonMoves","wPlayerEncoreCount"],"constantsUsed":["BATTLE_VARS_LAST_MOVE_OPP","BATTLE_VARS_SUBSTATUS5_OPP"],"lines":["BattleCommand_Encore:","; encore","","\tld hl, wEnemyMonMoves","\tld de, wEnemyEncoreCount","\tldh a, [hBattleTurn]","\tand a","\tjr z, .ok","\tld hl, wBattleMonMoves","\tld de, wPlayerEncoreCount",".ok","\tld a, BATTLE_VARS_LAST_MOVE_OPP","\tcall GetBattleVar","\tand a","\tjp z, .failed","\tcp STRUGGLE","\tjp z, .failed","\tcp ENCORE","\tjp z, .failed","\tcp MIRROR_MOVE","\tjp z, .failed","\tld b, a","",".got_move","\tld a, [hli]","\tcp b","\tjr nz, .got_move","","\tld bc, wBattleMonPP - wBattleMonMoves - 1","\tadd hl, bc","\tld a, [hl]","\tand PP_MASK","\tjp z, .failed","\tld a, [wAttackMissed]","\tand a","\tjp nz, .failed","\tld a, BATTLE_VARS_SUBSTATUS5_OPP","\tcall GetBattleVarAddr","\tbit SUBSTATUS_ENCORED, [hl]","\tjp nz, .failed","\tset SUBSTATUS_ENCORED, [hl]","\tcall BattleRandom","\tand $3","\tinc a","\tinc a","\tinc a","\tld [de], a","\tcall CheckOpponentWentFirst","\tjr nz, .finish_move","\tldh a, [hBattleTurn]","\tand a","\tjr z, .force_last_enemy_move","","\tpush hl","\tld a, [wLastPlayerMove]","\tld b, a","\tld c, 0","\tld hl, wBattleMonMoves",".find_player_move","\tld a, [hli]","\tcp b","\tjr z, .got_player_move","\tinc c","\tld a, c","\tcp NUM_MOVES","\tjr c, .find_player_move","\tpop hl","\tres SUBSTATUS_ENCORED, [hl]","\txor a","\tld [de], a","\tjr .failed","",".got_player_move","\tpop hl","\tld a, c","\tld [wCurMoveNum], a","\tld a, b","\tld [wCurPlayerMove], a","\tdec a","\tld de, wPlayerMoveStruct","\tcall GetMoveData","\tjr .finish_move","",".force_last_enemy_move","\tpush hl","\tld a, [wLastEnemyMove]","\tld b, a","\tld c, 0","\tld hl, wEnemyMonMoves",".find_enemy_move","\tld a, [hli]","\tcp b","\tjr z, .got_enemy_move","\tinc c","\tld a, c","\tcp NUM_MOVES","\tjr c, .find_enemy_move","\tpop hl","\tres SUBSTATUS_ENCORED, [hl]","\txor a","\tld [de], a","\tjr .failed","",".got_enemy_move","\tpop hl","\tld a, c","\tld [wCurEnemyMoveNum], a","\tld a, b","\tld [wCurEnemyMove], a","\tdec a","\tld de, wEnemyMoveStruct","\tcall GetMoveData","",".finish_move","\tcall AnimateCurrentMove","\tld hl, GotAnEncoreText","\tjp StdBattleTextbox","",".failed","\tjp PrintDidntAffect2"],"name":"BattleCommand_Encore","file":"engine/battle/move_effects/encore.asm","lineNo":1,"address":119553,"addressUsedBy":[]}