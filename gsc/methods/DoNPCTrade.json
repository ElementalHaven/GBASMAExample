{"names":["DoNPCTrade"],"callingMethods":["NPCTrade"],"methodsCalled":["CopyTradeName","FarCall","GetTradeAttribute","GetTradeMonName","Predef","Trade_CopyTwoBytes","Trade_CopyTwoBytesReverseEndian","Trade_GetAttributeOfCurrentPartymon","Trade_GetAttributeOfLastPartymon"],"methodAddressesUsed":["ComputeNPCTrademonStats","GetCaughtGender","RemoveMonFromPartyOrBox","SetGiftPartyMonCaughtData"],"varsSet":["wCurPartyLevel","wCurPartyMon","wCurPartySpecies","wMonType","wOTTrademonCaughtData","wOTTrademonSpecies","wPlayerTrademonCaughtData","wPlayerTrademonSpecies","wPokemonWithdrawDepositParameter"],"varsUsed":["wCurPartyMon","wOTTrademonSpecies","wPartyCount","wPlayerTrademonSpecies"],"varAddressesUsed":["TryAddMonToPartyPredef","wOTTrademonDVs","wOTTrademonID","wOTTrademonNickname","wOTTrademonOTName","wOTTrademonSenderName","wOTTrademonSpeciesName","wPartyMon1DVs","wPartyMon1ID","wPartyMon1Item","wPartyMon1Level","wPartyMon1Species","wPartyMonNicknames","wPartyMonOT","wPlayerName","wPlayerTrademonDVs","wPlayerTrademonID","wPlayerTrademonOTName","wPlayerTrademonSenderName","wPlayerTrademonSpeciesName"],"constantsUsed":["CAUGHT_BY_BOY","CAUGHT_BY_GIRL","MON_NAME_LENGTH","NAME_LENGTH","NPCTRADE_DIALOG","NPCTRADE_DVS","NPCTRADE_GETMON","NPCTRADE_GIVEMON","NPCTRADE_ITEM","NPCTRADE_NICK","NPCTRADE_OT_ID","NPCTRADE_OT_NAME","PARTYMON_STRUCT_LENGTH","RESET_FLAG","SET_FLAG"],"lines":["DoNPCTrade:","\tld e, NPCTRADE_GIVEMON","\tcall GetTradeAttribute","\tld a, [hl]","\tld [wPlayerTrademonSpecies], a","","\tld e, NPCTRADE_GETMON","\tcall GetTradeAttribute","\tld a, [hl]","\tld [wOTTrademonSpecies], a","","\tld a, [wPlayerTrademonSpecies]","\tld de, wPlayerTrademonSpeciesName","\tcall GetTradeMonName","\tcall CopyTradeName","","\tld a, [wOTTrademonSpecies]","\tld de, wOTTrademonSpeciesName","\tcall GetTradeMonName","\tcall CopyTradeName","","\tld hl, wPartyMonOT","\tld bc, NAME_LENGTH","\tcall Trade_GetAttributeOfCurrentPartymon","\tld de, wPlayerTrademonOTName","\tcall CopyTradeName","","\tld hl, wPlayerName","\tld de, wPlayerTrademonSenderName","\tcall CopyTradeName","","\tld hl, wPartyMon1ID","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall Trade_GetAttributeOfCurrentPartymon","\tld de, wPlayerTrademonID","\tcall Trade_CopyTwoBytes","","\tld hl, wPartyMon1DVs","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall Trade_GetAttributeOfCurrentPartymon","\tld de, wPlayerTrademonDVs","\tcall Trade_CopyTwoBytes","","\tld hl, wPartyMon1Species","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall Trade_GetAttributeOfCurrentPartymon","\tld b, h","\tld c, l","\tfarcall GetCaughtGender","\tld a, c","\tld [wPlayerTrademonCaughtData], a","","\tld e, NPCTRADE_DIALOG","\tcall GetTradeAttribute","\tld a, [hl]","\tcp TRADE_DIALOGSET_GIRL","\tld a, CAUGHT_BY_GIRL","\tjr c, .okay","\tld a, CAUGHT_BY_BOY",".okay","\tld [wOTTrademonCaughtData], a","","\tld hl, wPartyMon1Level","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall Trade_GetAttributeOfCurrentPartymon","\tld a, [hl]","\tld [wCurPartyLevel], a","\tld a, [wOTTrademonSpecies]","\tld [wCurPartySpecies], a","\txor a","\tld [wMonType], a ; PARTYMON","\tld [wPokemonWithdrawDepositParameter], a ; REMOVE_PARTY","\tcallfar RemoveMonFromPartyOrBox","\tpredef TryAddMonToParty","","\tld e, NPCTRADE_DIALOG","\tcall GetTradeAttribute","\tld a, [hl]","\tcp TRADE_DIALOG_COMPLETE","\tld b, RESET_FLAG","\tjr c, .incomplete","\tld b, SET_FLAG",".incomplete","\tfarcall SetGiftPartyMonCaughtData","","\tld e, NPCTRADE_NICK","\tcall GetTradeAttribute","\tld de, wOTTrademonNickname","\tcall CopyTradeName","","\tld hl, wPartyMonNicknames","\tld bc, MON_NAME_LENGTH","\tcall Trade_GetAttributeOfLastPartymon","\tld hl, wOTTrademonNickname","\tcall CopyTradeName","","\tld e, NPCTRADE_OT_NAME","\tcall GetTradeAttribute","\tpush hl","\tld de, wOTTrademonOTName","\tcall CopyTradeName","\tpop hl","\tld de, wOTTrademonSenderName","\tcall CopyTradeName","","\tld hl, wPartyMonOT","\tld bc, NAME_LENGTH","\tcall Trade_GetAttributeOfLastPartymon","\tld hl, wOTTrademonOTName","\tcall CopyTradeName","","\tld e, NPCTRADE_DVS","\tcall GetTradeAttribute","\tld de, wOTTrademonDVs","\tcall Trade_CopyTwoBytes","","\tld hl, wPartyMon1DVs","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall Trade_GetAttributeOfLastPartymon","\tld hl, wOTTrademonDVs","\tcall Trade_CopyTwoBytes","","\tld e, NPCTRADE_OT_ID","\tcall GetTradeAttribute","\tld de, wOTTrademonID + 1","\tcall Trade_CopyTwoBytesReverseEndian","","\tld hl, wPartyMon1ID","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall Trade_GetAttributeOfLastPartymon","\tld hl, wOTTrademonID","\tcall Trade_CopyTwoBytes","","\tld e, NPCTRADE_ITEM","\tcall GetTradeAttribute","\tpush hl","\tld hl, wPartyMon1Item","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall Trade_GetAttributeOfLastPartymon","\tpop hl","\tld a, [hl]","\tld [de], a","","\tpush af","\tpush bc","\tpush de","\tpush hl","\tld a, [wCurPartyMon]","\tpush af","\tld a, [wPartyCount]","\tdec a","\tld [wCurPartyMon], a","\tfarcall ComputeNPCTrademonStats","\tpop af","\tld [wCurPartyMon], a","\tpop hl","\tpop de","\tpop bc","\tpop af","\tret"],"name":"DoNPCTrade","file":"engine/events/npc_trade.asm","lineNo":113,"address":254060,"addressUsedBy":[]}