{"names":["BattleCommand_Counter"],"callingMethods":[],"methodsCalled":["BattleCommand_ResetTypeMatchup","CheckOpponentWentFirst","FarCall","GetBattleVar","GetMoveData"],"methodAddressesUsed":["GetMoveEffect"],"varsSet":["wAttackMissed"],"varsUsed":["wStringBuffer1","wTypeMatchup"],"varAddressesUsed":["wCurDamage","wStringBuffer1"],"constantsUsed":["BATTLE_VARS_LAST_COUNTER_MOVE_OPP","MOVE_POWER","MOVE_TYPE"],"lines":["BattleCommand_Counter:","; counter","","\tld a, 1","\tld [wAttackMissed], a","\tld a, BATTLE_VARS_LAST_COUNTER_MOVE_OPP","\tcall GetBattleVar","\tand a","\tret z","","\tld b, a","\tcallfar GetMoveEffect","\tld a, b","\tcp EFFECT_COUNTER","\tret z","","\tcall BattleCommand_ResetTypeMatchup","\tld a, [wTypeMatchup]","\tand a","\tret z","","\tcall CheckOpponentWentFirst","\tret z","","\tld a, BATTLE_VARS_LAST_COUNTER_MOVE_OPP","\tcall GetBattleVar","\tdec a","\tld de, wStringBuffer1","\tcall GetMoveData","","\tld a, [wStringBuffer1 + MOVE_POWER]","\tand a","\tret z","","\tld a, [wStringBuffer1 + MOVE_TYPE]","\tcp SPECIAL","\tret nc","","\t; BUG: Move should fail with all non-damaging battle actions","\tld hl, wCurDamage","\tld a, [hli]","\tor [hl]","\tret z","","\tld a, [hl]","\tadd a","\tld [hld], a","\tld a, [hl]","\tadc a","\tld [hl], a","\tjr nc, .capped","\tld a, $ff","\tld [hli], a","\tld [hl], a",".capped","","\txor a","\tld [wAttackMissed], a","\tret"],"name":"BattleCommand_Counter","file":"engine/battle/move_effects/counter.asm","lineNo":1,"address":119506,"addressUsedBy":[]}