{"names":["EnemyAttackDamage"],"callingMethods":["BattleCommand_BeatUp","BattleCommand_ConstantDamage","BattleCommand_DamageStats"],"methodsCalled":["CheckDamageStatsCritical","DittoMetalPowder","LightBallBoost","ResetDamage","ThickClubBoost","TruncateHL_BC"],"methodAddressesUsed":[],"varsSet":[],"varsUsed":["wEnemyMonLevel","wPlayerScreens"],"varAddressesUsed":["wBattleMonDefense","wBattleMonSpclDef","wEnemyAttack","wEnemyMonAttack","wEnemyMonSpclAtk","wEnemyMoveStructPower","wEnemySpAtk","wPlayerDefense","wPlayerSpDef"],"constantsUsed":[],"lines":["EnemyAttackDamage:","\tcall ResetDamage","","; No damage dealt with 0 power.","\tld hl, wEnemyMoveStructPower","\tld a, [hli] ; hl \u003d wEnemyMoveStructType","\tld d, a","\tand a","\tret z","","\tld a, [hl]","\tcp SPECIAL","\tjr nc, .Special","",".physical","\tld hl, wBattleMonDefense","\tld a, [hli]","\tld b, a","\tld c, [hl]","","\tld a, [wPlayerScreens]","\tbit SCREENS_REFLECT, a","\tjr z, .physicalcrit","\tsla c","\trl b","",".physicalcrit","\tld hl, wEnemyMonAttack","\tcall CheckDamageStatsCritical","\tjr c, .thickclub","","\tld hl, wPlayerDefense","\tld a, [hli]","\tld b, a","\tld c, [hl]","\tld hl, wEnemyAttack","\tjr .thickclub","",".Special:","\tld hl, wBattleMonSpclDef","\tld a, [hli]","\tld b, a","\tld c, [hl]","","\tld a, [wPlayerScreens]","\tbit SCREENS_LIGHT_SCREEN, a","\tjr z, .specialcrit","\tsla c","\trl b","",".specialcrit","\tld hl, wEnemyMonSpclAtk","\tcall CheckDamageStatsCritical","\tjr c, .lightball","\tld hl, wPlayerSpDef","\tld a, [hli]","\tld b, a","\tld c, [hl]","\tld hl, wEnemySpAtk","",".lightball","\tcall LightBallBoost","\tjr .done","",".thickclub","\tcall ThickClubBoost","",".done","\tcall TruncateHL_BC","","\tld a, [wEnemyMonLevel]","\tld e, a","\tcall DittoMetalPowder","","\tld a, 1","\tand a","\tret"],"name":"EnemyAttackDamage","file":"engine/battle/effect_commands.asm","lineNo":2817,"address":118955,"addressUsedBy":["AI_Smart_PriorityHit","AIDamageCalc"]}