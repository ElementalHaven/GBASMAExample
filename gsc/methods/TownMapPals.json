{"names":["TownMapPals"],"callingMethods":["FlyMap","Function92311","Pokedex_GetArea"],"methodsCalled":[],"methodAddressesUsed":[],"varsSet":[],"varsUsed":[],"varAddressesUsed":[],"constantsUsed":["SCREEN_HEIGHT","SCREEN_WIDTH"],"lines":["TownMapPals:","; Assign palettes based on tile ids","\thlcoord 0, 0","\tdecoord 0, 0, wAttrmap","\tld bc, SCREEN_WIDTH * SCREEN_HEIGHT",".loop","; Current tile","\tld a, [hli]","\tpush hl","; The palette map covers tiles $00 to $5f; $60 and above use palette 0","\tcp $60","\tjr nc, .pal0","","; The palette data is condensed to nybbles, least-significant first.","\tld hl, .PalMap","\tsrl a","\tjr c, .odd","; Even-numbered tile ids take the bottom nybble...","\tadd l","\tld l, a","\tld a, h","\tadc 0","\tld h, a","\tld a, [hl]","\tand PALETTE_MASK","\tjr .update","",".odd","; ...and odd ids take the top.","\tadd l","\tld l, a","\tld a, h","\tadc 0","\tld h, a","\tld a, [hl]","\tswap a","\tand PALETTE_MASK","\tjr .update","",".pal0","\txor a",".update","\tpop hl","\tld [de], a","\tinc de","\tdec bc","\tld a, b","\tor c","\tjr nz, .loop","\tret","",".PalMap:","\tconst_def","\tconst PAL_TOWNMAP_BORDER   ; 0","\tconst PAL_TOWNMAP_EARTH    ; 1","\tconst PAL_TOWNMAP_MOUNTAIN ; 2","\tconst PAL_TOWNMAP_CITY     ; 3","\tconst PAL_TOWNMAP_POI      ; 4","\tconst PAL_TOWNMAP_POI_MTN  ; 5"],"name":"TownMapPals","file":"engine/pokegear/pokegear.asm","lineNo":2675,"address":191060,"addressUsedBy":["InitPokegearTilemap","_TownMap"]}