{"names":["BattleCommand_Heal"],"callingMethods":[],"methodsCalled":["AnimateCurrentMove","AnimateFailedMove","BattleCommand_MoveDelay","BattleCommand_SwitchTurn","CalcEnemyStats","CalcPlayerStats","CallBattleCore","CompareBytes","GetBattleVar","GetBattleVarAddr","RefreshBattleHuds","StdBattleTextbox","UpdateUserInParty"],"methodAddressesUsed":["GetHalfMaxHP","GetMaxHP","RestoreHP"],"varsSet":[],"varsUsed":["hBattleTurn"],"varAddressesUsed":["wBattleMonHP","wBattleMonMaxHP","wEnemyMonHP","wEnemyMonMaxHP"],"constantsUsed":["BATTLE_VARS_MOVE_ANIM","BATTLE_VARS_STATUS","BATTLE_VARS_SUBSTATUS5","REST_SLEEP_TURNS"],"lines":["BattleCommand_Heal:","; heal","","\tld de, wBattleMonHP","\tld hl, wBattleMonMaxHP","\tldh a, [hBattleTurn]","\tand a","\tjr z, .got_hp","\tld de, wEnemyMonHP","\tld hl, wEnemyMonMaxHP",".got_hp","\tld a, BATTLE_VARS_MOVE_ANIM","\tcall GetBattleVar","\tld b, a","\tpush hl","\tpush de","\tpush bc","\tld c, 2","\tcall CompareBytes","\tpop bc","\tpop de","\tpop hl","\tjp z, .hp_full","\tld a, b","\tcp REST","\tjr nz, .not_rest","","\tpush hl","\tpush de","\tpush af","\tcall BattleCommand_MoveDelay","\tld a, BATTLE_VARS_SUBSTATUS5","\tcall GetBattleVarAddr","\tres SUBSTATUS_TOXIC, [hl]","\tld a, BATTLE_VARS_STATUS","\tcall GetBattleVarAddr","\tld a, [hl]","\tand a","\tld [hl], REST_SLEEP_TURNS + 1","\tld hl, WentToSleepText","\tjr z, .no_status_to_heal","\tld hl, RestedText",".no_status_to_heal","\tcall StdBattleTextbox","\tldh a, [hBattleTurn]","\tand a","\tjr nz, .calc_enemy_stats","\tcall CalcPlayerStats","\tjr .got_stats","",".calc_enemy_stats","\tcall CalcEnemyStats",".got_stats","\tpop af","\tpop de","\tpop hl","",".not_rest","\tjr z, .restore_full_hp","\tld hl, GetHalfMaxHP","\tcall CallBattleCore","\tjr .finish","",".restore_full_hp","\tld hl, GetMaxHP","\tcall CallBattleCore",".finish","\tcall AnimateCurrentMove","\tcall BattleCommand_SwitchTurn","\tld hl, RestoreHP","\tcall CallBattleCore","\tcall BattleCommand_SwitchTurn","\tcall UpdateUserInParty","\tcall RefreshBattleHuds","\tld hl, RegainedHealthText","\tjp StdBattleTextbox","",".hp_full","\tcall AnimateFailedMove","\tld hl, HPIsFullText","\tjp StdBattleTextbox"],"name":"BattleCommand_Heal","file":"engine/battle/effect_commands.asm","lineNo":6138,"address":122782,"addressUsedBy":[]}