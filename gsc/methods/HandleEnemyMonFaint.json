{"names":["HandleEnemyMonFaint"],"callingMethods":["Battle_EnemyFirst","Battle_PlayerFirst","CheckFaint_EnemyThenPlayer","CheckFaint_PlayerThenEnemy"],"methodsCalled":["AskUseNextPokemon","CheckEnemyTrainerDefeated","CheckMobileBattleError","CheckPlayerPartyForFitMon","DelayFrames","DoubleSwitch","FaintEnemyPokemon","FaintYourPokemon","ForcePlayerMonChoice","HandleEnemySwitch","LostBattle","UpdateBattleStateAndExperienceAfterEnemyFaint","UpdatePlayerHUD","WildFled_EnemyFled_LinkBattleCanceled","WinTrainerBattle"],"methodAddressesUsed":[],"varsSet":["hBGMapMode","wBattleEnded","wBattlePlayerAction","wWhichMonFaintedFirst"],"varsUsed":["wBattleMode"],"varAddressesUsed":["wBattleMonHP"],"constantsUsed":["BATTLEPLAYERACTION_USEITEM"],"lines":["HandleEnemyMonFaint:","\tcall FaintEnemyPokemon","\tld hl, wBattleMonHP","\tld a, [hli]","\tor [hl]","\tcall z, FaintYourPokemon","\txor a","\tld [wWhichMonFaintedFirst], a","\tcall UpdateBattleStateAndExperienceAfterEnemyFaint","\tcall CheckPlayerPartyForFitMon","\tld a, d","\tand a","\tjp z, LostBattle","","\tld hl, wBattleMonHP","\tld a, [hli]","\tor [hl]","\tcall nz, UpdatePlayerHUD","","\tld a, $1","\tldh [hBGMapMode], a","\tld c, 60","\tcall DelayFrames","","\tld a, [wBattleMode]","\tdec a","\tjr nz, .trainer","","\tld a, 1","\tld [wBattleEnded], a","\tret","",".trainer","\tcall CheckEnemyTrainerDefeated","\tjp z, WinTrainerBattle","","\tld hl, wBattleMonHP","\tld a, [hli]","\tor [hl]","\tjr nz, .player_mon_not_fainted","","\tcall AskUseNextPokemon","\tjr nc, .dont_flee","","\tld a, 1","\tld [wBattleEnded], a","\tret","",".dont_flee","\tcall ForcePlayerMonChoice","\tcall CheckMobileBattleError","\tjp c, WildFled_EnemyFled_LinkBattleCanceled","","\tld a, BATTLEPLAYERACTION_USEITEM","\tld [wBattlePlayerAction], a","\tcall HandleEnemySwitch","\tjp z, WildFled_EnemyFled_LinkBattleCanceled","\tjr DoubleSwitch","",".player_mon_not_fainted","\tld a, BATTLEPLAYERACTION_USEITEM","\tld [wBattlePlayerAction], a","\tcall HandleEnemySwitch","\tjp z, WildFled_EnemyFled_LinkBattleCanceled","\txor a ; BATTLEPLAYERACTION_USEMOVE","\tld [wBattlePlayerAction], a","\tret"],"name":"HandleEnemyMonFaint","file":"engine/battle/core.asm","lineNo":1998,"address":135690,"addressUsedBy":[]}