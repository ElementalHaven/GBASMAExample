{"names":["BattleCommand_ApplyDamage"],"callingMethods":[],"methodsCalled":["BattleCommand_FalseSwipe","BattleRandom","DoEnemyDamage","DoPlayerDamage","GetBattleVar","GetItemName","GetOpponentItem","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":["wNamedObjectIndexBuffer"],"varsUsed":["hBattleTurn","wCurDamage"],"varAddressesUsed":["HungOnText","wEnemyDamageTaken","wPlayerDamageTaken"],"constantsUsed":["BATTLE_VARS_SUBSTATUS1_OPP","BATTLE_VARS_SUBSTATUS4_OPP","FALSE"],"lines":["BattleCommand_ApplyDamage:","; applydamage","","\tld a, BATTLE_VARS_SUBSTATUS1_OPP","\tcall GetBattleVar","\tbit SUBSTATUS_ENDURE, a","\tjr z, .focus_band","","\tcall BattleCommand_FalseSwipe","\tld b, 0","\tjr nc, .damage","\tld b, 1","\tjr .damage","",".focus_band","\tcall GetOpponentItem","\tld a, b","\tcp HELD_FOCUS_BAND","\tld b, 0","\tjr nz, .damage","","\tcall BattleRandom","\tcp c","\tjr nc, .damage","\tcall BattleCommand_FalseSwipe","\tld b, 0","\tjr nc, .damage","\tld b, 2","",".damage","\tpush bc","\tcall .update_damage_taken","\tld c, FALSE","\tldh a, [hBattleTurn]","\tand a","\tjr nz, .damage_player","\tcall DoEnemyDamage","\tjr .done_damage","",".damage_player","\tcall DoPlayerDamage","",".done_damage","\tpop bc","\tld a, b","\tand a","\tret z","","\tdec a","\tjr nz, .focus_band_text","\tld hl, EnduredText","\tjp StdBattleTextbox","",".focus_band_text","\tcall GetOpponentItem","\tld a, [hl]","\tld [wNamedObjectIndexBuffer], a","\tcall GetItemName","\tld hl, HungOnText","\tjp StdBattleTextbox","",".update_damage_taken","\tld a, BATTLE_VARS_SUBSTATUS4_OPP","\tcall GetBattleVar","\tbit SUBSTATUS_SUBSTITUTE, a","\tret nz","","\tld de, wPlayerDamageTaken + 1","\tldh a, [hBattleTurn]","\tand a","\tjr nz, .got_damage_taken","\tld de, wEnemyDamageTaken + 1","",".got_damage_taken","\tld a, [wCurDamage + 1]","\tld b, a","\tld a, [de]","\tadd b","\tld [de], a","\tdec de","\tld a, [wCurDamage]","\tld b, a","\tld a, [de]","\tadc b","\tld [de], a","\tret nc","\tld a, $ff","\tld [de], a","\tinc de","\tld [de], a","\tret"],"name":"BattleCommand_ApplyDamage","file":"engine/battle/effect_commands.asm","lineNo":2133,"address":118477,"addressUsedBy":[]}