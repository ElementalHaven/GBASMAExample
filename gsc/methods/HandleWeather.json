{"names":["HandleWeather"],"callingMethods":["HandleBetweenTurnEffects"],"methodsCalled":["Call_PlayBattleAnim","GetBattleVar","GetEighthMaxHP","SetEnemyTurn","SetPlayerTurn","StdBattleTextbox","SubtractHPFromUser","SwitchTurnCore"],"methodAddressesUsed":[],"varsSet":["wBattleWeather","wNumHits"],"varsUsed":["hBattleTurn","hSerialConnectionStatus","wBattleWeather"],"varAddressesUsed":["wBattleMonType1","wEnemyMonType1","wWeatherCount"],"constantsUsed":["ANIM_IN_SANDSTORM","BATTLE_VARS_SUBSTATUS3"],"lines":["HandleWeather:","\tld a, [wBattleWeather]","\tcp WEATHER_NONE","\tret z","","\tld hl, wWeatherCount","\tdec [hl]","\tjr z, .ended","","\tld hl, .WeatherMessages","\tcall .PrintWeatherMessage","","\tld a, [wBattleWeather]","\tcp WEATHER_SANDSTORM","\tret nz","","\tldh a, [hSerialConnectionStatus]","\tcp USING_EXTERNAL_CLOCK","\tjr z, .enemy_first","",".player_first","\tcall SetPlayerTurn","\tcall .SandstormDamage","\tcall SetEnemyTurn","\tjr .SandstormDamage","",".enemy_first","\tcall SetEnemyTurn","\tcall .SandstormDamage","\tcall SetPlayerTurn","",".SandstormDamage:","\tld a, BATTLE_VARS_SUBSTATUS3","\tcall GetBattleVar","\tbit SUBSTATUS_UNDERGROUND, a","\tret nz","","\tld hl, wBattleMonType1","\tldh a, [hBattleTurn]","\tand a","\tjr z, .ok","\tld hl, wEnemyMonType1",".ok","\tld a, [hli]","\tcp ROCK","\tret z","\tcp GROUND","\tret z","\tcp STEEL","\tret z","","\tld a, [hl]","\tcp ROCK","\tret z","\tcp GROUND","\tret z","\tcp STEEL","\tret z","","\tcall SwitchTurnCore","\txor a","\tld [wNumHits], a","\tld de, ANIM_IN_SANDSTORM","\tcall Call_PlayBattleAnim","\tcall SwitchTurnCore","\tcall GetEighthMaxHP","\tcall SubtractHPFromUser","","\tld hl, SandstormHitsText","\tjp StdBattleTextbox","",".ended","\tld hl, .WeatherEndedMessages","\tcall .PrintWeatherMessage","\txor a","\tld [wBattleWeather], a","\tret","",".PrintWeatherMessage:","\tld a, [wBattleWeather]","\tdec a","\tld c, a","\tld b, 0","\tadd hl, bc","\tadd hl, bc","\tld a, [hli]","\tld h, [hl]","\tld l, a","\tjp StdBattleTextbox","",".WeatherMessages:","; entries correspond to WEATHER_* constants","\tdw BattleText_RainContinuesToFall","\tdw BattleText_TheSunlightIsStrong","\tdw BattleText_TheSandstormRages","",".WeatherEndedMessages:","; entries correspond to WEATHER_* constants","\tdw BattleText_TheRainStopped","\tdw BattleText_TheSunlightFaded","\tdw BattleText_TheSandstormSubsided"],"name":"HandleWeather","file":"engine/battle/core.asm","lineNo":1680,"address":135455,"addressUsedBy":[]}