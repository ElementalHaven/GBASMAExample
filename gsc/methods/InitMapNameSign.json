{"names":["InitMapNameSign"],"callingMethods":[],"methodsCalled":["FarCall","GetMapEnvironment","GetWorldMapLocation","InitMapNameFrame","LoadMapNameSignGFX"],"methodAddressesUsed":["HDMATransfer_OnlyTopFourRows"],"varsSet":["hBGMapMode","hLCDCPointer","hWY","rWY","wCurLandmark","wLandmarkSignTimer","wPrevLandmark"],"varsUsed":["wCurLandmark","wMapGroup","wMapNumber","wPrevLandmark"],"varAddressesUsed":["wEnteredMapFromContinue"],"constantsUsed":[],"lines":["InitMapNameSign::","\txor a","\tldh [hBGMapMode], a","\tfarcall .inefficient_farcall ; this is a waste of 6 ROM bytes and 6 stack bytes","\tret","","; should have just been a fallthrough",".inefficient_farcall","\tld a, [wMapGroup]","\tld b, a","\tld a, [wMapNumber]","\tld c, a","\tcall GetWorldMapLocation","\tld [wCurLandmark], a","\tcall .CheckNationalParkGate","\tjr z, .gate","","\tcall GetMapEnvironment","\tcp GATE","\tjr nz, .not_gate","",".gate","\tld a, -1","\tld [wCurLandmark], a","",".not_gate","\tld hl, wEnteredMapFromContinue","\tbit 1, [hl]","\tres 1, [hl]","\tjr nz, .dont_do_map_sign","","\tcall .CheckMovingWithinLandmark","\tjr z, .dont_do_map_sign","\tld a, [wCurLandmark]","\tld [wPrevLandmark], a","","\tcall .CheckSpecialMap","\tjr z, .dont_do_map_sign","","; Display for 60 frames","\tld a, 60","\tld [wLandmarkSignTimer], a","\tcall LoadMapNameSignGFX","\tcall InitMapNameFrame","\tfarcall HDMATransfer_OnlyTopFourRows","\tret","",".dont_do_map_sign","\tld a, [wCurLandmark]","\tld [wPrevLandmark], a","\tld a, $90","\tldh [rWY], a","\tldh [hWY], a","\txor a","\tldh [hLCDCPointer], a","\tret","",".CheckMovingWithinLandmark:","\tld a, [wCurLandmark]","\tld c, a","\tld a, [wPrevLandmark]","\tcp c","\tret z","\tcp LANDMARK_SPECIAL","\tret","",".CheckSpecialMap:","; These landmarks do not get pop-up signs.","\tcp -1","\tret z","\tcp LANDMARK_SPECIAL ; redundant check","\tret z","\tcp LANDMARK_RADIO_TOWER","\tret z","\tcp LANDMARK_LAV_RADIO_TOWER","\tret z","\tcp LANDMARK_UNDERGROUND_PATH","\tret z","\tcp LANDMARK_INDIGO_PLATEAU","\tret z","\tcp LANDMARK_POWER_PLANT","\tret z","\tld a, 1","\tand a","\tret","",".CheckNationalParkGate:","\tld a, [wMapGroup]","\tcp GROUP_ROUTE_35_NATIONAL_PARK_GATE","\tret nz","\tld a, [wMapNumber]","\tcp MAP_ROUTE_35_NATIONAL_PARK_GATE","\tret z","\tcp MAP_ROUTE_36_NATIONAL_PARK_GATE","\tret"],"name":"InitMapNameSign","file":"engine/events/map_name_sign.asm","lineNo":3,"address":196468,"addressUsedBy":["RefreshMapSprites"]}