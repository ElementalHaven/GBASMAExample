{"names":["HandleWrap"],"callingMethods":["HandleBetweenTurnEffects"],"methodsCalled":["GetBattleVar","GetMoveName","GetSixteenthMaxHP","Predef","SetEnemyTurn","SetPlayerTurn","StdBattleTextbox","SubtractHPFromUser","SwitchTurnCore"],"methodAddressesUsed":[],"varsSet":["wFXAnimID","wNamedObjectIndexBuffer","wNumHits"],"varsUsed":["hBattleTurn","hSerialConnectionStatus"],"varAddressesUsed":["BattleText_UserWasReleasedFromStringBuffer1","BattleText_UsersHurtByStringBuffer1","PlayBattleAnimPredef","wEnemyTrappingMove","wEnemyWrapCount","wPlayerTrappingMove","wPlayerWrapCount"],"constantsUsed":["BATTLE_VARS_SUBSTATUS3","BATTLE_VARS_SUBSTATUS4"],"lines":["HandleWrap:","\tldh a, [hSerialConnectionStatus]","\tcp USING_EXTERNAL_CLOCK","\tjr z, .EnemyFirst","\tcall SetPlayerTurn","\tcall .do_it","\tcall SetEnemyTurn","\tjp .do_it","",".EnemyFirst:","\tcall SetEnemyTurn","\tcall .do_it","\tcall SetPlayerTurn","",".do_it","\tld hl, wPlayerWrapCount","\tld de, wPlayerTrappingMove","\tldh a, [hBattleTurn]","\tand a","\tjr z, .got_addrs","\tld hl, wEnemyWrapCount","\tld de, wEnemyTrappingMove","",".got_addrs","\tld a, [hl]","\tand a","\tret z","","\tld a, BATTLE_VARS_SUBSTATUS4","\tcall GetBattleVar","\tbit SUBSTATUS_SUBSTITUTE, a","\tret nz","","\tld a, [de]","\tld [wNamedObjectIndexBuffer], a","\tld [wFXAnimID], a","\tcall GetMoveName","\tdec [hl]","\tjr z, .release_from_bounds","","\tld a, BATTLE_VARS_SUBSTATUS3","\tcall GetBattleVar","\tand 1 \u003c\u003c SUBSTATUS_FLYING | 1 \u003c\u003c SUBSTATUS_UNDERGROUND","\tjr nz, .skip_anim","","\tcall SwitchTurnCore","\txor a","\tld [wNumHits], a","\tld [wFXAnimID + 1], a","\tpredef PlayBattleAnim","\tcall SwitchTurnCore","",".skip_anim","\tcall GetSixteenthMaxHP","\tcall SubtractHPFromUser","\tld hl, BattleText_UsersHurtByStringBuffer1","\tjr .print_text","",".release_from_bounds","\tld hl, BattleText_UserWasReleasedFromStringBuffer1","",".print_text","\tjp StdBattleTextbox"],"name":"HandleWrap","file":"engine/battle/core.asm","lineNo":1204,"address":135065,"addressUsedBy":[]}