{"names":["HandleBerserkGene"],"callingMethods":["BattleTurn"],"methodsCalled":["Call_PlayBattleAnim_OnlyIfVisible","FarCall","GetBattleVarAddr","GetItemName","GetPartyLocation","SetEnemyTurn","SetPlayerTurn","StdBattleTextbox","SwitchTurnCore"],"methodAddressesUsed":["BattleCommand_AttackUp2","BattleCommand_StatUpMessage","GetUserItem"],"varsSet":["wAttackMissed","wEffectFailed","wNamedObjectIndexBuffer","wNumHits"],"varsUsed":["hSerialConnectionStatus","wCurBattleMon","wCurOTMon"],"varAddressesUsed":["BattleText_UsersStringBuffer1Activated","wOTPartyMon1Item","wPartyMon1Item"],"constantsUsed":["ANIM_CONFUSED","BATTLE_VARS_MOVE_ANIM","BATTLE_VARS_SUBSTATUS3"],"lines":["HandleBerserkGene:","\tldh a, [hSerialConnectionStatus]","\tcp USING_EXTERNAL_CLOCK","\tjr z, .reverse","","\tcall .player","\tjr .enemy","",".reverse","\tcall .enemy","\t; fallthrough","",".player","\tcall SetPlayerTurn","\tld de, wPartyMon1Item","\tld a, [wCurBattleMon]","\tld b, a","\tjr .go","",".enemy","\tcall SetEnemyTurn","\tld de, wOTPartyMon1Item","\tld a, [wCurOTMon]","\tld b, a","\t; fallthrough","",".go","\tpush de","\tpush bc","\tcallfar GetUserItem","\tld a, [hl]","\tld [wNamedObjectIndexBuffer], a","\tsub BERSERK_GENE","\tpop bc","\tpop de","\tret nz","","\tld [hl], a","","\tld h, d","\tld l, e","\tld a, b","\tcall GetPartyLocation","\txor a","\tld [hl], a","\tld a, BATTLE_VARS_SUBSTATUS3","\tcall GetBattleVarAddr","\tpush af","\tset SUBSTATUS_CONFUSED, [hl]","\tld a, BATTLE_VARS_MOVE_ANIM","\tcall GetBattleVarAddr","\tpush hl","\tpush af","\txor a","\tld [hl], a","\tld [wAttackMissed], a","\tld [wEffectFailed], a","\tfarcall BattleCommand_AttackUp2","\tpop af","\tpop hl","\tld [hl], a","\tcall GetItemName","\tld hl, BattleText_UsersStringBuffer1Activated","\tcall StdBattleTextbox","\tcallfar BattleCommand_StatUpMessage","\tpop af","\tbit SUBSTATUS_CONFUSED, a","\tret nz","\txor a","\tld [wNumHits], a","\tld de, ANIM_CONFUSED","\tcall Call_PlayBattleAnim_OnlyIfVisible","\tcall SwitchTurnCore","\tld hl, BecameConfusedText","\tjp StdBattleTextbox"],"name":"HandleBerserkGene","file":"engine/battle/core.asm","lineNo":345,"address":134344,"addressUsedBy":[]}