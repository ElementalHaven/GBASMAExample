{"names":["_TimeOfDayPals"],"callingMethods":[],"methodsCalled":["DelayFrame","GetSGBLayout","GetTimePalette","_UpdateTimePals"],"methodAddressesUsed":[],"varsSet":["rSVBK","wCurTimeOfDay","wTimeOfDayPal"],"varsUsed":["rSVBK","wTimeOfDay"],"varAddressesUsed":["wBGPals1","wCurTimeOfDay","wOBPals1","wTimeOfDayPal","wTimeOfDayPalFlags"],"constantsUsed":["NUM_PAL_COLORS","PAL_BG_TEXT","SCGB_MAPPALS","palette"],"lines":["_TimeOfDayPals::","; return carry if pals are changed","","; forced pals?","\tld hl, wTimeOfDayPalFlags","\tbit 7, [hl]","\tjr nz, .dontchange","","; do we need to bother updating?","\tld a, [wTimeOfDay]","\tld hl, wCurTimeOfDay","\tcp [hl]","\tjr z, .dontchange","","; if so, the time of day has changed","\tld a, [wTimeOfDay]","\tld [wCurTimeOfDay], a","","; get palette id","\tcall GetTimePalette","","; same palette as before?","\tld hl, wTimeOfDayPal","\tcp [hl]","\tjr z, .dontchange","","; update palette id","\tld [wTimeOfDayPal], a","","; save bg palette 7","\tld hl, wBGPals1 palette PAL_BG_TEXT","","; save wram bank","\tldh a, [rSVBK]","\tld b, a","","\tld a, BANK(wBGPals1)","\tldh [rSVBK], a","","; push palette","\tld c, NUM_PAL_COLORS",".push","\tld d, [hl]","\tinc hl","\tld e, [hl]","\tinc hl","\tpush de","\tdec c","\tjr nz, .push","","; restore wram bank","\tld a, b","\tldh [rSVBK], a","","; update sgb pals","\tld b, SCGB_MAPPALS","\tcall GetSGBLayout","","; restore bg palette 7","\tld hl, wOBPals1 - 1 ; last byte in wBGPals1","","; save wram bank","\tldh a, [rSVBK]","\tld d, a","","\tld a, BANK(wOBPals1)","\tldh [rSVBK], a","","; pop palette","\tld e, NUM_PAL_COLORS",".pop","\tpop bc","\tld [hl], c","\tdec hl","\tld [hl], b","\tdec hl","\tdec e","\tjr nz, .pop","","; restore wram bank","\tld a, d","\tldh [rSVBK], a","","; update palettes","\tcall _UpdateTimePals","\tcall DelayFrame","","; successful change","\tscf","\tret","",".dontchange","; no change occurred","\tand a","\tret"],"name":"_TimeOfDayPals","file":"engine/tilesets/timeofday_pals.asm","lineNo":13,"address":181270,"addressUsedBy":[]}