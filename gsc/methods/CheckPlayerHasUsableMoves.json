{"names":["CheckPlayerHasUsableMoves"],"callingMethods":["MoveSelectionScreen"],"methodsCalled":["DelayFrames","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":["wCurPlayerMove"],"varsUsed":["wPlayerDisableCount"],"varAddressesUsed":["BattleText_MonHasNoMovesLeft","wBattleMonPP"],"constantsUsed":["NUM_MOVES","STRUGGLE"],"lines":["CheckPlayerHasUsableMoves:","\tld a, STRUGGLE","\tld [wCurPlayerMove], a","\tld a, [wPlayerDisableCount]","\tand a","\tld hl, wBattleMonPP","\tjr nz, .disabled","","\tld a, [hli]","\tor [hl]","\tinc hl","\tor [hl]","\tinc hl","\tor [hl]","\tand PP_MASK","\tret nz","\tjr .force_struggle","",".disabled","\tswap a","\tand $f","\tld b, a","\tld d, NUM_MOVES + 1","\txor a",".loop","\tdec d","\tjr z, .done","\tld c, [hl]","\tinc hl","\tdec b","\tjr z, .loop","\tor c","\tjr .loop","",".done","\t; Bug: this will result in a move with PP Up confusing the game.","\tand a ; should be \"and PP_MASK\"","\tret nz","",".force_struggle","\tld hl, BattleText_MonHasNoMovesLeft","\tcall StdBattleTextbox","\tld c, 60","\tcall DelayFrames","\txor a","\tret"],"name":"CheckPlayerHasUsableMoves","file":"engine/battle/core.asm","lineNo":5719,"address":138809,"addressUsedBy":["MobileMoveSelectionScreen"]}