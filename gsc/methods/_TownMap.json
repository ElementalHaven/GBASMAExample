{"names":["_TownMap"],"callingMethods":[],"methodsCalled":["ByteFill","ClearBGPalettes","ClearSprites","ClearTilemap","DelayFrame","DisableLCD","DmgToCgbObjPal0","FarCall","GetSGBLayout","JoyTextDelay","PokegearMap_InitCursor","PokegearMap_InitPlayerIcon","PokegearMap_UpdateCursorPosition","PokegearMap_UpdateLandmarkName","Pokegear_LoadGFX","SetPalettes","SkipMusic","TownMap_GetCurrentLandmark","TownMap_GetKantoLandmarkLimits","WaitBGMap2"],"methodAddressesUsed":["ClearSpriteAnims","PlaySpriteAnimations","PokegearMap","TownMapPals"],"varsSet":["hBGMapMode","hInMenu","rLCDC","wOptions","wTownMapCursorLandmark","wTownMapCursorObjectPointer","wTownMapPlayerIconLandmark","wVramState"],"varsUsed":["hCGB","hInMenu","wTownMapCursorLandmark","wTownMapCursorObjectPointer","wTownMapPlayerIconLandmark","wVramState"],"varAddressesUsed":["hJoyLast","hJoyPressed","wOptions","wTownMapCursorLandmark"],"constantsUsed":["JOHTO_REGION","KANTO_LANDMARK","KANTO_REGION","LCDC_DEFAULT","NAME_LENGTH","SCGB_POKEGEAR_PALS"],"lines":["_TownMap:","\tld hl, wOptions","\tld a, [hl]","\tpush af","\tset NO_TEXT_SCROLL, [hl]","","\tldh a, [hInMenu]","\tpush af","\tld a, $1","\tldh [hInMenu], a","","\tld a, [wVramState]","\tpush af","\txor a","\tld [wVramState], a","","\tcall ClearBGPalettes","\tcall ClearTilemap","\tcall ClearSprites","\tcall DisableLCD","\tcall Pokegear_LoadGFX","\tfarcall ClearSpriteAnims","\tld a, 8","\tcall SkipMusic","\tld a, LCDC_DEFAULT","\tldh [rLCDC], a","\tcall TownMap_GetCurrentLandmark","\tld [wTownMapPlayerIconLandmark], a","\tld [wTownMapCursorLandmark], a","\txor a","\tldh [hBGMapMode], a","\tcall .InitTilemap","\tcall WaitBGMap2","\tld a, [wTownMapPlayerIconLandmark]","\tcall PokegearMap_InitPlayerIcon","\tld a, [wTownMapCursorLandmark]","\tcall PokegearMap_InitCursor","\tld a, c","\tld [wTownMapCursorObjectPointer], a","\tld a, b","\tld [wTownMapCursorObjectPointer + 1], a","\tld b, SCGB_POKEGEAR_PALS","\tcall GetSGBLayout","\tcall SetPalettes","\tldh a, [hCGB]","\tand a","\tjr z, .dmg","\tld a, %11100100","\tcall DmgToCgbObjPal0","\tcall DelayFrame","",".dmg","\tld a, [wTownMapPlayerIconLandmark]","\tcp KANTO_LANDMARK","\tjr nc, .kanto","\tld d, KANTO_LANDMARK - 1","\tld e, 1","\tcall .loop","\tjr .resume","",".kanto","\tcall TownMap_GetKantoLandmarkLimits","\tcall .loop","",".resume","\tpop af","\tld [wVramState], a","\tpop af","\tldh [hInMenu], a","\tpop af","\tld [wOptions], a","\tcall ClearBGPalettes","\tret","",".loop","\tcall JoyTextDelay","\tld hl, hJoyPressed","\tld a, [hl]","\tand B_BUTTON","\tret nz","","\tld hl, hJoyLast","\tld a, [hl]","\tand D_UP","\tjr nz, .pressed_up","","\tld a, [hl]","\tand D_DOWN","\tjr nz, .pressed_down",".loop2","\tpush de","\tfarcall PlaySpriteAnimations","\tpop de","\tcall DelayFrame","\tjr .loop","",".pressed_up","\tld hl, wTownMapCursorLandmark","\tld a, [hl]","\tcp d","\tjr c, .okay","\tld a, e","\tdec a","\tld [hl], a","",".okay","\tinc [hl]","\tjr .next","",".pressed_down","\tld hl, wTownMapCursorLandmark","\tld a, [hl]","\tcp e","\tjr nz, .okay2","\tld a, d","\tinc a","\tld [hl], a","",".okay2","\tdec [hl]","",".next","\tpush de","\tld a, [wTownMapCursorLandmark]","\tcall PokegearMap_UpdateLandmarkName","\tld a, [wTownMapCursorObjectPointer]","\tld c, a","\tld a, [wTownMapCursorObjectPointer + 1]","\tld b, a","\tld a, [wTownMapCursorLandmark]","\tcall PokegearMap_UpdateCursorPosition","\tpop de","\tjr .loop2","",".InitTilemap:","\tld a, [wTownMapPlayerIconLandmark]","\tcp KANTO_LANDMARK","\tjr nc, .kanto2","\tld e, JOHTO_REGION","\tjr .okay_tilemap","",".kanto2","\tld e, KANTO_REGION",".okay_tilemap","\tfarcall PokegearMap","\tld a, $07","\tld bc, 6","\thlcoord 1, 0","\tcall ByteFill","\thlcoord 0, 0","\tld [hl], $06","\thlcoord 7, 0","\tld [hl], $17","\thlcoord 7, 1","\tld [hl], $16","\thlcoord 7, 2","\tld [hl], $26","\tld a, $07","\tld bc, NAME_LENGTH","\thlcoord 8, 2","\tcall ByteFill","\thlcoord 19, 2","\tld [hl], $17","\tld a, [wTownMapCursorLandmark]","\tcall PokegearMap_UpdateLandmarkName","\tfarcall TownMapPals","\tret"],"name":"_TownMap","file":"engine/pokegear/pokegear.asm","lineNo":1769,"address":190319,"addressUsedBy":["OverworldTownMap"]}