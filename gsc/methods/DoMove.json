{"names":["DoMove"],"callingMethods":["BattleCommand_CheckObedience","DoTurn","ResetTurn"],"methodsCalled":["GetBattleVar","GetFarByte","GetFarHalfword"],"methodAddressesUsed":[],"varsSet":["wBattleScriptBufferAddress"],"varsUsed":["wBattleScriptBufferAddress"],"varAddressesUsed":["BattleCommandPointers","MoveEffectsPointers","wBattleScriptBuffer"],"constantsUsed":["BATTLE_VARS_MOVE_EFFECT"],"lines":["DoMove:","; Get the user\u0027s move effect.","\tld a, BATTLE_VARS_MOVE_EFFECT","\tcall GetBattleVar","\tld c, a","\tld b, 0","\tld hl, MoveEffectsPointers","\tadd hl, bc","\tadd hl, bc","\tld a, BANK(MoveEffectsPointers)","\tcall GetFarHalfword","","\tld de, wBattleScriptBuffer","",".GetMoveEffect:","\tld a, BANK(MoveEffects)","\tcall GetFarByte","\tinc hl","\tld [de], a","\tinc de","\tcp endmove_command","\tjr nz, .GetMoveEffect","","; Start at the first command.","\tld hl, wBattleScriptBuffer","\tld a, l","\tld [wBattleScriptBufferAddress], a","\tld a, h","\tld [wBattleScriptBufferAddress + 1], a","",".ReadMoveEffectCommand:","; ld a, [wBattleScriptBufferAddress++]","\tld a, [wBattleScriptBufferAddress]","\tld l, a","\tld a, [wBattleScriptBufferAddress + 1]","\tld h, a","","\tld a, [hli]","","\tpush af","\tld a, l","\tld [wBattleScriptBufferAddress], a","\tld a, h","\tld [wBattleScriptBufferAddress + 1], a","\tpop af","","; endturn_command (-2) is used to terminate branches without ending the read cycle.","\tcp endturn_command","\tret nc","","; The rest of the commands (01-af) are read from BattleCommandPointers.","\tpush bc","\tdec a","\tld c, a","\tld b, 0","\tld hl, BattleCommandPointers","\tadd hl, bc","\tadd hl, bc","\tpop bc","","\tld a, BANK(BattleCommandPointers)","\tcall GetFarHalfword","","\tcall .DoMoveEffectCommand","","\tjr .ReadMoveEffectCommand","",".DoMoveEffectCommand:","\tjp hl"],"name":"DoMove","file":"engine/battle/effect_commands.asm","lineNo":40,"address":116424,"addressUsedBy":["HandleFutureSight"]}