{"names":["BattleCommand_Recoil"],"callingMethods":[],"methodsCalled":["GetBattleVar","Predef","RefreshBattleHuds","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":["wBuffer1","wBuffer2","wBuffer3","wBuffer4","wBuffer5","wBuffer6","wWhichHPBar"],"varsUsed":["hBattleTurn","wCurDamage"],"varAddressesUsed":["AnimateHPBarPredef","wBattleMonMaxHP","wBuffer5","wEnemyMonMaxHP"],"constantsUsed":["BATTLE_VARS_MOVE_ANIM"],"lines":["BattleCommand_Recoil:","; recoil","","\tld hl, wBattleMonMaxHP","\tldh a, [hBattleTurn]","\tand a","\tjr z, .got_hp","\tld hl, wEnemyMonMaxHP",".got_hp","\tld a, BATTLE_VARS_MOVE_ANIM","\tcall GetBattleVar","\tld d, a","; get 1/4 damage or 1 HP, whichever is higher","\tld a, [wCurDamage]","\tld b, a","\tld a, [wCurDamage + 1]","\tld c, a","\tsrl b","\trr c","\tsrl b","\trr c","\tld a, b","\tor c","\tjr nz, .min_damage","\tinc c",".min_damage","\tld a, [hli]","\tld [wBuffer2], a","\tld a, [hl]","\tld [wBuffer1], a","\tdec hl","\tdec hl","\tld a, [hl]","\tld [wBuffer3], a","\tsub c","\tld [hld], a","\tld [wBuffer5], a","\tld a, [hl]","\tld [wBuffer4], a","\tsbc b","\tld [hl], a","\tld [wBuffer6], a","\tjr nc, .dont_ko","\txor a","\tld [hli], a","\tld [hl], a","\tld hl, wBuffer5","\tld [hli], a","\tld [hl], a",".dont_ko","\thlcoord 10, 9","\tldh a, [hBattleTurn]","\tand a","\tld a, 1","\tjr z, .animate_hp_bar","\thlcoord 2, 2","\txor a",".animate_hp_bar","\tld [wWhichHPBar], a","\tpredef AnimateHPBar","\tcall RefreshBattleHuds","\tld hl, RecoilText","\tjp StdBattleTextbox"],"name":"BattleCommand_Recoil","file":"engine/battle/effect_commands.asm","lineNo":5762,"address":122207,"addressUsedBy":[]}