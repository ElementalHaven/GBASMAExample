{"names":["OaksPKMNTalk4"],"callingMethods":[],"methodsCalled":["AddNTimes","CopyBytes","CopyRadioTextToRAM","FarCall","GetFarByte","GetPokemonName","GetWorldMapLocation","PrintRadioLine","Random"],"methodAddressesUsed":["GetLandmarkName"],"varsSet":["wCurPartySpecies","wNamedObjectIndexBuffer"],"varsUsed":[],"varAddressesUsed":["JohtoGrassWildMons","OPT_OakText1","OaksPKMNTalkRoutes","wStringBuffer1"],"constantsUsed":["GRASS_WILDDATA_LENGTH","MON_NAME_LENGTH","NUM_GRASSMON","OAKS_POKEMON_TALK","OAKS_POKEMON_TALK_5"],"lines":["OaksPKMNTalk4:","; Choose a random route, and a random Pokemon from that route.",".sample","\tcall Random","\tand %11111","\tcp (OaksPKMNTalkRoutes.End - OaksPKMNTalkRoutes) / 2","\tjr nc, .sample","\t; We now have a number between 0 and 14.","\tld hl, OaksPKMNTalkRoutes","\tld c, a","\tld b, 0","\tadd hl, bc","\tadd hl, bc","\tld b, [hl]","\tinc hl","\tld c, [hl]","\t; bc now contains the chosen map\u0027s group and number indices.","\tpush bc","","\t; Search the JohtoGrassWildMons array for the chosen map.","\tld hl, JohtoGrassWildMons",".loop","\tld a, BANK(JohtoGrassWildMons)","\tcall GetFarByte","\tcp -1","\tjr z, .overflow","\tinc hl","\tcp b","\tjr nz, .next","\tld a, BANK(JohtoGrassWildMons)","\tcall GetFarByte","\tcp c","\tjr z, .done",".next","\tdec hl","\tld de, GRASS_WILDDATA_LENGTH","\tadd hl, de","\tjr .loop","",".done","\t; Point hl to the list of morning Pokémon., skipping percentages","rept 4","\tinc hl","endr","\t; Generate a number, either 0, 1, or 2, to choose a time of day.",".loop2","\tcall Random","\tmaskbits NUM_DAYTIMES","\tcp DARKNESS_F","\tjr z, .loop2","","\tld bc, 2 * NUM_GRASSMON","\tcall AddNTimes",".loop3","\t; Choose one of the middle three Pokemon.","\tcall Random","\tand NUM_GRASSMON","\tcp 2","\tjr c, .loop3","\tcp 5","\tjr nc, .loop3","\tld e, a","\tld d, 0","\tadd hl, de","\tadd hl, de","\tinc hl ; skip level","\tld a, BANK(JohtoGrassWildMons)","\tcall GetFarByte","\tld [wNamedObjectIndexBuffer], a","\tld [wCurPartySpecies], a","\tcall GetPokemonName","\tld hl, wStringBuffer1","\tld de, wMonOrItemNameBuffer","\tld bc, MON_NAME_LENGTH","\tcall CopyBytes","","\t; Now that we\u0027ve chosen our wild Pokemon,","\t; let\u0027s recover the map index info and get its name.","\tpop bc","\tcall GetWorldMapLocation","\tld e, a","\tfarcall GetLandmarkName","\tld hl, OPT_OakText1","\tcall CopyRadioTextToRAM","\tld a, OAKS_POKEMON_TALK_5","\tjp PrintRadioLine","",".overflow","\tpop bc","\tld a, OAKS_POKEMON_TALK","\tjp PrintRadioLine","","; Oak\u0027s Pokémon Talk will list wild Pokémon on these maps."],"name":"OaksPKMNTalk4","file":"engine/pokegear/radio.asm","lineNo":202,"address":197375,"addressUsedBy":[]}