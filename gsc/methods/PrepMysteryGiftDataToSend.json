{"names":["PrepMysteryGiftDataToSend"],"callingMethods":[],"methodsCalled":["CloseSRAM","CopyBytes","CountSetBits","OpenSRAM","Random"],"methodAddressesUsed":[],"varsSet":["wca00"],"varsUsed":["sBackupMysteryGiftItem","wNumSetBits"],"varAddressesUsed":["sBackupMysteryGiftItem","sPlayerData","sPokemonData","wMysteryGiftPlayerData","wMysteryGiftPlayerDataEnd","wPlayerID","wPlayerName","wPokedexCaught"],"constantsUsed":["GS_VERSION","NAME_LENGTH"],"lines":["PrepMysteryGiftDataToSend:","\tld de, wMysteryGiftStaging","\tld a, $1 + GS_VERSION","\tld [de], a","\tinc de ; wc801","\tld a, BANK(sGameData)","\tcall OpenSRAM","\tld hl, sPlayerData + wPlayerID - wPlayerData","\tld a, [hli]","\tld [de], a","\tld b, a","\tinc de ; wc802","\tld a, [hl]","\tld [de], a","\tld c, a","\tinc de ; wc803","\tpush bc","\tld hl, sPlayerData + wPlayerName - wPlayerData","\tld bc, NAME_LENGTH","\tcall CopyBytes","\tpush de ; wc80e","\tld hl, sPokemonData + wPokedexCaught - wPokemonData","\tld b, wEndPokedexCaught - wPokedexCaught","\tcall CountSetBits","\tpop de","\tpop bc","\tld a, [wNumSetBits]","\tld [de], a","\tinc de ; wc80f","\tcall CloseSRAM","\tcall Random","\tand 1","\tld [de], a","\tinc de ; wc810","\tcall .RandomSample","\tld [de], a","\tinc de ; wc811","\tld a, c","\tld c, b","\tld b, a","\tcall .RandomSample","\tld [de], a","\tinc de ; wc812","\tld a, BANK(sBackupMysteryGiftItem)","\tcall OpenSRAM","\tld a, [sBackupMysteryGiftItem]","\tld [de], a","\tinc de","\tld a, [sBackupMysteryGiftItem + 1]","\tld [de], a","\tld a, $14","\tld [wca00], a","\tcall CloseSRAM","\tld hl, wMysteryGiftStaging","\tld de, wMysteryGiftPlayerData","\tld bc, wMysteryGiftPlayerDataEnd - wMysteryGiftPlayerData","\tjp CopyBytes","",".RandomSample:","\tpush de","\tcall Random","\tcp 10 percent","\tjr c, .tenpercent","\tcall Random","\tand %111","\tld d, a","\trl d","\tld e, $80",".loop","\trlc e","\tdec a","\tjr nz, .loop","\tld a, e","\tand c","\tjr z, .skip","\tld a, $1",".skip","\tadd d","\tjr .done","",".tenpercent","\tcall Random","\tcp 20 percent - 1","\tjr c, .twopercent","\tcall Random","\tand %011","\tld d, a","\trl d","\tld e, $80",".loop2","\trlc e","\tdec a","\tjr nz, .loop2","\tld a, e","\tand b","\tjr z, .skip2","\tld a, $1",".skip2","\tadd d","\tadd $10","\tjr .done","",".twopercent","\tcall Random","\tcp 20 percent - 1","\tjr c, .pointfourpercent","\tld a, b","\tswap a","\tand $7","\tadd $18","\tjr .done","",".pointfourpercent","\tld a, b","\tand $80","\tld a, $20","\tjr z, .done","\tld a, $21","",".done","\tpop de","\tret"],"name":"PrepMysteryGiftDataToSend","file":"engine/link/mystery_gift_2.asm","lineNo":1,"address":110446,"addressUsedBy":["DoMysteryGift"]}