{"names":["GiveDratini"],"callingMethods":[],"methodsCalled":["AddNTimes","GetFarByte"],"methodAddressesUsed":[],"varsSet":[],"varsUsed":["wScriptVar"],"varAddressesUsed":["Moves","wPartyCount"],"constantsUsed":["MON_MOVES","MON_PP","MON_SPECIES","MOVE_LENGTH","MOVE_PP","PARTYMON_STRUCT_LENGTH"],"lines":["GiveDratini:","; if wScriptVar is 0 or 1, change the moveset of the last Dratini in the party.",";  0: give it a special moveset with Extremespeed.",";  1: give it the normal moveset of a level 15 Dratini.","","\tld a, [wScriptVar]","\tcp $2","\tret nc","\tld bc, wPartyCount","\tld a, [bc]","\tld hl, MON_SPECIES","\tcall .GetNthPartyMon","\tld a, [bc]","\tld c, a","\tld de, PARTYMON_STRUCT_LENGTH",".CheckForDratini:","; start at the end of the party and search backwards for a Dratini","\tld a, [hl]","\tcp DRATINI","\tjr z, .GiveMoveset","\tld a, l","\tsub e","\tld l, a","\tld a, h","\tsbc d","\tld h, a","\tdec c","\tjr nz, .CheckForDratini","\tret","",".GiveMoveset:","\tpush hl","\tld a, [wScriptVar]","\tld hl, .Movesets","\tld bc, .Moveset1 - .Moveset0","\tcall AddNTimes","","\t; get address of mon\u0027s first move","\tpop de","\tinc de","\tinc de","",".GiveMoves:","\tld a, [hl]","\tand a ; is the move 00?","\tret z ; if so, we\u0027re done here","","\tpush hl","\tpush de","\tld [de], a ; give the Pokémon the new move","","\t; get the PP of the new move","\tdec a","\tld hl, Moves + MOVE_PP","\tld bc, MOVE_LENGTH","\tcall AddNTimes","\tld a, BANK(Moves)","\tcall GetFarByte","","\t; get the address of the move\u0027s PP and update the PP","\tld hl, MON_PP - MON_MOVES","\tadd hl, de","\tld [hl], a","","\tpop de","\tpop hl","\tinc de","\tinc hl","\tjr .GiveMoves","",".Movesets:",".Moveset0:","; Dratini does not normally learn Extremespeed. This is a special gift.","\tdb WRAP","\tdb THUNDER_WAVE","\tdb TWISTER","\tdb EXTREMESPEED","\tdb 0",".Moveset1:","; This is the normal moveset of a level 15 Dratini","\tdb WRAP","\tdb LEER","\tdb THUNDER_WAVE","\tdb TWISTER","\tdb 0","",".GetNthPartyMon:","; inputs:","; hl must be set to 0 before calling this function.","; a must be set to the number of Pokémon in the party.","","; outputs:","; returns the address of the last Pokémon in the party in hl.","; sets carry if a is 0.","","\tld de, wPartyMon1","\tadd hl, de","\tand a","\tjr z, .EmptyParty","\tdec a","\tret z","\tld de, PARTYMON_STRUCT_LENGTH",".loop","\tadd hl, de","\tdec a","\tjr nz, .loop","\tret","",".EmptyParty:","\tscf","\tret"],"name":"GiveDratini","file":"engine/events/dratini.asm","lineNo":1,"address":179923,"addressUsedBy":[]}