{"names":["FindEnemyMonsImmuneToLastCounterMove"],"callingMethods":["CheckAbleToSwitch"],"methodsCalled":["CheckTypeMatchup","GetBaseData","GetMoveAttr","GetMoveByte"],"methodAddressesUsed":[],"varsSet":["wCurSpecies","wEnemyAISwitchScore"],"varsUsed":["wCurOTMon","wEnemyAISwitchScore","wLastPlayerCounterMove","wOTPartyCount","wTypeMatchup"],"varAddressesUsed":["Moves"],"constantsUsed":["MON_HP","MOVE_POWER","PARTYMON_STRUCT_LENGTH","PARTY_LENGTH"],"lines":["FindEnemyMonsImmuneToLastCounterMove:","\tld hl, wOTPartyMon1","\tld a, [wOTPartyCount]","\tld b, a","\tld c, 1 \u003c\u003c (PARTY_LENGTH - 1)","\tld d, 0","\txor a","\tld [wEnemyAISwitchScore], a","",".loop","\tld a, [wCurOTMon]","\tcp d","\tpush hl","\tjr z, .next","","\tpush hl","\tpush bc","","\t; If the Pokemon has at least 1 HP...","\tld bc, MON_HP","\tadd hl, bc","\tpop bc","\tld a, [hli]","\tor [hl]","\tpop hl","\tjr z, .next","","\tld a, [hl]","\tld [wCurSpecies], a","\tcall GetBaseData","","\t; the player\u0027s last move is damaging...","\tld a, [wLastPlayerCounterMove]","\tdec a","\tld hl, Moves + MOVE_POWER","\tcall GetMoveAttr","\tand a","\tjr z, .next","","\t; and the Pokemon is immune to it...","\tinc hl","\tcall GetMoveByte","\tld hl, wBaseType","\tcall CheckTypeMatchup","\tld a, [wTypeMatchup]","\tand a","\tjr nz, .next","","\t; ... encourage that Pokemon.","\tld a, [wEnemyAISwitchScore]","\tor c","\tld [wEnemyAISwitchScore], a",".next","\tpop hl","\tdec b","\tret z","","\tpush bc","\tld bc, PARTYMON_STRUCT_LENGTH","\tadd hl, bc","\tpop bc","","\tinc d","\tsrl c","\tjr .loop"],"name":"FindEnemyMonsImmuneToLastCounterMove","file":"engine/battle/ai/switch.asm","lineNo":342,"address":117702,"addressUsedBy":[]}