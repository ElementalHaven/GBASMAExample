{"names":["BattleCommand_Substitute"],"callingMethods":[],"methodsCalled":["BattleCommand_MoveDelay","BattleCommand_RaiseSub","BattleCommand_RaiseSubNoAnim","CheckUserIsCharging","GetBattleVar","GetBattleVarAddr","LoadAnim","RefreshBattleHuds","StdBattleTextbox","_CheckBattleScene"],"methodAddressesUsed":[],"varsSet":["wFXAnimID","wKickCounter","wNumHits"],"varsUsed":["hBattleTurn"],"varAddressesUsed":["wBattleMonMaxHP","wEnemyMonMaxHP","wEnemySubstituteHP","wEnemyTrappingMove","wEnemyWrapCount","wPlayerSubstituteHP","wPlayerTrappingMove","wPlayerWrapCount"],"constantsUsed":["BATTLE_VARS_SUBSTATUS4","SUBSTITUTE"],"lines":["BattleCommand_Substitute:","; substitute","","\tcall BattleCommand_MoveDelay","\tld hl, wBattleMonMaxHP","\tld de, wPlayerSubstituteHP","\tldh a, [hBattleTurn]","\tand a","\tjr z, .got_hp","\tld hl, wEnemyMonMaxHP","\tld de, wEnemySubstituteHP",".got_hp","","\tld a, BATTLE_VARS_SUBSTATUS4","\tcall GetBattleVar","\tbit SUBSTATUS_SUBSTITUTE, a","\tjr nz, .already_has_sub","","\tld a, [hli]","\tld b, [hl]","\tsrl a","\trr b","\tsrl a","\trr b","\tdec hl","\tdec hl","\tld a, b","\tld [de], a","\tld a, [hld]","\tsub b","\tld e, a","\tld a, [hl]","\tsbc 0","\tld d, a","\tjr c, .too_weak_to_sub","\tld a, d","\tor e","\tjr z, .too_weak_to_sub","\tld [hl], d","\tinc hl","\tld [hl], e","","\tld a, BATTLE_VARS_SUBSTATUS4","\tcall GetBattleVarAddr","\tset SUBSTATUS_SUBSTITUTE, [hl]","","\tld hl, wPlayerWrapCount","\tld de, wPlayerTrappingMove","\tldh a, [hBattleTurn]","\tand a","\tjr z, .player","\tld hl, wEnemyWrapCount","\tld de, wEnemyTrappingMove",".player","","\txor a","\tld [hl], a","\tld [de], a","\tcall _CheckBattleScene","\tjr c, .no_anim","","\txor a","\tld [wNumHits], a","\tld [wFXAnimID + 1], a","\tld [wKickCounter], a","\tld a, SUBSTITUTE","\tcall LoadAnim","\tjr .finish","",".no_anim","\tcall BattleCommand_RaiseSubNoAnim",".finish","\tld hl, MadeSubstituteText","\tcall StdBattleTextbox","\tjp RefreshBattleHuds","",".already_has_sub","\tcall CheckUserIsCharging","\tcall nz, BattleCommand_RaiseSub","\tld hl, HasSubstituteText","\tjr .jp_stdbattletextbox","",".too_weak_to_sub","\tcall CheckUserIsCharging","\tcall nz, BattleCommand_RaiseSub","\tld hl, TooWeakSubText",".jp_stdbattletextbox","\tjp StdBattleTextbox"],"name":"BattleCommand_Substitute","file":"engine/battle/move_effects/substitute.asm","lineNo":1,"address":122422,"addressUsedBy":[]}