{"names":["BattleCommand_StatDown"],"callingMethods":["BattleCommand_AccuracyDown","BattleCommand_AccuracyDown2","BattleCommand_AttackDown","BattleCommand_AttackDown2","BattleCommand_DefenseDown","BattleCommand_DefenseDown2","BattleCommand_EvasionDown","BattleCommand_EvasionDown2","BattleCommand_SpecialAttackDown","BattleCommand_SpecialAttackDown2","BattleCommand_SpecialDefenseDown","BattleCommand_SpecialDefenseDown2","BattleCommand_SpeedDown","BattleCommand_SpeedDown2"],"methodsCalled":["BattleRandom","CheckHiddenOpponent","CheckMist","CheckSubstituteOpp","GetBattleVar","TryLowerStat"],"methodAddressesUsed":[],"varsSet":["wAttackMissed","wFailedMessage","wLoweredStat"],"varsUsed":["hBattleTurn","wAttackMissed","wEffectFailed","wInBattleTowerBattle","wLinkMode","wLoweredStat","wPlayerSubStatus5"],"varAddressesUsed":["wBattleMonAttack","wEnemyMonAttack"],"constantsUsed":["BATTLE_VARS_MOVE_EFFECT"],"lines":["BattleCommand_StatDown:","; statdown","","\tld [wLoweredStat], a","","\tcall CheckMist","\tjp nz, .Mist","","\tld hl, wEnemyStatLevels","\tldh a, [hBattleTurn]","\tand a","\tjr z, .GetStatLevel","\tld hl, wPlayerStatLevels","",".GetStatLevel:","; Attempt to lower the stat.","\tld a, [wLoweredStat]","\tand $f","\tld c, a","\tld b, 0","\tadd hl, bc","\tld b, [hl]","\tdec b","\tjp z, .CantLower","","; Sharply lower the stat if applicable.","\tld a, [wLoweredStat]","\tand $f0","\tjr z, .ComputerMiss","\tdec b","\tjr nz, .ComputerMiss","\tinc b","",".ComputerMiss:","; Computer opponents have a 25% chance of failing.","\tldh a, [hBattleTurn]","\tand a","\tjr z, .DidntMiss","","\tld a, [wLinkMode]","\tand a","\tjr nz, .DidntMiss","","\tld a, [wInBattleTowerBattle]","\tand a","\tjr nz, .DidntMiss","","; Lock-On still always works.","\tld a, [wPlayerSubStatus5]","\tbit SUBSTATUS_LOCK_ON, a","\tjr nz, .DidntMiss","","; Attacking moves that also lower accuracy are unaffected.","\tld a, BATTLE_VARS_MOVE_EFFECT","\tcall GetBattleVar","\tcp EFFECT_ACCURACY_DOWN_HIT","\tjr z, .DidntMiss","","\tcall BattleRandom","\tcp 25 percent + 1 ; 25% chance AI fails","\tjr c, .Failed","",".DidntMiss:","\tcall CheckSubstituteOpp","\tjr nz, .Failed","","\tld a, [wAttackMissed]","\tand a","\tjr nz, .Failed","","\tld a, [wEffectFailed]","\tand a","\tjr nz, .Failed","","\tcall CheckHiddenOpponent","\tjr nz, .Failed","","; Accuracy/Evasion reduction don\u0027t involve stats.","\tld [hl], b","\tld a, c","\tcp ACCURACY","\tjr nc, .Hit","","\tpush hl","\tld hl, wEnemyMonAttack + 1","\tld de, wEnemyStats","\tldh a, [hBattleTurn]","\tand a","\tjr z, .do_enemy","\tld hl, wBattleMonAttack + 1","\tld de, wPlayerStats",".do_enemy","\tcall TryLowerStat","\tpop hl","\tjr z, .CouldntLower","",".Hit:","\txor a","\tld [wFailedMessage], a","\tret","",".CouldntLower:","\tinc [hl]",".CantLower:","\tld a, 3","\tld [wFailedMessage], a","\tld a, 1","\tld [wAttackMissed], a","\tret","",".Failed:","\tld a, 1","\tld [wFailedMessage], a","\tld [wAttackMissed], a","\tret","",".Mist:","\tld a, 2","\tld [wFailedMessage], a","\tld a, 1","\tld [wAttackMissed], a","\tret"],"name":"BattleCommand_StatDown","file":"engine/battle/effect_commands.asm","lineNo":4388,"address":120909,"addressUsedBy":[]}