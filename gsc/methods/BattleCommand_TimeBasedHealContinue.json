{"names":["BattleCommand_TimeBasedHealContinue"],"callingMethods":["BattleCommand_HealDay","BattleCommand_HealMorn","BattleCommand_HealNite"],"methodsCalled":["AnimateCurrentMove","AnimateFailedMove","BattleCommand_SwitchTurn","CompareBytes","FarCall","StdBattleTextbox","UpdateUserInParty"],"methodAddressesUsed":["GetMaxHP","RestoreHP"],"varsSet":[],"varsUsed":["hBattleTurn","wBattleWeather","wLinkMode","wTimeOfDay"],"varAddressesUsed":["wBattleMonHP","wBattleMonMaxHP","wEnemyMonHP","wEnemyMonMaxHP"],"constantsUsed":[],"lines":["BattleCommand_TimeBasedHealContinue:","; Time- and weather-sensitive heal.","","\tld hl, wBattleMonMaxHP","\tld de, wBattleMonHP","\tldh a, [hBattleTurn]","\tand a","\tjr z, .start","\tld hl, wEnemyMonMaxHP","\tld de, wEnemyMonHP","",".start","; Index for .Multipliers","; Default restores half max HP.","\tld c, 2","","; Don\u0027t bother healing if HP is already full.","\tpush bc","\tcall CompareBytes","\tpop bc","\tjr z, .Full","","; Don\u0027t factor in time of day in link battles.","\tld a, [wLinkMode]","\tand a","\tjr nz, .Weather","","\tld a, [wTimeOfDay]","\tcp b","\tjr z, .Weather","\tdec c ; double","",".Weather:","\tld a, [wBattleWeather]","\tand a","\tjr z, .Heal","","; x2 in sun","; /2 in rain/sandstorm","\tinc c","\tcp WEATHER_SUN","\tjr z, .Heal","\tdec c","\tdec c","",".Heal:","\tld b, 0","\tld hl, .Multipliers","\tadd hl, bc","\tadd hl, bc","","\tld a, [hli]","\tld h, [hl]","\tld l, a","\tld a, BANK(GetMaxHP)","\trst FarCall","","\tcall AnimateCurrentMove","\tcall BattleCommand_SwitchTurn","","\tcallfar RestoreHP","","\tcall BattleCommand_SwitchTurn","\tcall UpdateUserInParty","","; \u0027regained health!\u0027","\tld hl, RegainedHealthText","\tjp StdBattleTextbox","",".Full:","\tcall AnimateFailedMove","","; \u0027hp is full!\u0027","\tld hl, HPIsFullText","\tjp StdBattleTextbox","",".Multipliers:","\tdw GetEighthMaxHP","\tdw GetQuarterMaxHP","\tdw GetHalfMaxHP","\tdw GetMaxHP"],"name":"BattleCommand_TimeBasedHealContinue","file":"engine/battle/effect_commands.asm","lineNo":6542,"address":124030,"addressUsedBy":[]}