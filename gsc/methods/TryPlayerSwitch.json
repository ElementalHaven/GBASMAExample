{"names":["TryPlayerSwitch"],"callingMethods":["BattleMenuPKMN_Loop"],"methodsCalled":["BattleMenuPKMN_Loop","CheckIfCurPartyMonIsFitToFight","ClearPalettes","ClearSprites","CloseWindow","DelayFrame","GetMemSGBLayout","SetPalettes","StdBattleTextbox","_LoadHPBar"],"methodAddressesUsed":[],"fallsInto":"PlayerSwitch","varsSet":["wBattlePlayerAction","wCurBattleMon","wLastPlayerMon"],"varsUsed":["wCurBattleMon","wCurPartyMon","wEnemySubStatus5","wPlayerWrapCount"],"varAddressesUsed":["BattleText_MonCantBeRecalled","BattleText_MonIsAlreadyOut"],"constantsUsed":["BATTLEPLAYERACTION_SWITCH"],"lines":["TryPlayerSwitch:","\tld a, [wCurBattleMon]","\tld d, a","\tld a, [wCurPartyMon]","\tcp d","\tjr nz, .check_trapped","\tld hl, BattleText_MonIsAlreadyOut","\tcall StdBattleTextbox","\tjp BattleMenuPKMN_Loop","",".check_trapped","\tld a, [wPlayerWrapCount]","\tand a","\tjr nz, .trapped","\tld a, [wEnemySubStatus5]","\tbit SUBSTATUS_CANT_RUN, a","\tjr z, .try_switch","",".trapped","\tld hl, BattleText_MonCantBeRecalled","\tcall StdBattleTextbox","\tjp BattleMenuPKMN_Loop","",".try_switch","\tcall CheckIfCurPartyMonIsFitToFight","\tjp z, BattleMenuPKMN_Loop","\tld a, [wCurBattleMon]","\tld [wLastPlayerMon], a","\tld a, BATTLEPLAYERACTION_SWITCH","\tld [wBattlePlayerAction], a","\tcall ClearPalettes","\tcall DelayFrame","\tcall ClearSprites","\tcall _LoadHPBar","\tcall CloseWindow","\tcall GetMemSGBLayout","\tcall SetPalettes","\tld a, [wCurPartyMon]","\tld [wCurBattleMon], a","PlayerSwitch:"],"name":"TryPlayerSwitch","file":"engine/battle/core.asm","lineNo":5135,"address":138329,"addressUsedBy":[]}