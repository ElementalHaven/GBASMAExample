{"names":["HaircutOrGrooming"],"callingMethods":["DaisysGrooming","OlderHaircutBrother","YoungerHaircutBrother"],"methodsCalled":["ChangeHappiness","CopyPokemonName_Buffer1_Buffer3","FarCall","GetCurNick","Random"],"methodAddressesUsed":["SelectMonFromParty"],"varsSet":["wScriptVar"],"varsUsed":["wCurPartySpecies"],"varAddressesUsed":[],"constantsUsed":[],"lines":["HaircutOrGrooming:","\tpush hl","\tfarcall SelectMonFromParty","\tpop hl","\tjr c, .nope","\tld a, [wCurPartySpecies]","\tcp EGG","\tjr z, .egg","\tpush hl","\tcall GetCurNick","\tcall CopyPokemonName_Buffer1_Buffer3","\tpop hl","\tcall Random","; Bug: Subtracting $ff from $ff fails to set c.","; This can result in overflow into the next data array.","; In the case of getting a grooming from Daisy, we bleed","; into CopyPokemonName_Buffer1_Buffer3, which passes","; $d0 to ChangeHappiness and returns $73 to the script.","; The end result is that there is a 0.4% chance your","; Pokemon\u0027s happiness will not change at all.",".loop","\tsub [hl]","\tjr c, .ok","\tinc hl","\tinc hl","\tinc hl","\tjr .loop","",".ok","\tinc hl","\tld a, [hli]","\tld [wScriptVar], a","\tld c, [hl]","\tcall ChangeHappiness","\tret","",".nope","\txor a","\tld [wScriptVar], a","\tret","",".egg","\tld a, 1","\tld [wScriptVar], a","\tret"],"name":"HaircutOrGrooming","file":"engine/events/haircut.asm","lineNo":27,"address":66423,"addressUsedBy":[]}