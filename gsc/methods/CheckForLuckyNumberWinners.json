{"names":["CheckForLuckyNumberWinners"],"callingMethods":[],"methodsCalled":["CloseSRAM","FarCall","GetPokemonName","OpenSRAM","PrintNum","PrintText"],"methodAddressesUsed":["StubbedTrainerRankings_LuckyNumberShow"],"varsSet":["wCurPartySpecies","wNamedObjectIndexBuffer","wScriptVar","wTempByteValue"],"varsUsed":["sBoxCount","wCurBox","wCurPartySpecies","wPartyCount","wScriptVar","wTempByteValue"],"varAddressesUsed":["sBoxMon1ID","sBoxSpecies","wBuffer1","wLuckyIDNumber","wLuckyNumberDigitsBuffer","wPartyMon1ID","wPartySpecies"],"constantsUsed":["BOXMON_STRUCT_LENGTH","MON_ID","MON_SPECIES","PARTYMON_STRUCT_LENGTH","PRINTNUM_LEADINGZEROS","TRUE"],"lines":["CheckForLuckyNumberWinners:","\txor a","\tld [wScriptVar], a","\tld [wTempByteValue], a","\tld a, [wPartyCount]","\tand a","\tret z","\tld d, a","\tld hl, wPartyMon1ID","\tld bc, wPartySpecies",".PartyLoop:","\tld a, [bc]","\tinc bc","\tcp EGG","\tcall nz, .CompareLuckyNumberToMonID","\tpush bc","\tld bc, PARTYMON_STRUCT_LENGTH","\tadd hl, bc","\tpop bc","\tdec d","\tjr nz, .PartyLoop","\tld a, BANK(sBox)","\tcall OpenSRAM","\tld a, [sBoxCount]","\tand a","\tjr z, .SkipOpenBox","\tld d, a","\tld hl, sBoxMon1ID","\tld bc, sBoxSpecies",".OpenBoxLoop:","\tld a, [bc]","\tinc bc","\tcp EGG","\tjr z, .SkipOpenBoxMon","\tcall .CompareLuckyNumberToMonID","\tjr nc, .SkipOpenBoxMon","\tld a, TRUE","\tld [wTempByteValue], a","",".SkipOpenBoxMon:","\tpush bc","\tld bc, BOXMON_STRUCT_LENGTH","\tadd hl, bc","\tpop bc","\tdec d","\tjr nz, .OpenBoxLoop","",".SkipOpenBox:","\tcall CloseSRAM","\tld c, $0",".BoxesLoop:","\tld a, [wCurBox]","\tand $f","\tcp c","\tjr z, .SkipBox","\tld hl, .BoxBankAddresses","\tld b, 0","\tadd hl, bc","\tadd hl, bc","\tadd hl, bc","\tld a, [hli]","\tcall OpenSRAM","\tld a, [hli]","\tld h, [hl]","\tld l, a ; hl now contains the address of the loaded box in SRAM","\tld a, [hl]","\tand a","\tjr z, .SkipBox ; no mons in this box","\tpush bc","\tld b, h","\tld c, l","\tinc bc","\tld de, sBoxMon1ID - sBox","\tadd hl, de","\tld d, a",".BoxNLoop:","\tld a, [bc]","\tinc bc","\tcp EGG","\tjr z, .SkipBoxMon","","\tcall .CompareLuckyNumberToMonID ; sets wScriptVar and wCurPartySpecies appropriately","\tjr nc, .SkipBoxMon","\tld a, TRUE","\tld [wTempByteValue], a","",".SkipBoxMon:","\tpush bc","\tld bc, BOXMON_STRUCT_LENGTH","\tadd hl, bc","\tpop bc","\tdec d","\tjr nz, .BoxNLoop","\tpop bc","",".SkipBox:","\tinc c","\tld a, c","\tcp NUM_BOXES","\tjr c, .BoxesLoop","","\tcall CloseSRAM","\tld a, [wScriptVar]","\tand a","\tret z ; found nothing","","\tfarcall StubbedTrainerRankings_LuckyNumberShow","\tld a, [wTempByteValue]","\tand a","\tpush af","\tld a, [wCurPartySpecies]","\tld [wNamedObjectIndexBuffer], a","\tcall GetPokemonName","\tld hl, .LuckyNumberMatchPartyText","\tpop af","\tjr z, .print","\tld hl, .LuckyNumberMatchPCText","",".print","\tjp PrintText","",".CompareLuckyNumberToMonID:","\tpush bc","\tpush de","\tpush hl","\tld d, h","\tld e, l","\tld hl, wBuffer1","\tlb bc, PRINTNUM_LEADINGZEROS | 2, 5","\tcall PrintNum","\tld hl, wLuckyNumberDigitsBuffer","\tld de, wLuckyIDNumber","\tlb bc, PRINTNUM_LEADINGZEROS | 2, 5","\tcall PrintNum","\tld b, 5","\tld c, 0","\tld hl, wLuckyNumberDigitsBuffer + 4","\tld de, wBuffer1 + 4",".loop","\tld a, [de]","\tcp [hl]","\tjr nz, .done","\tdec de","\tdec hl","\tinc c","\tdec b","\tjr nz, .loop","",".done","\tpop hl","\tpush hl","\tld de, MON_SPECIES - MON_ID","\tadd hl, de","\tld a, [hl]","\tpop hl","\tpop de","\tpush af","\tld a, c","\tld b, 1","\tcp 5","\tjr z, .okay","\tld b, 2","\tcp 3","\tjr nc, .okay","\tld b, 3","\tcp 2","\tjr nz, .nomatch","",".okay","\tinc b","\tld a, [wScriptVar]","\tand a","\tjr z, .bettermatch","\tcp b","\tjr c, .nomatch","",".bettermatch","\tdec b","\tld a, b","\tld [wScriptVar], a","\tpop bc","\tld a, b","\tld [wCurPartySpecies], a","\tpop bc","\tscf","\tret","",".nomatch","\tpop bc","\tpop bc","\tand a","\tret","",".BoxBankAddresses:","\tdba sBox1","\tdba sBox2","\tdba sBox3","\tdba sBox4","\tdba sBox5","\tdba sBox6","\tdba sBox7","\tdba sBox8","\tdba sBox9","\tdba sBox10","\tdba sBox11","\tdba sBox12","\tdba sBox13","\tdba sBox14","",".LuckyNumberMatchPartyText:","\ttext_far _LuckyNumberMatchPartyText","\ttext_end","",".LuckyNumberMatchPCText:","\ttext_far _LuckyNumberMatchPCText","\ttext_end"],"name":"CheckForLuckyNumberWinners","file":"engine/events/lucky_number.asm","lineNo":1,"address":157089,"addressUsedBy":[]}