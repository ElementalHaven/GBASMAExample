{"names":["PursuitSwitch"],"callingMethods":["BattleMonEntrance"],"methodsCalled":["EnemyMonFaintedAnimation","FarCall","GetBattleVar","GetBattleVarAddr","GetMoveEffect","PlaySFX","PlayStereoCry","PlayerMonFaintedAnimation","Predef","StdBattleTextbox","UpdateBattleMon","WaitSFX"],"methodAddressesUsed":["DoEnemyTurn","DoPlayerTurn"],"varsSet":["wCryTracks","wCurBattleMon"],"varsUsed":["hBattleTurn","wBattleMonSpecies","wCurBattleMon","wLastPlayerMon"],"varAddressesUsed":["BattleText_EnemyMonFainted","BattleText_MonFainted","SmallFarFlagActionPredef","wBattleMonHP","wBattleParticipantsNotFainted","wEnemyMonHP"],"constantsUsed":["BATTLE_VARS_MOVE","RESET_FLAG","SFX_FAINT","SFX_KINESIS"],"lines":["PursuitSwitch:","\tld a, BATTLE_VARS_MOVE","\tcall GetBattleVar","\tld b, a","\tcall GetMoveEffect","\tld a, b","\tcp EFFECT_PURSUIT","\tjr nz, .done","","\tld a, [wCurBattleMon]","\tpush af","","\tld hl, DoPlayerTurn","\tldh a, [hBattleTurn]","\tand a","\tjr z, .do_turn","\tld hl, DoEnemyTurn","\tld a, [wLastPlayerMon]","\tld [wCurBattleMon], a",".do_turn","\tld a, BANK(DoPlayerTurn) ; aka BANK(DoEnemyTurn)","\trst FarCall","","\tld a, BATTLE_VARS_MOVE","\tcall GetBattleVarAddr","\tld a, $ff","\tld [hl], a","","\tpop af","\tld [wCurBattleMon], a","","\tldh a, [hBattleTurn]","\tand a","\tjr z, .check_enemy_fainted","","\tld a, [wLastPlayerMon]","\tcall UpdateBattleMon","\tld hl, wBattleMonHP","\tld a, [hli]","\tor [hl]","\tjr nz, .done","","\tld a, $f0","\tld [wCryTracks], a","\tld a, [wBattleMonSpecies]","\tcall PlayStereoCry","\tld a, [wLastPlayerMon]","\tld c, a","\tld hl, wBattleParticipantsNotFainted","\tld b, RESET_FLAG","\tpredef SmallFarFlagAction","\tcall PlayerMonFaintedAnimation","\tld hl, BattleText_MonFainted","\tjr .done_fainted","",".check_enemy_fainted","\tld hl, wEnemyMonHP","\tld a, [hli]","\tor [hl]","\tjr nz, .done","","\tld de, SFX_KINESIS","\tcall PlaySFX","\tcall WaitSFX","\tld de, SFX_FAINT","\tcall PlaySFX","\tcall WaitSFX","\tcall EnemyMonFaintedAnimation","\tld hl, BattleText_EnemyMonFainted","",".done_fainted","\tcall StdBattleTextbox","\tscf","\tret","",".done","\tand a","\tret"],"name":"PursuitSwitch","file":"engine/battle/core.asm","lineNo":4140,"address":137478,"addressUsedBy":["AI_Switch"]}