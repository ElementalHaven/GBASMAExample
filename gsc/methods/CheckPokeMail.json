{"names":["CheckPokeMail"],"callingMethods":[],"methodsCalled":["AddNTimes","CloseSRAM","FarCall","GetFarByte","OpenSRAM"],"methodAddressesUsed":["CheckCurPartyMonFainted","ItemIsMail","RemoveMonFromPartyOrBox","SelectMonFromParty"],"varsSet":["wPokemonWithdrawDepositParameter","wScriptVar","wTempByteValue"],"varsUsed":["wCurPartyMon","wTempByteValue"],"varAddressesUsed":["wPartyMon1Item"],"constantsUsed":["MAIL_MSG_LENGTH","MAIL_STRUCT_LENGTH","PARTYMON_STRUCT_LENGTH","POKEMAIL_CORRECT","POKEMAIL_LAST_MON","POKEMAIL_NO_MAIL","POKEMAIL_REFUSED","POKEMAIL_WRONG_MAIL"],"lines":["CheckPokeMail::","\tpush bc","\tpush de","\tfarcall SelectMonFromParty","\tld a, POKEMAIL_REFUSED","\tjr c, .pop_return","","\tld a, [wCurPartyMon]","\tld hl, wPartyMon1Item","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall AddNTimes","\tld d, [hl]","\tfarcall ItemIsMail","\tld a, POKEMAIL_NO_MAIL","\tjr nc, .pop_return","","\tld a, BANK(sPartyMail)","\tcall OpenSRAM","\tld a, [wCurPartyMon]","\tld hl, sPartyMail","\tld bc, MAIL_STRUCT_LENGTH","\tcall AddNTimes","\tld d, h","\tld e, l","\tpop hl","\tpop bc","","; Compare the mail message, byte for byte, with the expected message.","\tld a, MAIL_MSG_LENGTH","\tld [wTempByteValue], a",".loop","\tld a, [de]","\tld c, a","\tld a, b","\tcall GetFarByte","\tcp \"@\"","\tjr z, .done","\tcp c","\tld a, POKEMAIL_WRONG_MAIL","\tjr nz, .close_sram_return","\tinc hl","\tinc de","\tld a, [wTempByteValue]","\tdec a","\tld [wTempByteValue], a","\tjr nz, .loop","",".done","\tfarcall CheckCurPartyMonFainted","\tld a, POKEMAIL_LAST_MON","\tjr c, .close_sram_return","\txor a ; REMOVE_PARTY","\tld [wPokemonWithdrawDepositParameter], a","\tfarcall RemoveMonFromPartyOrBox","\tld a, POKEMAIL_CORRECT","",".close_sram_return","\tcall CloseSRAM","\tjr .return","",".pop_return","\tpop de","\tpop bc","",".return","\tld [wScriptVar], a","\tret"],"name":"CheckPokeMail","file":"engine/pokemon/mail.asm","lineNo":123,"address":148510,"addressUsedBy":[]}