{"names":["Pokedex_GetArea"],"callingMethods":[],"methodsCalled":["ByteFill","ClearSprites","CopyBytes","DelayFrame","FarCall","FillJohtoMap","FillKantoMap","GetPokemonName","GetSGBLayout","JoyTextDelay","LoadTownMapGFX","PlaceString","Request2bpp","SetPalettes","TownMapBGUpdate","TownMapPals"],"methodAddressesUsed":["FindNest","GetLandmarkCoords","GetPlayerIcon"],"varsSet":["hBGMapMode","hInMenu","hWY","wTownMapCursorLandmark","wTownMapPlayerIconLandmark"],"varsUsed":["hJoypadDown","hVBlankCounter","hWY","wPlayerGender","wStatusFlags","wTownMapCursorLandmark","wTownMapPlayerIconLandmark"],"varAddressesUsed":["hJoyPressed","vTiles0"],"constantsUsed":["KANTO_REGION","PAL_OW_RED","SCGB_POKEGEAR_PALS","SCREEN_WIDTH","tile"],"lines":["Pokedex_GetArea:","; e: Current landmark","\tld a, [wTownMapPlayerIconLandmark]","\tpush af","\tld a, [wTownMapCursorLandmark]","\tpush af","\tld a, e","\tld [wTownMapPlayerIconLandmark], a","\tcall ClearSprites","\txor a","\tldh [hBGMapMode], a","\tld a, $1","\tldh [hInMenu], a","\tld de, PokedexNestIconGFX","\tld hl, vTiles0 tile $7f","\tlb bc, BANK(PokedexNestIconGFX), 1","\tcall Request2bpp","\tcall .GetPlayerOrFastShipIcon","\tld hl, vTiles0 tile $78","\tld c, 4","\tcall Request2bpp","\tcall LoadTownMapGFX","\tcall FillKantoMap","\tcall .PlaceString_MonsNest","\tcall TownMapPals","\thlbgcoord 0, 0, vBGMap1","\tcall TownMapBGUpdate","\tcall FillJohtoMap","\tcall .PlaceString_MonsNest","\tcall TownMapPals","\thlbgcoord 0, 0","\tcall TownMapBGUpdate","\tld b, SCGB_POKEGEAR_PALS","\tcall GetSGBLayout","\tcall SetPalettes","\txor a","\tldh [hBGMapMode], a","\txor a ; JOHTO_REGION","\tcall .GetAndPlaceNest",".loop","\tcall JoyTextDelay","\tld hl, hJoyPressed","\tld a, [hl]","\tand A_BUTTON | B_BUTTON","\tjr nz, .a_b","\tldh a, [hJoypadDown]","\tand SELECT","\tjr nz, .select","\tcall .LeftRightInput","\tcall .BlinkNestIcons","\tjr .next","",".select","\tcall .HideNestsShowPlayer",".next","\tcall DelayFrame","\tjr .loop","",".a_b","\tcall ClearSprites","\tpop af","\tld [wTownMapCursorLandmark], a","\tpop af","\tld [wTownMapPlayerIconLandmark], a","\tret","",".LeftRightInput:","\tld a, [hl]","\tand D_LEFT","\tjr nz, .left","\tld a, [hl]","\tand D_RIGHT","\tjr nz, .right","\tret","",".left","\tldh a, [hWY]","\tcp $90","\tret z","\tcall ClearSprites","\tld a, $90","\tldh [hWY], a","\txor a ; JOHTO_REGION","\tcall .GetAndPlaceNest","\tret","",".right","\tld a, [wStatusFlags]","\tbit STATUSFLAGS_HALL_OF_FAME_F, a","\tret z","\tldh a, [hWY]","\tand a","\tret z","\tcall ClearSprites","\txor a","\tldh [hWY], a","\tld a, KANTO_REGION","\tcall .GetAndPlaceNest","\tret","",".BlinkNestIcons:","\tldh a, [hVBlankCounter]","\tld e, a","\tand $f","\tret nz","\tld a, e","\tand $10","\tjr nz, .copy_sprites","\tcall ClearSprites","\tret","",".copy_sprites","\thlcoord 0, 0","\tld de, wVirtualOAM","\tld bc, wVirtualOAMEnd - wVirtualOAM","\tcall CopyBytes","\tret","",".PlaceString_MonsNest:","\thlcoord 0, 0","\tld bc, SCREEN_WIDTH","\tld a, \" \"","\tcall ByteFill","\thlcoord 0, 1","\tld a, $06","\tld [hli], a","\tld bc, SCREEN_WIDTH - 2","\tld a, $07","\tcall ByteFill","\tld [hl], $17","\tcall GetPokemonName","\thlcoord 2, 0","\tcall PlaceString","\tld h, b","\tld l, c","\tld de, .String_SNest","\tcall PlaceString","\tret","",".String_SNest:","\tdb \"\u0027S NEST@\"","",".GetAndPlaceNest:","\tld [wTownMapCursorLandmark], a","\tld e, a","\tfarcall FindNest ; load nest landmarks into wTilemap[0,0]","\tdecoord 0, 0","\tld hl, wVirtualOAMSprite00",".nestloop","\tld a, [de]","\tand a","\tjr z, .done_nest","\tpush de","\tld e, a","\tpush hl","\tfarcall GetLandmarkCoords","\tpop hl","\t; load into OAM","\tld a, d","\tsub 4","\tld [hli], a ; y","\tld a, e","\tsub 4","\tld [hli], a ; x","\tld a, $7f ; nest icon","\tld [hli], a ; tile id","\txor a","\tld [hli], a ; attributes","\t; next","\tpop de","\tinc de","\tjr .nestloop","",".done_nest","\tld hl, wVirtualOAM","\tdecoord 0, 0","\tld bc, wVirtualOAMEnd - wVirtualOAM","\tcall CopyBytes","\tret","",".HideNestsShowPlayer:","\tcall .CheckPlayerLocation","\tret c","\tld a, [wTownMapPlayerIconLandmark]","\tld e, a","\tfarcall GetLandmarkCoords","\tld c, e","\tld b, d","\tld de, .PlayerOAM","\tld hl, wVirtualOAMSprite00",".ShowPlayerLoop:","\tld a, [de]","\tcp $80","\tjr z, .clear_oam","\tadd b","\tld [hli], a ; y","\tinc de","\tld a, [de]","\tadd c","\tld [hli], a ; x","\tinc de","\tld a, [de]","\tadd $78 ; where the player\u0027s sprite is loaded","\tld [hli], a ; tile id","\tinc de","\tpush bc","\tld c, PAL_OW_RED","\tld a, [wPlayerGender]","\tbit PLAYERGENDER_FEMALE_F, a","\tjr z, .male","\tinc c ; PAL_OW_BLUE",".male","\tld a, c","\tld [hli], a ; attributes","\tpop bc","\tjr .ShowPlayerLoop","",".clear_oam","\tld hl, wVirtualOAMSprite04","\tld bc, wVirtualOAMEnd - wVirtualOAMSprite04","\txor a","\tcall ByteFill","\tret","",".PlayerOAM:","\t; y pxl, x pxl, tile offset","\tdb -1 * 8, -1 * 8, 0 ; top left","\tdb -1 * 8,  0 * 8, 1 ; top right","\tdb  0 * 8, -1 * 8, 2 ; bottom left","\tdb  0 * 8,  0 * 8, 3 ; bottom right","\tdb $80 ; terminator","",".CheckPlayerLocation:","; Don\u0027t show the player\u0027s sprite if you\u0027re","; not in the same region as what\u0027s currently","; on the screen.","\tld a, [wTownMapPlayerIconLandmark]","\tcp LANDMARK_FAST_SHIP","\tjr z, .johto","\tcp KANTO_LANDMARK","\tjr c, .johto",".kanto","\tld a, [wTownMapCursorLandmark]","\tand a","\tjr z, .clear","\tjr .ok","",".johto","\tld a, [wTownMapCursorLandmark]","\tand a","\tjr nz, .clear",".ok","\tand a","\tret","",".clear","\tld hl, wVirtualOAM","\tld bc, wVirtualOAMEnd - wVirtualOAM","\txor a","\tcall ByteFill","\tscf","\tret","",".GetPlayerOrFastShipIcon:","\tld a, [wTownMapPlayerIconLandmark]","\tcp LANDMARK_FAST_SHIP","\tjr z, .FastShip","\tfarcall GetPlayerIcon","\tret","",".FastShip:","\tld de, FastShipGFX","\tld b, BANK(FastShipGFX)","\tret"],"name":"Pokedex_GetArea","file":"engine/pokegear/pokegear.asm","lineNo":2355,"address":190806,"addressUsedBy":[]}