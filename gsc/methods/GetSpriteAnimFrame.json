{"names":["GetSpriteAnimFrame"],"callingMethods":["UpdateAnimFrame"],"methodsCalled":[],"methodAddressesUsed":[],"varsSet":["wCurSpriteOAMFlags"],"varsUsed":[],"varAddressesUsed":["SpriteAnimFrameData"],"constantsUsed":["SPRITEANIMSTRUCT_DURATION","SPRITEANIMSTRUCT_DURATIONOFFSET","SPRITEANIMSTRUCT_FRAME","SPRITEANIMSTRUCT_FRAMESET_ID"],"lines":["GetSpriteAnimFrame:",".loop","\tld hl, SPRITEANIMSTRUCT_DURATION","\tadd hl, bc","\tld a, [hl]","\tand a","\tjr z, .next_frame ; finished the current sequence","\tdec [hl]","\tcall .GetPointer ; load pointer from SpriteAnimFrameData","\tld a, [hli]","\tpush af","\tjr .okay","",".next_frame","\tld hl, SPRITEANIMSTRUCT_FRAME","\tadd hl, bc","\tinc [hl]","\tcall .GetPointer ; load pointer from SpriteAnimFrameData","\tld a, [hli]","\tcp dorestart_command","\tjr z, .restart","\tcp endanim_command","\tjr z, .repeat_last","","\tpush af","\tld a, [hl]","\tpush hl","\tand $ff ^ (Y_FLIP \u003c\u003c 1 | X_FLIP \u003c\u003c 1)","\tld hl, SPRITEANIMSTRUCT_DURATIONOFFSET","\tadd hl, bc","\tadd [hl]","\tld hl, SPRITEANIMSTRUCT_DURATION","\tadd hl, bc","\tld [hl], a","\tpop hl",".okay","\tld a, [hl]","\tand Y_FLIP \u003c\u003c 1 | X_FLIP \u003c\u003c 1 ; The \u003c\u003c 1 is compensated in the \"frame\" macro","\tsrl a","\tld [wCurSpriteOAMFlags], a","\tpop af","\tret","",".repeat_last","\txor a","\tld hl, SPRITEANIMSTRUCT_DURATION","\tadd hl, bc","\tld [hl], a","","\tld hl, SPRITEANIMSTRUCT_FRAME","\tadd hl, bc","\tdec [hl]","\tdec [hl]","\tjr .loop","",".restart","\txor a","\tld hl, SPRITEANIMSTRUCT_DURATION","\tadd hl, bc","\tld [hl], a","","\tdec a","\tld hl, SPRITEANIMSTRUCT_FRAME","\tadd hl, bc","\tld [hl], a","\tjr .loop","",".GetPointer:","\t; Get the data for the current frame for the current animation sequence","","\t; SpriteAnimFrameData[SpriteAnim[SPRITEANIMSTRUCT_FRAMESET_ID]][SpriteAnim[SPRITEANIMSTRUCT_FRAME]]","\tld hl, SPRITEANIMSTRUCT_FRAMESET_ID","\tadd hl, bc","\tld e, [hl]","\tld d, 0","\tld hl, SpriteAnimFrameData","\tadd hl, de","\tadd hl, de","\tld e, [hl]","\tinc hl","\tld d, [hl]","\tld hl, SPRITEANIMSTRUCT_FRAME","\tadd hl, bc","\tld l, [hl]","\tld h, 0","\tadd hl, hl","\tadd hl, de","\tret"],"name":"GetSpriteAnimFrame","file":"engine/gfx/sprites.asm","lineNo":412,"address":183396,"addressUsedBy":[]}