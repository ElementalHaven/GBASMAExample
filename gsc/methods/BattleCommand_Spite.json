{"names":["BattleCommand_Spite"],"callingMethods":[],"methodsCalled":["AnimateCurrentMove","BattleRandom","GetBattleVar","GetMoveName","OpponentPartyAttr","PrintDidntAffect2","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":["wDeciramBuffer","wNamedObjectIndexBuffer"],"varsUsed":["hBattleTurn","wAttackMissed","wBattleMode"],"varAddressesUsed":["SpiteEffectText","wBattleMonMoves","wBattleMonPP","wEnemyMonMoves","wWildMonPP"],"constantsUsed":["BATTLE_VARS_LAST_COUNTER_MOVE_OPP","BATTLE_VARS_SUBSTATUS5_OPP","MON_PP","PARTYMON_STRUCT_LENGTH"],"lines":["BattleCommand_Spite:","; spite","","\tld a, [wAttackMissed]","\tand a","\tjp nz, .failed","\tld bc, PARTYMON_STRUCT_LENGTH ; ????","\tld hl, wEnemyMonMoves","\tldh a, [hBattleTurn]","\tand a","\tjr z, .got_moves","\tld hl, wBattleMonMoves",".got_moves","\tld a, BATTLE_VARS_LAST_COUNTER_MOVE_OPP","\tcall GetBattleVar","\tand a","\tjr z, .failed","\tcp STRUGGLE","\tjr z, .failed","\tld b, a","\tld c, -1",".loop","\tinc c","\tld a, [hli]","\tcp b","\tjr nz, .loop","\tld [wNamedObjectIndexBuffer], a","\tdec hl","\tld b, 0","\tpush bc","\tld c, wBattleMonPP - wBattleMonMoves","\tadd hl, bc","\tpop bc","\tld a, [hl]","\tand PP_MASK","\tjr z, .failed","\tpush bc","\tcall GetMoveName","\t; lose 2-5 PP","\tcall BattleRandom","\tand %11","\tinc a","\tinc a","\tld b, a","\tld a, [hl]","\tand PP_MASK","\tcp b","\tjr nc, .deplete_pp","\tld b, a",".deplete_pp","\tld a, [hl]","\tsub b","\tld [hl], a","\tpush af","\tld a, MON_PP","\tcall OpponentPartyAttr","\tld d, b","\tpop af","\tpop bc","\tadd hl, bc","\tld e, a","\tld a, BATTLE_VARS_SUBSTATUS5_OPP","\tcall GetBattleVar","\tbit SUBSTATUS_TRANSFORMED, a","\tjr nz, .transformed","\tldh a, [hBattleTurn]","\tand a","\tjr nz, .not_wildmon","\tld a, [wBattleMode]","\tdec a","\tjr nz, .not_wildmon","\tld hl, wWildMonPP","\tadd hl, bc",".not_wildmon","\tld [hl], e",".transformed","\tpush de","\tcall AnimateCurrentMove","\tpop de","\tld a, d","\tld [wDeciramBuffer], a","\tld hl, SpiteEffectText","\tjp StdBattleTextbox","",".failed","\tjp PrintDidntAffect2"],"name":"BattleCommand_Spite","file":"engine/battle/move_effects/spite.asm","lineNo":1,"address":120040,"addressUsedBy":[]}