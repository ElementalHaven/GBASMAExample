{"names":["BuenaPrize"],"callingMethods":[],"methodsCalled":["BuenaPrintText","Buena_DisplayBlueCardBalance","Buena_PlacePrizeMenuBox","Buena_PrizeMenu","Buena_getprize","CloseWindow","DelayFrame","GetItemName","JoyWaitAorB","PlayClickSFX","PlaySFX","PrintBlueCardBalance","PrintText","ReceiveItem","UpdateSprites","YesNoBox"],"methodAddressesUsed":[],"varsSet":["wBlueCardBalance","wCurItem","wItemQuantityChangeBuffer","wMenuScrollPosition","wMenuSelection","wMenuSelectionQuantity","wNamedObjectIndexBuffer"],"varsUsed":["wBlueCardBalance","wMenuSelectionQuantity"],"varAddressesUsed":["wNumItems"],"constantsUsed":["SFX_TRANSACTION"],"lines":["BuenaPrize:","\txor a","\tld [wMenuScrollPosition], a","\tld a, $1","\tld [wMenuSelection], a","\tcall Buena_PlacePrizeMenuBox","\tcall Buena_DisplayBlueCardBalance","\tld hl, .BuenaAskWhichPrizeText","\tcall PrintText","\tjr .okay","",".loop","\tld hl, .BuenaAskWhichPrizeText","\tcall BuenaPrintText","",".okay","\tcall DelayFrame","\tcall UpdateSprites","\tcall PrintBlueCardBalance","\tcall Buena_PrizeMenu","\tjr z, .done","\tld [wMenuSelectionQuantity], a","\tcall Buena_getprize","\tld a, [hl]","\tld [wNamedObjectIndexBuffer], a","\tcall GetItemName","\tld hl, .BuenaIsThatRightText","\tcall BuenaPrintText","\tcall YesNoBox","\tjr c, .loop","","\tld a, [wMenuSelectionQuantity]","\tcall Buena_getprize","\tinc hl","\tld a, [hld]","\tld c, a","\tld a, [wBlueCardBalance]","\tcp c","\tjr c, .InsufficientBalance","","\tld a, [hli]","\tpush hl","\tld [wCurItem], a","\tld a, $1","\tld [wItemQuantityChangeBuffer], a","\tld hl, wNumItems","\tcall ReceiveItem","\tpop hl","\tjr nc, .BagFull","\tld a, [hl]","\tld c, a","\tld a, [wBlueCardBalance]","\tsub c","\tld [wBlueCardBalance], a","\tcall PrintBlueCardBalance","\tjr .Purchase","",".InsufficientBalance:","\tld hl, .BuenaNotEnoughPointsText","\tjr .print","",".BagFull:","\tld hl, .BuenaNoRoomText","\tjr .print","",".Purchase:","\tld de, SFX_TRANSACTION","\tcall PlaySFX","\tld hl, .BuenaHereYouGoText","",".print","\tcall BuenaPrintText","\tjr .loop","",".done","\tcall CloseWindow","\tcall CloseWindow","\tld hl, .BuenaComeAgainText","\tcall PrintText","\tcall JoyWaitAorB","\tcall PlayClickSFX","\tret","",".BuenaAskWhichPrizeText:","\ttext_far _BuenaAskWhichPrizeText","\ttext_end","",".BuenaIsThatRightText:","\ttext_far _BuenaIsThatRightText","\ttext_end","",".BuenaHereYouGoText:","\ttext_far _BuenaHereYouGoText","\ttext_end","",".BuenaNotEnoughPointsText:","\ttext_far _BuenaNotEnoughPointsText","\ttext_end","",".BuenaNoRoomText:","\ttext_far _BuenaNoRoomText","\ttext_end","",".BuenaComeAgainText:","\ttext_far _BuenaComeAgainText","\ttext_end"],"name":"BuenaPrize","file":"engine/events/buena.asm","lineNo":66,"address":179706,"addressUsedBy":[]}