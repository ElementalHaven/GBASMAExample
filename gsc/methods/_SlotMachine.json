{"names":["_SlotMachine"],"callingMethods":[],"methodsCalled":["ByteFill","ClearBGPalettes","ClearSprites","ClearTilemap","CopyBytes","Decompress","DelayFrame","DisableLCD","EnableLCD","FarCall","GetSGBLayout","PlayMusic","PlaySFX","Random","SlotsLoop","Slots_GetPals","Slots_InitReelTiles","WaitSFX"],"methodAddressesUsed":["ClearSpriteAnims","StubbedTrainerRankings_EndSlotsWinStreak"],"varsSet":["wJumptableIndex","wKeepSevenBiasChance","wSlotBias"],"varsUsed":[],"varAddressesUsed":["vBGMap0","vBGMap1","vTiles0","vTiles2","wOptions","wSlotsDataEnd","wSpriteAnimDict"],"constantsUsed":["MUSIC_GAME_CORNER","MUSIC_NONE","SCGB_SLOT_MACHINE","SCREEN_WIDTH","SFX_QUIT_SLOTS","SLOTS_NO_BIAS","rLCDC","tile"],"lines":["_SlotMachine:","\tld hl, wOptions","\tset NO_TEXT_SCROLL, [hl]","\tcall .InitGFX","\tcall DelayFrame",".loop","\tcall SlotsLoop","\tjr nc, .loop","\tcall WaitSFX","\tld de, SFX_QUIT_SLOTS","\tcall PlaySFX","\tcall WaitSFX","\tcall ClearBGPalettes","\tfarcall StubbedTrainerRankings_EndSlotsWinStreak","\tld hl, wOptions","\tres NO_TEXT_SCROLL, [hl]","\tld hl, rLCDC","\tres rLCDC_SPRITE_SIZE, [hl] ; 8x8","\tret","",".InitGFX:","\tcall ClearBGPalettes","\tcall ClearTilemap","\tcall ClearSprites","\tld de, MUSIC_NONE","\tcall PlayMusic","\tcall DelayFrame","\tcall DisableLCD","\thlbgcoord 0, 0","\tld bc, vBGMap1 - vBGMap0","\tld a, \" \"","\tcall ByteFill","\tld b, SCGB_SLOT_MACHINE","\tcall GetSGBLayout","\tcallfar ClearSpriteAnims","\tld hl, wSlots","\tld bc, wSlotsDataEnd - wSlots","\txor a","\tcall ByteFill","","\tld hl, Slots2LZ","\tld de, vTiles0 tile $00","\tcall Decompress","","\tld hl, Slots3LZ","\tld de, vTiles0 tile $40","\tcall Decompress","","\tld hl, Slots1LZ","\tld de, vTiles2 tile $00","\tcall Decompress","","\tld hl, Slots2LZ","\tld de, vTiles2 tile $25","\tcall Decompress","","\tld hl, SlotsTilemap","\tdecoord 0, 0","\tld bc, SCREEN_WIDTH * 12","\tcall CopyBytes","","\tld hl, rLCDC","\tset rLCDC_SPRITE_SIZE, [hl] ; 8x16","\tcall EnableLCD","\tld hl, wSlots","\tld bc, wSlotsEnd - wSlots","\txor a","\tcall ByteFill","\tcall Slots_InitReelTiles","\tcall Slots_GetPals","\tld a, $7","\tld hl, wSpriteAnimDict","\tld [hli], a","\tld [hl], $40","\txor a ; SLOTS_INIT","\tld [wJumptableIndex], a","\tld a, SLOTS_NO_BIAS","\tld [wSlotBias], a","\tld de, MUSIC_GAME_CORNER","\tcall PlayMusic","\txor a","\tld [wKeepSevenBiasChance], a ; 87.5% chance","\tcall Random","\tand %00101010","\tret nz","\tld a, 1","\tld [wKeepSevenBiasChance], a ; 12.5% chance","\tret"],"name":"_SlotMachine","file":"engine/games/slot_machine.asm","lineNo":77,"address":191551,"addressUsedBy":["SlotMachine"]}