{"names":["DoBattle"],"callingMethods":["CallDoBattle","StartBattle"],"methodsCalled":["BattleMenu","BattleTurn","BreakAttraction","CheckIfCurPartyMonIsFitToFight","CheckPlayerPartyForFitMon","DelayFrames","EmptyBattleTextbox","EnemySwitch","InitBattleMon","LoadTilemapToTempTilemap","LostBattle","NewBattleMonStatus","NewEnemyMonStatus","ResetBattleParticipants","ResetEnemyStatLevels","ResetPlayerStatLevels","SafeLoadTempTilemapToTilemap","SendOutMonText","SendOutPlayerMon","SetEnemyTurn","SetPlayerTurn","SlideBattlePicOut","SpikesDamage"],"methodAddressesUsed":[],"varsSet":["wBattleAction","wBattleEnded","wBattleHasJustStarted","wBattleParticipantsIncludingFainted","wBattleParticipantsNotFainted","wBattlePlayerAction","wCurBattleMon","wCurPartyMon","wCurPartySpecies","wEnemySwitchMonIndex","wLastPlayerMon","wTempBattleMonSpecies"],"varsUsed":["hSerialConnectionStatus","wBattleMode","wBattleType","wCurBattleMon","wCurPartyMon","wLinkMode"],"varAddressesUsed":["wCurPartyMon","wOTPartyMon1HP","wPartySpecies"],"constantsUsed":["BATTLEACTION_SWITCH1","PARTYMON_STRUCT_LENGTH"],"lines":["DoBattle:","\txor a","\tld [wBattleParticipantsNotFainted], a","\tld [wBattleParticipantsIncludingFainted], a","\tld [wBattlePlayerAction], a","\tld [wBattleEnded], a","\tinc a","\tld [wBattleHasJustStarted], a","\tld hl, wOTPartyMon1HP","\tld bc, PARTYMON_STRUCT_LENGTH - 1","\tld d, BATTLEACTION_SWITCH1 - 1",".loop","\tinc d","\tld a, [hli]","\tor [hl]","\tjr nz, .alive","\tadd hl, bc","\tjr .loop","",".alive","\tld a, d","\tld [wBattleAction], a","\tld a, [wLinkMode]","\tand a","\tjr z, .not_linked","","\tldh a, [hSerialConnectionStatus]","\tcp USING_INTERNAL_CLOCK","\tjr z, .player_2","",".not_linked","\tld a, [wBattleMode]","\tdec a","\tjr z, .wild","\txor a","\tld [wEnemySwitchMonIndex], a","\tcall NewEnemyMonStatus","\tcall ResetEnemyStatLevels","\tcall BreakAttraction","\tcall EnemySwitch","",".wild","\tld c, 40","\tcall DelayFrames","",".player_2","\tcall LoadTilemapToTempTilemap","\tcall CheckPlayerPartyForFitMon","\tld a, d","\tand a","\tjp z, LostBattle","\tcall SafeLoadTempTilemapToTilemap","\tld a, [wBattleType]","\tcp BATTLETYPE_DEBUG","\tjp z, .tutorial_debug","\tcp BATTLETYPE_TUTORIAL","\tjp z, .tutorial_debug","\txor a","\tld [wCurPartyMon], a",".loop2","\tcall CheckIfCurPartyMonIsFitToFight","\tjr nz, .alive2","\tld hl, wCurPartyMon","\tinc [hl]","\tjr .loop2","",".alive2","\tld a, [wCurBattleMon]","\tld [wLastPlayerMon], a","\tld a, [wCurPartyMon]","\tld [wCurBattleMon], a","\tinc a","\tld hl, wPartySpecies - 1","\tld c, a","\tld b, 0","\tadd hl, bc","\tld a, [hl]","\tld [wCurPartySpecies], a","\tld [wTempBattleMonSpecies], a","\thlcoord 1, 5","\tld a, 9","\tcall SlideBattlePicOut","\tcall LoadTilemapToTempTilemap","\tcall ResetBattleParticipants","\tcall InitBattleMon","\tcall ResetPlayerStatLevels","\tcall SendOutMonText","\tcall NewBattleMonStatus","\tcall BreakAttraction","\tcall SendOutPlayerMon","\tcall EmptyBattleTextbox","\tcall LoadTilemapToTempTilemap","\tcall SetPlayerTurn","\tcall SpikesDamage","\tld a, [wLinkMode]","\tand a","\tjr z, .not_linked_2","\tldh a, [hSerialConnectionStatus]","\tcp USING_INTERNAL_CLOCK","\tjr nz, .not_linked_2","\txor a","\tld [wEnemySwitchMonIndex], a","\tcall NewEnemyMonStatus","\tcall ResetEnemyStatLevels","\tcall BreakAttraction","\tcall EnemySwitch","\tcall SetEnemyTurn","\tcall SpikesDamage","",".not_linked_2","\tjp BattleTurn","",".tutorial_debug","\tjp BattleMenu"],"name":"DoBattle","file":"engine/battle/core.asm","lineNo":3,"address":134071,"addressUsedBy":["StartMobileBattle"]}