{"names":["DoSubstituteDamage"],"callingMethods":["DoEnemyDamage","DoPlayerDamage"],"methodsCalled":["AppearUserLowerSub","BattleCommand_LowerSubNoAnim","BattleCommand_SwitchTurn","GetBattleVar","GetBattleVarAddr","RefreshBattleHuds","ResetDamage","StdBattleTextbox"],"methodAddressesUsed":[],"varsSet":[],"varsUsed":["hBattleTurn"],"varAddressesUsed":["wCurDamage","wEnemySubstituteHP","wPlayerSubstituteHP"],"constantsUsed":["BATTLE_VARS_MOVE_EFFECT","BATTLE_VARS_SUBSTATUS3","BATTLE_VARS_SUBSTATUS4_OPP"],"lines":["DoSubstituteDamage:","\tld hl, SubTookDamageText","\tcall StdBattleTextbox","","\tld de, wEnemySubstituteHP","\tldh a, [hBattleTurn]","\tand a","\tjr z, .got_hp","\tld de, wPlayerSubstituteHP",".got_hp","","\tld hl, wCurDamage","\tld a, [hli]","\tand a","\tjr nz, .broke","","\tld a, [de]","\tsub [hl]","\tld [de], a","\tjr z, .broke","\tjr nc, .done","",".broke","\tld a, BATTLE_VARS_SUBSTATUS4_OPP","\tcall GetBattleVarAddr","\tres SUBSTATUS_SUBSTITUTE, [hl]","","\tld hl, SubFadedText","\tcall StdBattleTextbox","","\tcall BattleCommand_SwitchTurn","\tcall BattleCommand_LowerSubNoAnim","\tld a, BATTLE_VARS_SUBSTATUS3","\tcall GetBattleVar","\tand 1 \u003c\u003c SUBSTATUS_FLYING | 1 \u003c\u003c SUBSTATUS_UNDERGROUND","\tcall z, AppearUserLowerSub","\tcall BattleCommand_SwitchTurn","","\tld a, BATTLE_VARS_MOVE_EFFECT","\tcall GetBattleVarAddr","\tcp EFFECT_MULTI_HIT","\tjr z, .ok","\tcp EFFECT_DOUBLE_HIT","\tjr z, .ok","\tcp EFFECT_POISON_MULTI_HIT","\tjr z, .ok","\tcp EFFECT_TRIPLE_KICK","\tjr z, .ok","\tcp EFFECT_BEAT_UP","\tjr z, .ok","\txor a","\tld [hl], a",".ok","\tcall RefreshBattleHuds",".done","\tjp ResetDamage"],"name":"DoSubstituteDamage","file":"engine/battle/effect_commands.asm","lineNo":3523,"address":120285,"addressUsedBy":[]}