{"names":["EvolveAfterBattle_MasterLoop"],"callingMethods":["CancelEvolution","EvolveAfterBattle","EvolveAfterBattle_MasterLoop"],"methodsCalled":["AddNTimes","CancelEvolution","ClearBox","ClearSprites","ClearTilemap","CompareBytes","CopyBytes","CopyName1","DelayFrames","EvoFlagAction","EvolveAfterBattle_MasterLoop","FarCall","GetBaseData","GetNick","GetPokemonName","IsMonHoldingEverstone","LearnLevelMoves","PlayMusic","PlaySFX","Predef","PrintText","PrintTextboxText","RestartMapMusic","SetSeenAndCaughtMon","UpdateSpeciesNameIfNotNicknamed","WaitSFX"],"methodAddressesUsed":["EvolutionAnimation","StubbedTrainerRankings_MonsEvolved","UpdateUnownDex"],"varsSet":["hBGMapMode","wCurPartyLevel","wCurSpecies","wEvolutionNewSpecies","wEvolutionOldSpecies","wMonTriedToEvolve","wMonType","wNamedObjectIndexBuffer","wTempMonItem","wTempMonSpecies","wTempSpecies"],"varsUsed":["wBattleMode","wCurItem","wCurPartyMon","wCurSpecies","wEvolutionOldSpecies","wForceEvolution","wLinkMode","wMonTriedToEvolve","wTempMonHappiness","wTempMonItem","wTempMonLevel","wTempMonSpecies","wTempSpecies","wTimeOfDay"],"varAddressesUsed":["CalcMonStatsPredef","CongratulationsYourPokemonText","CopyMonToTempMonPredef","EvolvedIntoText","EvolvingText","GetUnownLetterPredef","wCurPartyMon","wEvolvableFlags","wPartyMonNicknames","wTempMonAttack","wTempMonDVs","wTempMonDefense","wTempMonExp","wTempMonHP","wTempMonMaxHP","wTempMonSpecies"],"constantsUsed":["ATK_EQ_DEF","ATK_GT_DEF","ATK_LT_DEF","CHECK_FLAG","MON_MAXHP","MUSIC_NONE","PARTYMON_STRUCT_LENGTH","SFX_CAUGHT_MON","TRUE"],"lines":["EvolveAfterBattle_MasterLoop:","\tld hl, wCurPartyMon","\tinc [hl]","","\tpop hl","","\tinc hl","\tld a, [hl]","\tcp $ff","\tjp z, .ReturnToMap","","\tld [wEvolutionOldSpecies], a","","\tpush hl","\tld a, [wCurPartyMon]","\tld c, a","\tld hl, wEvolvableFlags","\tld b, CHECK_FLAG","\tcall EvoFlagAction","\tld a, c","\tand a","\tjp z, EvolveAfterBattle_MasterLoop","","\tld a, [wEvolutionOldSpecies]","\tdec a","\tld b, 0","\tld c, a","\tld hl, EvosAttacksPointers","\tadd hl, bc","\tadd hl, bc","\tld a, [hli]","\tld h, [hl]","\tld l, a","","\tpush hl","\txor a","\tld [wMonType], a","\tpredef CopyMonToTempMon","\tpop hl","",".loop","\tld a, [hli]","\tand a","\tjr z, EvolveAfterBattle_MasterLoop","","\tld b, a","","\tcp EVOLVE_TRADE","\tjr z, .trade","","\tld a, [wLinkMode]","\tand a","\tjp nz, .dont_evolve_2","","\tld a, b","\tcp EVOLVE_ITEM","\tjp z, .item","","\tld a, [wForceEvolution]","\tand a","\tjp nz, .dont_evolve_2","","\tld a, b","\tcp EVOLVE_LEVEL","\tjp z, .level","","\tcp EVOLVE_HAPPINESS","\tjr z, .happiness","","; EVOLVE_STAT","\tld a, [wTempMonLevel]","\tcp [hl]","\tjp c, .dont_evolve_1","","\tcall IsMonHoldingEverstone","\tjp z, .dont_evolve_1","","\tpush hl","\tld de, wTempMonAttack","\tld hl, wTempMonDefense","\tld c, 2","\tcall CompareBytes","\tld a, ATK_EQ_DEF","\tjr z, .got_tyrogue_evo","\tld a, ATK_LT_DEF","\tjr c, .got_tyrogue_evo","\tld a, ATK_GT_DEF",".got_tyrogue_evo","\tpop hl","","\tinc hl","\tcp [hl]","\tjp nz, .dont_evolve_2","","\tinc hl","\tjr .proceed","",".happiness","\tld a, [wTempMonHappiness]","\tcp HAPPINESS_TO_EVOLVE","\tjp c, .dont_evolve_2","","\tcall IsMonHoldingEverstone","\tjp z, .dont_evolve_2","","\tld a, [hli]","\tcp TR_ANYTIME","\tjr z, .proceed","\tcp TR_MORNDAY","\tjr z, .happiness_daylight","","; TR_NITE","\tld a, [wTimeOfDay]","\tcp NITE_F","\tjp nz, .dont_evolve_3","\tjr .proceed","",".happiness_daylight","\tld a, [wTimeOfDay]","\tcp NITE_F","\tjp z, .dont_evolve_3","\tjr .proceed","",".trade","\tld a, [wLinkMode]","\tand a","\tjp z, .dont_evolve_2","","\tcall IsMonHoldingEverstone","\tjp z, .dont_evolve_2","","\tld a, [hli]","\tld b, a","\tinc a","\tjr z, .proceed","","\tld a, [wLinkMode]","\tcp LINK_TIMECAPSULE","\tjp z, .dont_evolve_3","","\tld a, [wTempMonItem]","\tcp b","\tjp nz, .dont_evolve_3","","\txor a","\tld [wTempMonItem], a","\tjr .proceed","",".item","\tld a, [hli]","\tld b, a","\tld a, [wCurItem]","\tcp b","\tjp nz, .dont_evolve_3","","\tld a, [wForceEvolution]","\tand a","\tjp z, .dont_evolve_3","\tld a, [wLinkMode]","\tand a","\tjp nz, .dont_evolve_3","\tjr .proceed","",".level","\tld a, [hli]","\tld b, a","\tld a, [wTempMonLevel]","\tcp b","\tjp c, .dont_evolve_3","\tcall IsMonHoldingEverstone","\tjp z, .dont_evolve_3","",".proceed","\tld a, [wTempMonLevel]","\tld [wCurPartyLevel], a","\tld a, $1","\tld [wMonTriedToEvolve], a","","\tpush hl","","\tld a, [hl]","\tld [wEvolutionNewSpecies], a","\tld a, [wCurPartyMon]","\tld hl, wPartyMonNicknames","\tcall GetNick","\tcall CopyName1","\tld hl, EvolvingText","\tcall PrintText","","\tld c, 50","\tcall DelayFrames","","\txor a","\tldh [hBGMapMode], a","\thlcoord 0, 0","\tlb bc, 12, 20","\tcall ClearBox","","\tld a, $1","\tldh [hBGMapMode], a","\tcall ClearSprites","","\tfarcall EvolutionAnimation","","\tpush af","\tcall ClearSprites","\tpop af","\tjp c, CancelEvolution","","\tld hl, CongratulationsYourPokemonText","\tcall PrintText","","\tpop hl","","\tld a, [hl]","\tld [wCurSpecies], a","\tld [wTempMonSpecies], a","\tld [wEvolutionNewSpecies], a","\tld [wNamedObjectIndexBuffer], a","\tcall GetPokemonName","","\tpush hl","\tld hl, EvolvedIntoText","\tcall PrintTextboxText","\tfarcall StubbedTrainerRankings_MonsEvolved","","\tld de, MUSIC_NONE","\tcall PlayMusic","\tld de, SFX_CAUGHT_MON","\tcall PlaySFX","\tcall WaitSFX","","\tld c, 40","\tcall DelayFrames","","\tcall ClearTilemap","\tcall UpdateSpeciesNameIfNotNicknamed","\tcall GetBaseData","","\tld hl, wTempMonExp + 2","\tld de, wTempMonMaxHP","\tld b, TRUE","\tpredef CalcMonStats","","\tld a, [wCurPartyMon]","\tld hl, wPartyMons","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall AddNTimes","\tld e, l","\tld d, h","\tld bc, MON_MAXHP","\tadd hl, bc","\tld a, [hli]","\tld b, a","\tld c, [hl]","\tld hl, wTempMonMaxHP + 1","\tld a, [hld]","\tsub c","\tld c, a","\tld a, [hl]","\tsbc b","\tld b, a","\tld hl, wTempMonHP + 1","\tld a, [hl]","\tadd c","\tld [hld], a","\tld a, [hl]","\tadc b","\tld [hl], a","","\tld hl, wTempMonSpecies","\tld bc, PARTYMON_STRUCT_LENGTH","\tcall CopyBytes","","\tld a, [wCurSpecies]","\tld [wTempSpecies], a","\txor a","\tld [wMonType], a","\tcall LearnLevelMoves","\tld a, [wTempSpecies]","\tdec a","\tcall SetSeenAndCaughtMon","","\tld a, [wTempSpecies]","\tcp UNOWN","\tjr nz, .skip_unown","","\tld hl, wTempMonDVs","\tpredef GetUnownLetter","\tcallfar UpdateUnownDex","",".skip_unown","\tpop de","\tpop hl","\tld a, [wTempMonSpecies]","\tld [hl], a","\tpush hl","\tld l, e","\tld h, d","\tjp EvolveAfterBattle_MasterLoop","",".dont_evolve_1","\tinc hl",".dont_evolve_2","\tinc hl",".dont_evolve_3","\tinc hl","\tjp .loop","","; unused","\tpop hl",".ReturnToMap:","\tpop de","\tpop bc","\tpop hl","\tld a, [wLinkMode]","\tand a","\tret nz","\tld a, [wBattleMode]","\tand a","\tret nz","\tld a, [wMonTriedToEvolve]","\tand a","\tcall nz, RestartMapMusic","\tret"],"name":"EvolveAfterBattle_MasterLoop","file":"engine/pokemon/evolve.asm","lineNo":21,"address":146837,"addressUsedBy":[]}