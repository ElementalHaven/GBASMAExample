{"names":["RestartClock"],"callingMethods":[],"methodsCalled":["ClearTilemap","Coord2Tile","ExitMenu","FarCall","GetWeekday","InitTime","JoyTextDelay_ForcehJoyDown","LoadStandardMenuHeader","PrintText","RestartClock_GetWraparoundTime","Textbox","UpdateTime","WaitPressAorB_BlinkCursor","YesNoBox"],"methodAddressesUsed":["PrintDayOfWeek","PrintHoursMins"],"varsSet":["wBuffer1","wBuffer2","wBuffer3","wBuffer4","wBuffer5","wBuffer6","wStringBuffer2"],"varsUsed":["hHours","hMinutes","wBuffer1","wBuffer2","wBuffer3","wBuffer4","wBuffer5","wBuffer6"],"varAddressesUsed":["wBuffer1","wOptions"],"constantsUsed":["SCREEN_WIDTH"],"lines":["RestartClock:","; If we\u0027re here, we had an RTC overflow.","\tld hl, .ClockTimeMayBeWrongText","\tcall PrintText","\tld hl, wOptions","\tld a, [hl]","\tpush af","\tset NO_TEXT_SCROLL, [hl]","\tcall LoadStandardMenuHeader","\tcall ClearTilemap","\tld hl, .ClockSetWithControlPadText","\tcall PrintText","\tcall .SetClock","\tcall ExitMenu","\tpop bc","\tld hl, wOptions","\tld [hl], b","\tld c, a","\tret","",".ClockTimeMayBeWrongText:","\ttext_far _ClockTimeMayBeWrongText","\ttext_end","",".ClockSetWithControlPadText:","\ttext_far _ClockSetWithControlPadText","\ttext_end","",".SetClock:","\tld a, 1","\tld [wBuffer1], a ; which digit","\tld [wBuffer2], a","\tld a, 8","\tld [wBuffer3], a","\tcall UpdateTime","\tcall GetWeekday","\tld [wBuffer4], a","\tldh a, [hHours]","\tld [wBuffer5], a","\tldh a, [hMinutes]","\tld [wBuffer6], a","",".loop","\tcall .joy_loop","\tjr nc, .loop","\tand a","\tret nz","\tcall .PrintTime","\tld hl, .ClockIsThisOKText","\tcall PrintText","\tcall YesNoBox","\tjr c, .cancel","\tld a, [wBuffer4]","\tld [wStringBuffer2], a","\tld a, [wBuffer5]","\tld [wStringBuffer2 + 1], a","\tld a, [wBuffer6]","\tld [wStringBuffer2 + 2], a","\txor a","\tld [wStringBuffer2 + 3], a","\tcall InitTime","\tcall .PrintTime","\tld hl, .ClockHasResetText","\tcall PrintText","\tcall WaitPressAorB_BlinkCursor","\txor a","\tret","",".cancel","\tld a, $1","\tret","",".ClockIsThisOKText:","\ttext_far _ClockIsThisOKText","\ttext_end","",".ClockHasResetText:","\ttext_far _ClockHasResetText","\ttext_end","",".joy_loop","\tcall JoyTextDelay_ForcehJoyDown","\tld c, a","\tpush af","\tcall .PrintTime","\tpop af","\tbit 0, a","\tjr nz, .press_A","\tbit 1, a","\tjr nz, .press_B","\tbit 6, a","\tjr nz, .pressed_up","\tbit 7, a","\tjr nz, .pressed_down","\tbit 5, a","\tjr nz, .pressed_left","\tbit 4, a","\tjr nz, .pressed_right","\tjr .joy_loop","",".press_A","\tld a, $0","\tscf","\tret","",".press_B","\tld a, $1","\tscf","\tret","",".pressed_up","\tld a, [wBuffer1]","\tcall RestartClock_GetWraparoundTime","\tld a, [de]","\tinc a","\tld [de], a","\tcp b","\tjr c, .done_scroll","\tld a, $0","\tld [de], a","\tjr .done_scroll","",".pressed_down","\tld a, [wBuffer1]","\tcall RestartClock_GetWraparoundTime","\tld a, [de]","\tdec a","\tld [de], a","\tcp -1","\tjr nz, .done_scroll","\tld a, b","\tdec a","\tld [de], a","\tjr .done_scroll","",".pressed_left","\tld hl, wBuffer1","\tdec [hl]","\tjr nz, .done_scroll","\tld [hl], $3","\tjr .done_scroll","",".pressed_right","\tld hl, wBuffer1","\tinc [hl]","\tld a, [hl]","\tcp $4","\tjr c, .done_scroll","\tld [hl], $1","",".done_scroll","\txor a","\tret","",".PrintTime:","\thlcoord 0, 5","\tld b, 5","\tld c, 18","\tcall Textbox","\tdecoord 1, 8","\tld a, [wBuffer4]","\tld b, a","\tfarcall PrintDayOfWeek","\tld a, [wBuffer5]","\tld b, a","\tld a, [wBuffer6]","\tld c, a","\tdecoord 11, 8","\tfarcall PrintHoursMins","\tld a, [wBuffer2]","\tlb de, \" \", \" \"","\tcall .PlaceChars","\tld a, [wBuffer1]","\tlb de, \"▲\", \"▼\"","\tcall .PlaceChars","\tld a, [wBuffer1]","\tld [wBuffer2], a","\tret","",".UnusedPlaceCharsFragment: ; unreferenced","\tld a, [wBuffer3]","\tld b, a","\tcall Coord2Tile","\tret","",".PlaceChars:","\tpush de","\tcall RestartClock_GetWraparoundTime","\tld a, [wBuffer3]","\tdec a","\tld b, a","\tcall Coord2Tile","\tpop de","\tld [hl], d","\tld bc, 2 * SCREEN_WIDTH","\tadd hl, bc","\tld [hl], e","\tret"],"name":"RestartClock","file":"engine/rtc/restart_clock.asm","lineNo":30,"address":96968,"addressUsedBy":["Continue_CheckRTC_RestartClock"]}