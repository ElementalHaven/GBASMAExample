{"names":["PokeAnim_ConvertAndApplyBitmask"],"callingMethods":["PokeAnim_GetFrame"],"methodsCalled":["AddNTimes","GetFarByte"],"methodAddressesUsed":[],"varsSet":["wPokeAnimBitmaskCurBit","wPokeAnimBitmaskCurCol","wPokeAnimBitmaskCurRow"],"varsUsed":["wBoxAlignment","wPokeAnimBitmaskCurBit","wPokeAnimBitmaskCurCol","wPokeAnimBitmaskCurRow","wPokeAnimFramesBank","wPokeAnimFrontpicHeight"],"varAddressesUsed":["wPokeAnimBitmaskBuffer","wPokeAnimBitmaskCurBit","wPokeAnimCoord","wPokeAnimGraphicStartTile"],"constantsUsed":["SCREEN_WIDTH"],"lines":["PokeAnim_ConvertAndApplyBitmask:","\txor a","\tld [wPokeAnimBitmaskCurBit], a","\tld [wPokeAnimBitmaskCurRow], a","\tld [wPokeAnimBitmaskCurCol], a",".loop","\tpush hl","\tcall .IsCurBitSet","\tpop hl","\tld a, b","\tand a","\tjr z, .next","","\tld a, [wPokeAnimFramesBank]","\tcall GetFarByte","\tinc hl","\tpush hl","\tcall .ApplyFrame","\tpop hl","",".next","\tpush hl","\tcall .NextBit","\tpop hl","\tjr nc, .loop","\tret","",".IsCurBitSet:","; which byte","\tld a, [wPokeAnimBitmaskCurBit]","\tand $f8","\trrca","\trrca","\trrca","\tld e, a","\tld d, 0","\tld hl, wPokeAnimBitmaskBuffer","\tadd hl, de","\tld b, [hl]","; which bit","\tld a, [wPokeAnimBitmaskCurBit]","\tand $7","\tjr z, .skip","","\tld c, a","\tld a, b",".loop2","\trrca","\tdec c","\tjr nz, .loop2","\tld b, a","",".skip","\txor a","\tbit 0, b","\tjr z, .finish","\tld a, 1","",".finish","\tld b, a","\tld hl, wPokeAnimBitmaskCurBit","\tinc [hl]","\tret","",".ApplyFrame:","\tpush af","\tcall .GetCoord","\tpop af","\tpush hl","\tcall .GetTilemap","\tld hl, wPokeAnimGraphicStartTile","\tadd [hl]","\tpop hl","\tld [hl], a","\tret","",".GetCoord:","\tcall .GetStartCoord","\tld a, [wPokeAnimBitmaskCurRow]","\tld bc, SCREEN_WIDTH","\tcall AddNTimes","\tld a, [wBoxAlignment]","\tand a","\tjr nz, .go","\tld a, [wPokeAnimBitmaskCurCol]","\tld e, a","\tld d, 0","\tadd hl, de","\tjr .skip2","",".go","\tld a, [wPokeAnimBitmaskCurCol]","\tld e, a","\tld a, l","\tsub e","\tld l, a","\tld a, h","\tsbc 0","\tld h, a","",".skip2","\tret","","; unused","\tdb 6, 5, 4","",".GetTilemap:","\tpush af","\tld a, [wPokeAnimFrontpicHeight]","\tcp 5","\tjr z, .check_add_24","\tcp 6","\tjr z, .check_add_13","\tpop af","\tret","",".check_add_24","\tpop af","\tcp 5 * 5","\tjr nc, .add_24","\tpush hl","\tpush de","\tld hl, ._5by5","\tld e, a","\tld d, 0","\tadd hl, de","\tld a, [hl]","\tpop de","\tpop hl","\tret","",".add_24","\tadd 24","\tret","",".check_add_13","\tpop af","\tcp 6 * 6","\tjr nc, .add_13","\tpush hl","\tpush de","\tld hl, ._6by6","\tld e, a","\tld d, 0","\tadd hl, de","\tld a, [hl]","\tpop de","\tpop hl","\tret","",".add_13","\tadd 13","\tret","","._5by5:","\tpoke_anim_box 5","\t; db  9, 10, 11, 12, 13","\t; db 16, 17, 18, 19, 20","\t; db 23, 24, 25, 26, 27","\t; db 30, 31, 32, 33, 34","\t; db 37, 38, 39, 40, 41","","._6by6:","\tpoke_anim_box 6","\t; db  8,  9, 10, 11, 12, 13","\t; db 15, 16, 17, 18, 19, 20","\t; db 22, 23, 24, 25, 26, 27","\t; db 29, 30, 31, 32, 33, 34","\t; db 36, 37, 38, 39, 40, 41","\t; db 43, 44, 45, 46, 47, 48","",".GetStartCoord:","\tld hl, wPokeAnimCoord","\tld a, [hli]","\tld h, [hl]","\tld l, a","","\tld a, [wPokeAnimFrontpicHeight]","\tld de, 0","\tld bc, 6","\tcp 7","\tjr z, .okay","\tld de, SCREEN_WIDTH + 1","\tld bc, SCREEN_WIDTH + 5","\tcp 6","\tjr z, .okay","\tld de, 2 * SCREEN_WIDTH + 1","\tld bc, 2 * SCREEN_WIDTH + 5",".okay","","\tld a, [wBoxAlignment]","\tand a","\tjr nz, .add_bc","\tadd hl, de","\tret","",".add_bc","\tadd hl, bc","\tret","",".NextBit:","\tld a, [wPokeAnimBitmaskCurRow]","\tinc a","\tld [wPokeAnimBitmaskCurRow], a","\tld c, a","\tld a, [wPokeAnimFrontpicHeight]","\tcp c","\tjr nz, .no_carry","\txor a","\tld [wPokeAnimBitmaskCurRow], a","\tld a, [wPokeAnimBitmaskCurCol]","\tinc a","\tld [wPokeAnimBitmaskCurCol], a","\tld c, a","\tld a, [wPokeAnimFrontpicHeight]","\tcp c","\tjr nz, .no_carry","\tscf","\tret","",".no_carry","\txor a","\tret"],"name":"PokeAnim_ConvertAndApplyBitmask","file":"engine/gfx/pic_animation.asm","lineNo":548,"address":233542,"addressUsedBy":[]}