{"names":["HandlePlayerMonFaint"],"callingMethods":["Battle_EnemyFirst","Battle_PlayerFirst","CheckFaint_EnemyThenPlayer","CheckFaint_PlayerThenEnemy"],"methodsCalled":["AskUseNextPokemon","CheckEnemyTrainerDefeated","CheckMobileBattleError","CheckPlayerPartyForFitMon","DoubleSwitch","FaintEnemyPokemon","FaintYourPokemon","ForcePlayerMonChoice","HandleEnemySwitch","LostBattle","UpdateBattleStateAndExperienceAfterEnemyFaint","UpdateFaintedPlayerMon","WildFled_EnemyFled_LinkBattleCanceled","WinTrainerBattle"],"methodAddressesUsed":[],"varsSet":["wBattleEnded","wBattlePlayerAction","wWhichMonFaintedFirst"],"varsUsed":["wBattleMode"],"varAddressesUsed":["wEnemyMonHP"],"constantsUsed":["BATTLEPLAYERACTION_USEITEM"],"lines":["HandlePlayerMonFaint:","\tcall FaintYourPokemon","\tld hl, wEnemyMonHP","\tld a, [hli]","\tor [hl]","\tcall z, FaintEnemyPokemon","\tld a, $1","\tld [wWhichMonFaintedFirst], a","\tcall UpdateFaintedPlayerMon","\tcall CheckPlayerPartyForFitMon","\tld a, d","\tand a","\tjp z, LostBattle","\tld hl, wEnemyMonHP","\tld a, [hli]","\tor [hl]","\tjr nz, .notfainted","\tcall UpdateBattleStateAndExperienceAfterEnemyFaint","\tld a, [wBattleMode]","\tdec a","\tjr nz, .trainer","\tld a, $1","\tld [wBattleEnded], a","\tret","",".trainer","\tcall CheckEnemyTrainerDefeated","\tjp z, WinTrainerBattle","",".notfainted","\tcall AskUseNextPokemon","\tjr nc, .switch","\tld a, $1","\tld [wBattleEnded], a","\tret","",".switch","\tcall ForcePlayerMonChoice","\tcall CheckMobileBattleError","\tjp c, WildFled_EnemyFled_LinkBattleCanceled","\tld a, c","\tand a","\tret nz","\tld a, BATTLEPLAYERACTION_USEITEM","\tld [wBattlePlayerAction], a","\tcall HandleEnemySwitch","\tjp z, WildFled_EnemyFled_LinkBattleCanceled","\tjp DoubleSwitch"],"name":"HandlePlayerMonFaint","file":"engine/battle/core.asm","lineNo":2596,"address":136200,"addressUsedBy":[]}