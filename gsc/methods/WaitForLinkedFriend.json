{"names":["WaitForLinkedFriend"],"callingMethods":[],"methodsCalled":["DelayFrame","DelayFrames","LinkDataReceived"],"methodAddressesUsed":[],"varsSet":["hSerialConnectionStatus","hSerialReceive","rSB","rSC","wLinkTimeoutFrames","wScriptVar"],"varsUsed":["hSerialConnectionStatus","wLinkTimeoutFrames","wPlayerLinkAction"],"varAddressesUsed":[],"constantsUsed":["CONNECTION_NOT_ESTABLISHED","rSC_CLOCK","rSC_ON"],"lines":["WaitForLinkedFriend:","\tld a, [wPlayerLinkAction]","\tand a","\tjr z, .no_link_action","\tld a, $2","\tldh [rSB], a","\txor a","\tldh [hSerialReceive], a","\tld a, (0 \u003c\u003c rSC_ON) | (0 \u003c\u003c rSC_CLOCK)","\tldh [rSC], a","\tld a, (1 \u003c\u003c rSC_ON) | (0 \u003c\u003c rSC_CLOCK)","\tldh [rSC], a","\tcall DelayFrame","\tcall DelayFrame","\tcall DelayFrame","",".no_link_action","\tld a, $2","\tld [wLinkTimeoutFrames + 1], a","\tld a, $ff","\tld [wLinkTimeoutFrames], a",".loop","\tldh a, [hSerialConnectionStatus]","\tcp USING_INTERNAL_CLOCK","\tjr z, .connected","\tcp USING_EXTERNAL_CLOCK","\tjr z, .connected","\tld a, CONNECTION_NOT_ESTABLISHED","\tldh [hSerialConnectionStatus], a","\tld a, $2","\tldh [rSB], a","\txor a","\tldh [hSerialReceive], a","\tld a, (0 \u003c\u003c rSC_ON) | (0 \u003c\u003c rSC_CLOCK)","\tldh [rSC], a","\tld a, (1 \u003c\u003c rSC_ON) | (0 \u003c\u003c rSC_CLOCK)","\tldh [rSC], a","\tld a, [wLinkTimeoutFrames]","\tdec a","\tld [wLinkTimeoutFrames], a","\tjr nz, .not_done","\tld a, [wLinkTimeoutFrames + 1]","\tdec a","\tld [wLinkTimeoutFrames + 1], a","\tjr z, .done","",".not_done","\tld a, $1","\tldh [rSB], a","\tld a, (0 \u003c\u003c rSC_ON) | (1 \u003c\u003c rSC_CLOCK)","\tldh [rSC], a","\tld a, (1 \u003c\u003c rSC_ON) | (1 \u003c\u003c rSC_CLOCK)","\tldh [rSC], a","\tcall DelayFrame","\tjr .loop","",".connected","\tcall LinkDataReceived","\tcall DelayFrame","\tcall LinkDataReceived","\tld c, 50","\tcall DelayFrames","\tld a, $1","\tld [wScriptVar], a","\tret","",".done","\txor a","\tld [wScriptVar], a","\tret"],"name":"WaitForLinkedFriend","file":"engine/link/link.asm","lineNo":2168,"address":105590,"addressUsedBy":[]}