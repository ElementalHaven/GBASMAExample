{"names":["Kurt_GiveUpSelectedQuantityOfSelectedApricorn"],"callingMethods":["SelectApricornForKurt"],"methodsCalled":["Kurt_GetAddressOfApricornQuantity","Kurt_GetRidOfItem"],"methodAddressesUsed":[],"varsSet":["wApricorns","wCurItemQuantity"],"varsUsed":["wCurItem","wCurItemQuantity","wItemQuantityChangeBuffer"],"varAddressesUsed":["wNumItems"],"constantsUsed":[],"lines":["Kurt_GiveUpSelectedQuantityOfSelectedApricorn:","; Get the quantity of Apricorns of type [wCurItem]","; in the bag. Compatible with multiple stacks.","","; Initialize the search.","\tpush de","\tpush bc","\tld hl, wNumItems","\tld a, [wCurItem]","\tld c, a","\tld e, $0","\txor a","\tld [wCurItemQuantity], a","\tld a, -1","\tld [wApricorns], a","","; Search for [wCurItem] in the bag.",".loop1","; Increase the total count.","\tld a, [wCurItemQuantity]","\tinc a","\tld [wCurItemQuantity], a","; Get the index of the next item.","\tinc hl","\tld a, [hli]","; If we\u0027ve reached the end of the pocket, break.","\tcp -1","\tjr z, .okay1","; If we haven\u0027t found what we\u0027re looking for, continue.","\tcp c","\tjr nz, .loop1","; Increment the result counter and store the bag index of the match.","\tld d, $0","\tpush hl","\tld hl, wApricorns","\tadd hl, de","\tinc e","\tld a, [wCurItemQuantity]","\tdec a","\tld [hli], a","\tld a, -1","\tld [hl], a","\tpop hl","\tjr .loop1","",".okay1","; How many stacks have we found?","\tld a, e","\tand a","\tjr z, .done","\tdec a","\tjr z, .OnlyOne","\tld hl, wApricorns","",".loop2","\tld a, [hl]","\tld c, a","\tpush hl",".loop3","\tinc hl","\tld a, [hl]","\tcp -1","\tjr z, .okay2","\tld b, a","\tld a, c","\tcall Kurt_GetAddressOfApricornQuantity","\tld e, a","\tld a, b","\tcall Kurt_GetAddressOfApricornQuantity","\tsub e","\tjr z, .equal","\tjr c, .less","\tjr .loop3","",".equal","\tld a, c","\tsub b","\tjr nc, .loop3","",".less","\tld a, c","\tld c, b","\tld [hl], a","\tld a, c","\tpop hl","\tld [hl], a","\tpush hl","\tjr .loop3","",".okay2","\tpop hl","\tinc hl","\tld a, [hl]","\tcp -1","\tjr nz, .loop2","",".OnlyOne:","\tld hl, wApricorns",".loop4","\tld a, [hl]","\tcp -1","\tjr z, .done","\tpush hl","\tld [wCurItemQuantity], a","\tcall Kurt_GetRidOfItem","\tpop hl","\tld a, [wItemQuantityChangeBuffer]","\tand a","\tjr z, .done","\tpush hl","\tld a, [hli]","\tld c, a",".loop5","\tld a, [hli]","\tcp -1","\tjr z, .okay3","\tcp c","\tjr c, .loop5","\tdec a","\tdec hl","\tld [hli], a","\tjr .loop5","",".okay3","\tpop hl","\tinc hl","\tjr .loop4","",".done","\tld a, [wItemQuantityChangeBuffer]","\tand a","\tpop bc","\tpop de","\tret"],"name":"Kurt_GiveUpSelectedQuantityOfSelectedApricorn","file":"engine/events/kurt.asm","lineNo":206,"address":175133,"addressUsedBy":[]}