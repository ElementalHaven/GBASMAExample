{"names":["EscapeRopeOrDig"],"callingMethods":["DigFunction","EscapeRopeFunction"],"methodsCalled":["CloseWindow","CopyBytes","FarCall","FieldMoveJumptable","GetMapEnvironment","GetPartyNick","MenuTextbox","QueueScript","WaitPressAorB_BlinkCursor"],"methodAddressesUsed":["SpecialKabutoChamber"],"varsSet":["wBuffer2","wFieldMoveSucceeded"],"varsUsed":["wBuffer2"],"varAddressesUsed":["wDigWarpNumber","wNextWarp"],"constantsUsed":[],"lines":["EscapeRopeOrDig:","\tld [wBuffer2], a",".loop","\tld hl, .DigTable","\tcall FieldMoveJumptable","\tjr nc, .loop","\tand $7f","\tld [wFieldMoveSucceeded], a","\tret","",".DigTable:","\tdw .CheckCanDig","\tdw .DoDig","\tdw .FailDig","",".CheckCanDig:","\tcall GetMapEnvironment","\tcp CAVE","\tjr z, .incave","\tcp DUNGEON","\tjr z, .incave",".fail","\tld a, $2","\tret","",".incave","\tld hl, wDigWarpNumber","\tld a, [hli]","\tand a","\tjr z, .fail","\tld a, [hli]","\tand a","\tjr z, .fail","\tld a, [hl]","\tand a","\tjr z, .fail","\tld a, $1","\tret","",".DoDig:","\tld hl, wDigWarpNumber","\tld de, wNextWarp","\tld bc, 3","\tcall CopyBytes","\tcall GetPartyNick","\tld a, [wBuffer2]","\tcp $2","\tjr nz, .escaperope","\tld hl, .UsedDigScript","\tcall QueueScript","\tld a, $81","\tret","",".escaperope","\tfarcall SpecialKabutoChamber","\tld hl, .UsedEscapeRopeScript","\tcall QueueScript","\tld a, $81","\tret","",".FailDig:","\tld a, [wBuffer2]","\tcp $2","\tjr nz, .failescaperope","\tld hl, .CantUseDigText","\tcall MenuTextbox","\tcall WaitPressAorB_BlinkCursor","\tcall CloseWindow","",".failescaperope","\tld a, $80","\tret","",".UseDigText:","\ttext_far _UseDigText","\ttext_end","",".UseEscapeRopeText:","\ttext_far _UseEscapeRopeText","\ttext_end","",".CantUseDigText:","\ttext_far _CantUseDigText","\ttext_end","",".UsedEscapeRopeScript:","\treloadmappart","\tspecial UpdateTimePals","\twritetext .UseEscapeRopeText","\tsjump .UsedDigOrEscapeRopeScript","",".UsedDigScript:","\treloadmappart","\tspecial UpdateTimePals","\twritetext .UseDigText","",".UsedDigOrEscapeRopeScript:","\twaitbutton","\tclosetext","\tplaysound SFX_WARP_TO","\tapplymovement PLAYER, .DigOut","\tfarscall Script_AbortBugContest","\tspecial WarpToSpawnPoint","\tloadvar VAR_MOVEMENT, PLAYER_NORMAL","\tnewloadmap MAPSETUP_DOOR","\tplaysound SFX_WARP_FROM","\tapplymovement PLAYER, .DigReturn","\tend","",".DigOut:","\tstep_dig 32","\thide_object","\tstep_end","",".DigReturn:","\tshow_object","\treturn_dig 32","\tstep_end"],"name":"EscapeRopeOrDig","file":"engine/events/overworld.asm","lineNo":759,"address":74783,"addressUsedBy":[]}