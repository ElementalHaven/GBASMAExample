{"names":["BattleCommand_ForceSwitch"],"callingMethods":[],"methodsCalled":["AnimateCurrentMove","BattleCommand_LowerSub","BattleCommand_MoveDelay","BattleCommand_RaiseSub","BattleRandom","CallBattleCore","CheckPlayerHasMonToSwitchTo","ClearBox","DelayFrames","FarCall","FindAliveEnemyMons","GetPartyLocation","PrintButItFailed","SetBattleDraw","StdBattleTextbox","UpdateBattleMonInParty","UpdateEnemyMonInParty"],"methodAddressesUsed":["ForceEnemySwitch","SpikesDamage","SwitchPlayerMon"],"varsSet":["wCurPartyMon","wEnemySwitchMonIndex","wForcedSwitch","wKickCounter","wNumHits"],"varsUsed":["hBattleTurn","wAttackMissed","wBattleMode","wBattleMonLevel","wBattleType","wCurBattleMon","wCurOTMon","wCurPartyLevel","wEnemyGoesFirst","wEnemyMoveStructAnimation","wOTPartyCount","wPartyCount","wPlayerMoveStructAnimation"],"varAddressesUsed":["wOTPartyMon1HP","wPartyMon1HP"],"constantsUsed":[],"lines":["BattleCommand_ForceSwitch:","; forceswitch","","\tld a, [wBattleType]","\tcp BATTLETYPE_SHINY","\tjp z, .fail","\tcp BATTLETYPE_TRAP","\tjp z, .fail","\tcp BATTLETYPE_CELEBI","\tjp z, .fail","\tcp BATTLETYPE_SUICUNE","\tjp z, .fail","\tldh a, [hBattleTurn]","\tand a","\tjp nz, .force_player_switch","\tld a, [wAttackMissed]","\tand a","\tjr nz, .missed","\tld a, [wBattleMode]","\tdec a","\tjr nz, .trainer","\tld a, [wCurPartyLevel]","\tld b, a","\tld a, [wBattleMonLevel]","\tcp b","\tjr nc, .wild_force_flee","\tadd b","\tld c, a","\tinc c",".random_loop_wild","\tcall BattleRandom","\tcp c","\tjr nc, .random_loop_wild","\tsrl b","\tsrl b","\tcp b","\tjr nc, .wild_force_flee",".missed","\tjp .fail","",".wild_force_flee","\tcall UpdateBattleMonInParty","\txor a","\tld [wNumHits], a","\tinc a ; TRUE","\tld [wForcedSwitch], a","\tcall SetBattleDraw","\tld a, [wPlayerMoveStructAnimation]","\tjp .succeed","",".trainer","\tcall FindAliveEnemyMons","\tjr c, .switch_fail","\tld a, [wEnemyGoesFirst]","\tand a","\tjr z, .switch_fail","\tcall UpdateEnemyMonInParty","\tld a, $1","\tld [wKickCounter], a","\tcall AnimateCurrentMove","\tld c, $14","\tcall DelayFrames","\thlcoord 1, 0","\tlb bc, 4, 10","\tcall ClearBox","\tld c, 20","\tcall DelayFrames","\tld a, [wOTPartyCount]","\tld b, a","\tld a, [wCurOTMon]","\tld c, a","; select a random enemy mon to switch to",".random_loop_trainer","\tcall BattleRandom","\tand $7","\tcp b","\tjr nc, .random_loop_trainer","\tcp c","\tjr z, .random_loop_trainer","\tpush af","\tpush bc","\tld hl, wOTPartyMon1HP","\tcall GetPartyLocation","\tld a, [hli]","\tor [hl]","\tpop bc","\tpop de","\tjr z, .random_loop_trainer","\tld a, d","\tinc a","\tld [wEnemySwitchMonIndex], a","\tcallfar ForceEnemySwitch","","\tld hl, DraggedOutText","\tcall StdBattleTextbox","","\tld hl, SpikesDamage","\tjp CallBattleCore","",".switch_fail","\tjp .fail","",".force_player_switch","\tld a, [wAttackMissed]","\tand a","\tjr nz, .player_miss","","\tld a, [wBattleMode]","\tdec a","\tjr nz, .vs_trainer","","\tld a, [wBattleMonLevel]","\tld b, a","\tld a, [wCurPartyLevel]","\tcp b","\tjr nc, .wild_succeed_playeristarget","","\tadd b","\tld c, a","\tinc c",".wild_random_loop_playeristarget","\tcall BattleRandom","\tcp c","\tjr nc, .wild_random_loop_playeristarget","","\tsrl b","\tsrl b","\tcp b","\tjr nc, .wild_succeed_playeristarget","",".player_miss","\tjr .fail","",".wild_succeed_playeristarget","\tcall UpdateBattleMonInParty","\txor a","\tld [wNumHits], a","\tinc a ; TRUE","\tld [wForcedSwitch], a","\tcall SetBattleDraw","\tld a, [wEnemyMoveStructAnimation]","\tjr .succeed","",".vs_trainer","\tcall CheckPlayerHasMonToSwitchTo","\tjr c, .fail","","\tld a, [wEnemyGoesFirst]","\tcp $1","\tjr z, .switch_fail","","\tcall UpdateBattleMonInParty","\tld a, $1","\tld [wKickCounter], a","\tcall AnimateCurrentMove","\tld c, 20","\tcall DelayFrames","\thlcoord 9, 7","\tlb bc, 5, 11","\tcall ClearBox","\tld c, 20","\tcall DelayFrames","\tld a, [wPartyCount]","\tld b, a","\tld a, [wCurBattleMon]","\tld c, a",".random_loop_trainer_playeristarget","\tcall BattleRandom","\tand $7","\tcp b","\tjr nc, .random_loop_trainer_playeristarget","","\tcp c","\tjr z, .random_loop_trainer_playeristarget","","\tpush af","\tpush bc","\tld hl, wPartyMon1HP","\tcall GetPartyLocation","\tld a, [hli]","\tor [hl]","\tpop bc","\tpop de","\tjr z, .random_loop_trainer_playeristarget","","\tld a, d","\tld [wCurPartyMon], a","\tld hl, SwitchPlayerMon","\tcall CallBattleCore","","\tld hl, DraggedOutText","\tcall StdBattleTextbox","","\tld hl, SpikesDamage","\tjp CallBattleCore","",".fail","\tcall BattleCommand_LowerSub","\tcall BattleCommand_MoveDelay","\tcall BattleCommand_RaiseSub","\tjp PrintButItFailed","",".succeed","\tpush af","\tcall SetBattleDraw","\tld a, $1","\tld [wKickCounter], a","\tcall AnimateCurrentMove","\tld c, 20","\tcall DelayFrames","\tpop af","","\tld hl, FledInFearText","\tcp ROAR","\tjr z, .do_text","\tld hl, BlownAwayText",".do_text","\tjp StdBattleTextbox"],"name":"BattleCommand_ForceSwitch","file":"engine/battle/effect_commands.asm","lineNo":5038,"address":121615,"addressUsedBy":[]}