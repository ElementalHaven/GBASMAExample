{"names":["BikeFunction"],"callingMethods":[],"methodsCalled":["CheckOutdoorMap","DelayFrame","GetMapEnvironment","GetPlayerStandingTile","MaxVolume","PlayMusic","QueueScript"],"methodAddressesUsed":["Script_GetOnBike_Register"],"varsSet":["wFieldMoveSucceeded","wMapMusic","wMusicFade"],"varsUsed":["wPlayerState","wUsingItemWithSelect"],"varAddressesUsed":["Script_CantGetOffBike","Script_GetOffBike","Script_GetOffBike_Register","Script_GetOnBike","wBikeFlags"],"constantsUsed":["MUSIC_BICYCLE","MUSIC_NONE"],"lines":["BikeFunction:","\tcall .TryBike","\tand $7f","\tld [wFieldMoveSucceeded], a","\tret","",".TryBike:","\tcall .CheckEnvironment","\tjr c, .CannotUseBike","\tld a, [wPlayerState]","\tcp PLAYER_NORMAL","\tjr z, .GetOnBike","\tcp PLAYER_BIKE","\tjr z, .GetOffBike","\tjr .CannotUseBike","",".GetOnBike:","\tld hl, Script_GetOnBike","\tld de, Script_GetOnBike_Register","\tcall .CheckIfRegistered","\tcall QueueScript","\txor a","\tld [wMusicFade], a","\tld de, MUSIC_NONE","\tcall PlayMusic","\tcall DelayFrame","\tcall MaxVolume","\tld de, MUSIC_BICYCLE","\tld a, e","\tld [wMapMusic], a","\tcall PlayMusic","\tld a, $1","\tret","",".GetOffBike:","\tld hl, wBikeFlags","\tbit BIKEFLAGS_ALWAYS_ON_BIKE_F, [hl]","\tjr nz, .CantGetOffBike","\tld hl, Script_GetOffBike","\tld de, Script_GetOffBike_Register","\tcall .CheckIfRegistered","\tld a, BANK(Script_GetOffBike)","\tjr .done","",".CantGetOffBike:","\tld hl, Script_CantGetOffBike","\tjr .done","",".CannotUseBike:","\tld a, $0","\tret","",".done","\tcall QueueScript","\tld a, $1","\tret","",".CheckIfRegistered:","\tld a, [wUsingItemWithSelect]","\tand a","\tret z","\tld h, d","\tld l, e","\tret","",".CheckEnvironment:","\tcall GetMapEnvironment","\tcall CheckOutdoorMap","\tjr z, .ok","\tcp CAVE","\tjr z, .ok","\tcp GATE","\tjr z, .ok","\tjr .nope","",".ok","\tcall GetPlayerStandingTile","\tand $f ; lo nybble only","\tjr nz, .nope ; not FLOOR_TILE","\txor a","\tret","",".nope","\tscf","\tret"],"name":"BikeFunction","file":"engine/events/overworld.asm","lineNo":1623,"address":75684,"addressUsedBy":["BicycleEffect"]}