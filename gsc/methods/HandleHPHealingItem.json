{"names":["HandleHPHealingItem"],"callingMethods":["HandleHealingItems"],"methodsCalled":["FarCall","ItemRecoveryAnim","Predef"],"methodAddressesUsed":["GetOpponentItem"],"fallsInto":"UseOpponentItem","varsSet":["wBuffer1","wBuffer2","wBuffer3","wBuffer4","wBuffer5","wBuffer6","wWhichHPBar"],"varsUsed":["hBattleTurn","wBuffer5","wBuffer6"],"varAddressesUsed":["AnimateHPBarPredef","wBattleMonHP","wBattleMonMaxHP","wEnemyMonHP","wEnemyMonMaxHP"],"constantsUsed":[],"lines":["\tcallfar GetOpponentItem","\tld a, b","\tcp HELD_BERRY","\tret nz","\tld de, wEnemyMonHP + 1","\tld hl, wEnemyMonMaxHP","\tldh a, [hBattleTurn]","\tand a","\tjr z, .go","\tld de, wBattleMonHP + 1","\tld hl, wBattleMonMaxHP","",".go","; If, and only if, Pokemon\u0027s HP is less than half max, use the item.","; Store current HP in Buffer 3/4","\tpush bc","\tld a, [de]","\tld [wBuffer3], a","\tadd a","\tld c, a","\tdec de","\tld a, [de]","\tinc de","\tld [wBuffer4], a","\tadc a","\tld b, a","\tld a, b","\tcp [hl]","\tld a, c","\tpop bc","\tjr z, .equal","\tjr c, .less","\tret","",".equal","\tinc hl","\tcp [hl]","\tdec hl","\tret nc","",".less","\tcall ItemRecoveryAnim","\t; store max HP in wBuffer1/2","\tld a, [hli]","\tld [wBuffer2], a","\tld a, [hl]","\tld [wBuffer1], a","\tld a, [de]","\tadd c","\tld [wBuffer5], a","\tld c, a","\tdec de","\tld a, [de]","\tadc 0","\tld [wBuffer6], a","\tld b, a","\tld a, [hld]","\tcp c","\tld a, [hl]","\tsbc b","\tjr nc, .okay","\tld a, [hli]","\tld [wBuffer6], a","\tld a, [hl]","\tld [wBuffer5], a","",".okay","\tld a, [wBuffer6]","\tld [de], a","\tinc de","\tld a, [wBuffer5]","\tld [de], a","\tldh a, [hBattleTurn]","\tld [wWhichHPBar], a","\tand a","\thlcoord 2, 2","\tjr z, .got_hp_bar_coords","\thlcoord 10, 9","",".got_hp_bar_coords","\tld [wWhichHPBar], a","\tpredef AnimateHPBar","UseOpponentItem:"],"name":"HandleHPHealingItem","lineNo":1,"address":137570,"addressUsedBy":[]}