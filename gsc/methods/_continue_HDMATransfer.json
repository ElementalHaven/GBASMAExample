{"names":["_continue_HDMATransfer"],"callingMethods":["HDMATransfer_Wait123Scanlines","HDMATransfer_Wait127Scanlines"],"methodsCalled":[],"methodAddressesUsed":[],"varsSet":["rHDMA1","rHDMA2","rHDMA3","rHDMA4","rHDMA5"],"varsUsed":["rLY","rSTAT"],"varAddressesUsed":[],"constantsUsed":["rHDMA5","rLY"],"lines":["_continue_HDMATransfer:","; a lot of waiting around for hardware registers","\t; [rHDMA1, rHDMA2] \u003d hl \u0026 $fff0","\tld a, h","\tldh [rHDMA1], a","\tld a, l","\tand $f0 ; high nybble","\tldh [rHDMA2], a","\t; [rHDMA3, rHDMA4] \u003d de \u0026 $1ff0","\tld a, d","\tand $1f ; lower 5 bits","\tldh [rHDMA3], a","\tld a, e","\tand $f0 ; high nybble","\tldh [rHDMA4], a","\t; e \u003d c | %10000000","\tld a, c","\tdec c","\tor $80","\tld e, a","\t; d \u003d b - c + 1","\tld a, b","\tsub c","\tld d, a","\t; while [rLY] \u003e\u003d d: pass",".ly_loop","\tldh a, [rLY]","\tcp d","\tjr nc, .ly_loop","","\tdi","\t; while [rSTAT] \u0026 3: pass",".rstat_loop_1","\tldh a, [rSTAT]","\tand $3","\tjr nz, .rstat_loop_1","\t; while not [rSTAT] \u0026 3: pass",".rstat_loop_2","\tldh a, [rSTAT]","\tand $3","\tjr z, .rstat_loop_2","\t; load the 5th byte of HDMA","\tld a, e","\tldh [rHDMA5], a","\t; wait until rLY advances (c + 1) times","\tldh a, [rLY]","\tinc c","\tld hl, rLY",".final_ly_loop","\tcp [hl]","\tjr z, .final_ly_loop","\tld a, [hl]","\tdec c","\tjr nz, .final_ly_loop","\tld hl, rHDMA5","\tres 7, [hl]","\tei","","\tret"],"name":"_continue_HDMATransfer","file":"engine/gfx/dma_transfer.asm","lineNo":337,"address":262300,"addressUsedBy":[]}